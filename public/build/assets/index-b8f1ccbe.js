import{r as o,_ as C,j as n,F as K,a as e,c as g}from"./app-99d6f54e.js";import{A as M,E as O}from"./AuthenticatedLayout-a777ef79.js";import{R as f}from"./RupiahInput-70f10f15.js";import{T as _}from"./TextRupiah-09ab2db5.js";import A from"./UpdateRangeHarga-c6d49eae.js";import{F as m}from"./index-d1e9936c.js";import{B as l}from"./useFlexGapSupport-cdcedcf9.js";import{A as E}from"./AntdIcon-069f8aa0.js";import{F as B,T as L}from"./Table-ff610d5b.js";import{I as D}from"./index-078d12d2.js";import{S as x}from"./index-75fad3be.js";import{S as U}from"./index-fc009cdd.js";import{M as v}from"./index-d7e46d9c.js";import"./Sider-c9e9b410.js";import"./index-b6d8a6c3.js";import"./useForceUpdate-a4092761.js";import"./KeyCode-6413d982.js";import"./index-620f7a56.js";import"./index-5dd3d3e8.js";import"./debounce-d266a78a.js";import"./index-dee122bc.js";import"./TextArea-5f862156.js";import"./index-f35f262a.js";import"./CheckOutlined-5c39cba1.js";import"./useLocale-066e56a5.js";import"./styleChecker-f5dc05ae.js";import"./pickAttrs-24d99b4f.js";import"./EyeOutlined-a733697e.js";import"./ExclamationCircleFilled-e36dbf42.js";import"./CloseOutlined-33a60630.js";import"./addEventListener-7807ca64.js";import"./InfoCircleFilled-b4144afa.js";import"./ActionButton-477564ba.js";import"./index-946120b1.js";var T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};const V=T;var $=function(s,p){return o.createElement(E,C({},s,{ref:p,icon:V}))};const j=o.forwardRef($),z=({kelompok:r,kabkot:s})=>{const[p,u]=o.useState([]),[b,d]=o.useState(!1),[k,F]=o.useState(!1),[y,h]=o.useState(!1),[i]=m.useForm(),w=async()=>{d(!0);let{data:a}=await g.get(route("range_harga.fetch"));a=a.map(({id_komoditas:t,min:c,max:I,kode_kabkot:R,komoditas:S})=>({komoditas_id:t,min:c,max:I,kode_kabkot:R,komoditas:S})),u(a),d(!1)};o.useEffect(()=>{w(),i.setFieldsValue({nama_komoditas:"beras",kelompok_id:0,kode_kabkot:"02",min:1e3,max:1e5})},[]);const H=[{title:"Komoditas",dataIndex:"komoditas.nama_komoditas",key:"komoditas.nama_komoditas",render:(a,t)=>t.komoditas.nama_komoditas},{title:"Kelompok",dataIndex:"komoditas.nama_kelompok",key:"komoditas.nama_kelompok",render:(a,t)=>t.komoditas.nama_kelompok},{title:"Kabupaten/Kota",dataIndex:"kode_kabkot",key:"kode_kabkot"},{title:"Harga Minimum",dataIndex:"min",key:"min",render:a=>e(_,{color:"#000",value:a})},{title:"Harga Maksimum",dataIndex:"max",key:"max",render:a=>e(_,{color:"#000",value:a})},{title:"Kalori",dataIndex:"komoditas.kalori",key:"komoditas.kalori",render:(a,t)=>t.komoditas.kalori},{title:"Aksi",key:"aksi",dataIndex:"aksi",render:(a,t)=>n(l,{onClick:()=>N(t.komoditas_id),children:[e(O,{})," Ubah"]})}];return n(K,{children:[n(l,{onClick:()=>F(!k),style:{marginBottom:k?0:20},children:[e(j,{})," Filter Data"]}),n(l,{onClick:()=>h(!0),children:[e(B,{})," Update Range Harga"]}),n(m,{form:i,layout:"vertical",style:{width:400,margin:"20px 0px 20px 0px",backgroundColor:"#fff",padding:20,borderRadius:20,display:k?"":"none"},onFinish:async a=>{d(!0);let t={nama_komoditas:a.nama_komoditas,kode_kabkot:a.kode_kabkot,min:a.min,max:a.max,id_kelompok:a.kelompok_id};const{data:c}=await g.get(route("range_harga.fetch"),{params:t});u(c),d(!1)},onKeyDown:a=>{a.code==="Enter"&&i.submit()},children:[e(m.Item,{label:"Komoditas",name:"nama_komoditas",style:{marginBottom:"4px"},children:e(D,{placeholder:"Kopi Luwak",allowClear:!0})}),e(m.Item,{label:"kelompok",name:"kelompok_id",style:{marginBottom:"4px"},children:e(x,{allowClear:!0,showSearch:!0,showArrow:!0,optionFilterProp:"label",options:r.map(a=>({label:a.nama_kelompok,value:a.id_kelompok}))})}),e(m.Item,{label:"kabupaten/kota",name:"kode_kabkot",style:{marginBottom:"4px"},children:e(x,{allowClear:!0,showSearch:!0,showArrow:!0,optionFilterProp:"label",options:s.map(a=>({label:`[${a.kode_kabkot}] ${a.kabkot}`,value:a.kode_kabkot}))})}),e(f,{label:"Harga Minimum",inputName:"min"}),e(f,{label:"Harga Maksimum",inputName:"max"}),e(m.Item,{children:n(U,{children:[e(l,{type:"primary",onClick:()=>i.submit(),children:"Apply"}),e(l,{type:"default",onClick:()=>{i.resetFields(),i.submit()},children:"Clear"})]})})]}),e(L,{dataSource:p,columns:H,loading:b}),e(v,{open:y,okText:"",confirmLoading:!1,onOk:()=>{},onCancel:()=>h(!1),title:"Update Range Harga",width:1e3,children:e(A,{})})]})};z.layout=r=>e(M,{user:r.props.auth.user,header:e("h2",{className:"",children:"Kelola Range Harga"}),selectedKey:"range_harga",children:r});function N(r){throw new Error("Function not implemented.")}export{z as default};
