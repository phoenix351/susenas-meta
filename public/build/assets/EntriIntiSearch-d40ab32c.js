import{r,a as e,F as K,j as b,c}from"./app-99d6f54e.js";import{m as I}from"./index-d3d40e08.js";import{F as l}from"./index-d1e9936c.js";import{S as n}from"./index-75fad3be.js";import{B as _}from"./useFlexGapSupport-cdcedcf9.js";import{R as v}from"./ReloadOutlined-16a78b30.js";const R=({form:a,onFinish:u,setDataSource:d})=>{const[x,m]=I.useMessage(),h=[{label:"[71] SULAWESI UTARA",value:"71"}],[C,F]=r.useState([]),[w,f]=r.useState(!0),[g,i]=r.useState([]),S=async()=>{const s=route("api.wilayah.kabkot"),{data:t}=await c.get(s);console.log({data:t});const k=t.data.map(o=>({label:`[${o.kode_kabkot}] ${o.kabkot}`,value:o.kode_kabkot}));t.kode_kabkot==="00"?f(!1):a.setFieldValue("kode_kabkot",t.kode_kabkot),p(),F(k)},p=async()=>{const s=route("api.entri.nks",{kodeKabkot:a.getFieldValue("kode_kabkot"),semester:a.getFieldValue("semester")}),{data:t}=await c.get(s),k=t.map(o=>({label:o,value:o}));i(k)};return r.useEffect(()=>{try{S(),a.setFieldValue("kode_prov","71"),a.setFieldValue("semester","2")}catch(s){console.log({error:s})}},[]),e(K,{children:b(l,{form:a,name:"EntriIntiForm",onFinish:u,autoComplete:"off",style:{width:"300px"},children:[m,e(l.Item,{name:"kode_prov",label:"Provinsi",labelCol:{span:8},wrapperCol:{span:16},children:e(n,{allowClear:!0,showSearch:!0,disabled:!0,optionFilterProp:"label",options:h,onClear:()=>{},onChange:()=>{a.setFieldsValue({kode_kabkot:"",nks:""}),d([]),i([])}})}),e(l.Item,{name:"semester",label:"semester",labelCol:{span:8},wrapperCol:{span:16},children:e(n,{allowClear:!0,showSearch:!0,optionFilterProp:"label",options:[{label:"Semester II",value:"2"}],disabled:!0})}),e(l.Item,{name:"kode_kabkot",label:"Kab/Kota",labelCol:{span:8},wrapperCol:{span:16},children:e(n,{allowClear:!0,showSearch:!0,disabled:w,optionFilterProp:"label",options:C,onChange:()=>{a.setFieldsValue({nks:""}),d([]),i([]),p()}})}),e(l.Item,{name:"nks",label:"NKS",labelCol:{span:8},wrapperCol:{span:16},children:e(n,{allowClear:!0,showSearch:!0,optionFilterProp:"label",options:g,onChange:()=>{p(),a.submit()}})}),e(l.Item,{wrapperCol:{span:16,offset:8},children:b(_,{type:"primary",onClick:()=>a.submit(),children:[e(v,{})," Refresh"]})})]})})};export{R as E};
