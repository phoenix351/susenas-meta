import{r,i as w,R as j,L as H,C as B,f as N,N as ne,K as oe,M as le,A as re,j as se,a as ae}from"./app-07f63a06.js";import{w as L,B as D,x as ce,y as ie,N as fe,e as S,C as ue,z as me,A as de}from"./index-2eda4a0e.js";import{E as Ce,C as ge}from"./index-ab2c0fb0.js";import{I as xe}from"./index-a56e40e1.js";import{A as z}from"./ActionButton-ad295530.js";import{u as Q,D as be,P as ve}from"./index-f5bd41dd.js";import{C as pe}from"./KeyCode-2c288b19.js";import{D as ye}from"./AuthenticatedLayout-234c9ce1.js";function Oe(){const[e,n]=r.useState([]),l=r.useCallback(t=>(n(o=>[].concat(w(o),[t])),()=>{n(o=>o.filter(u=>u!==t))}),[]);return[e,l]}function W(e,n){return j.createElement("span",{className:`${e}-close-x`},n||j.createElement(pe,{className:`${e}-close-icon`}))}const G=e=>{const{okText:n,okType:l="primary",cancelText:t,confirmLoading:o,onOk:u,onCancel:d,okButtonProps:i,cancelButtonProps:c}=e,[s]=L("Modal",H());return j.createElement(j.Fragment,null,j.createElement(D,Object.assign({onClick:d},c),t||(s==null?void 0:s.cancelText)),j.createElement(D,Object.assign({},ce(l),{loading:o,onClick:u},i),n||(s==null?void 0:s.okText)))};var Pe=globalThis&&globalThis.__rest||function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};let R;const he=e=>{R={x:e.pageX,y:e.pageY},setTimeout(()=>{R=null},100)};ie()&&document.documentElement.addEventListener("click",he,!0);const ke=e=>{var n;const{getPopupContainer:l,getPrefixCls:t,direction:o}=r.useContext(B),u=$=>{const{onCancel:E}=e;E==null||E($)},d=$=>{const{onOk:E}=e;E==null||E($)},{prefixCls:i,className:c,rootClassName:s,open:a,wrapClassName:C,centered:m,getContainer:f,closeIcon:g,focusTriggerAfterClose:O=!0,visible:b,width:v=520,footer:p}=e,P=Pe(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","visible","width","footer"]),x=t("modal",i),y=t(),[k,I]=Q(x),A=N(C,{[`${x}-centered`]:!!m,[`${x}-wrap-rtl`]:o==="rtl"}),M=p===void 0?r.createElement(G,Object.assign({},e,{onOk:d,onCancel:u})):p;return k(r.createElement(fe,null,r.createElement(ne,{status:!0,override:!0},r.createElement(be,Object.assign({width:v},P,{getContainer:f===void 0?l:f,prefixCls:x,rootClassName:N(I,s),wrapClassName:A,footer:M,visible:a??b,mousePosition:(n=P.mousePosition)!==null&&n!==void 0?n:R,onClose:u,closeIcon:W(x,g),focusTriggerAfterClose:O,transitionName:S(y,"zoom",e.transitionName),maskTransitionName:S(y,"fade",e.maskTransitionName),className:N(I,c)})))))},Y=ke;function K(e){const{icon:n,onCancel:l,onOk:t,close:o,okText:u,okButtonProps:d,cancelText:i,cancelButtonProps:c,confirmPrefixCls:s,rootPrefixCls:a,type:C,okCancel:m,footer:f,locale:g}=e;let O=n;if(!n&&n!==null)switch(C){case"info":O=r.createElement(xe,null);break;case"success":O=r.createElement(ge,null);break;case"error":O=r.createElement(ue,null);break;default:O=r.createElement(Ce,null)}const b=e.okType||"primary",v=m??C==="confirm",p=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[P]=L("Modal"),x=g||P,y=v&&r.createElement(z,{actionFn:l,close:o,autoFocus:p==="cancel",buttonProps:c,prefixCls:`${a}-btn`},i||(x==null?void 0:x.cancelText));return r.createElement("div",{className:`${s}-body-wrapper`},r.createElement("div",{className:`${s}-body`},O,e.title===void 0?null:r.createElement("span",{className:`${s}-title`},e.title),r.createElement("div",{className:`${s}-content`},e.content)),f===void 0?r.createElement("div",{className:`${s}-btns`},y,r.createElement(z,{type:b,actionFn:t,close:o,autoFocus:p==="ok",buttonProps:d,prefixCls:`${a}-btn`},u||(v?x==null?void 0:x.okText:x==null?void 0:x.justOkText))):f)}const Ee=e=>{const{close:n,zIndex:l,afterClose:t,visible:o,open:u,keyboard:d,centered:i,getContainer:c,maskStyle:s,direction:a,prefixCls:C,wrapClassName:m,rootPrefixCls:f,iconPrefixCls:g,theme:O,bodyStyle:b,closable:v=!1,closeIcon:p,modalRender:P,focusTriggerAfterClose:x}=e,y=`${C}-confirm`,k=e.width||416,I=e.style||{},A=e.mask===void 0?!0:e.mask,M=e.maskClosable===void 0?!1:e.maskClosable,$=N(y,`${y}-${e.type}`,{[`${y}-rtl`]:a==="rtl"},e.className);return r.createElement(oe,{prefixCls:f,iconPrefixCls:g,direction:a,theme:O},r.createElement(Y,{prefixCls:C,className:$,wrapClassName:N({[`${y}-centered`]:!!e.centered},m),onCancel:()=>n==null?void 0:n({triggerCancel:!0}),open:u,title:"",footer:null,transitionName:S(f,"zoom",e.transitionName),maskTransitionName:S(f,"fade",e.maskTransitionName),mask:A,maskClosable:M,maskStyle:s,style:I,bodyStyle:b,width:k,zIndex:l,afterClose:t,keyboard:d,centered:i,getContainer:c,closable:v,closeIcon:p,modalRender:P,focusTriggerAfterClose:x},r.createElement(K,Object.assign({},e,{confirmPrefixCls:y}))))},X=Ee,Te=[],T=Te;var je=globalThis&&globalThis.__rest||function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};let q="";function we(){return q}function F(e){const n=document.createDocumentFragment();let l=Object.assign(Object.assign({},e),{close:d,open:!0}),t;function o(){for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];const C=s.some(m=>m&&m.triggerCancel);e.onCancel&&C&&e.onCancel.apply(e,[()=>{}].concat(w(s.slice(1))));for(let m=0;m<T.length;m++)if(T[m]===d){T.splice(m,1);break}me(n)}function u(c){var{okText:s,cancelText:a,prefixCls:C,getContainer:m}=c,f=je(c,["okText","cancelText","prefixCls","getContainer"]);clearTimeout(t),t=setTimeout(()=>{const g=H(),{getPrefixCls:O,getIconPrefixCls:b,getTheme:v}=le(),p=O(void 0,we()),P=C||`${p}-modal`,x=b(),y=v();let k=m;k===!1&&(k=void 0),de(r.createElement(X,Object.assign({},f,{getContainer:k,prefixCls:P,rootPrefixCls:p,iconPrefixCls:x,okText:s,locale:g,theme:y,cancelText:a||g.cancelText})),n)})}function d(){for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];l=Object.assign(Object.assign({},l),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),o.apply(this,s)}}),l.visible&&delete l.visible,u(l)}function i(c){typeof c=="function"?l=c(l):l=Object.assign(Object.assign({},l),c),u(l)}return u(l),T.push(d),{destroy:d,update:i}}function J(e){return Object.assign(Object.assign({},e),{type:"warning"})}function U(e){return Object.assign(Object.assign({},e),{type:"info"})}function V(e){return Object.assign(Object.assign({},e),{type:"success"})}function Z(e){return Object.assign(Object.assign({},e),{type:"error"})}function ee(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function Ne(e){let{rootPrefixCls:n}=e;q=n}const $e=(e,n)=>{let{afterClose:l,config:t}=e;var o;const[u,d]=r.useState(!0),[i,c]=r.useState(t),{direction:s,getPrefixCls:a}=r.useContext(B),C=a("modal"),m=a(),f=()=>{var v;l(),(v=i.afterClose)===null||v===void 0||v.call(i)},g=function(){d(!1);for(var v=arguments.length,p=new Array(v),P=0;P<v;P++)p[P]=arguments[P];const x=p.some(y=>y&&y.triggerCancel);i.onCancel&&x&&i.onCancel.apply(i,[()=>{}].concat(w(p.slice(1))))};r.useImperativeHandle(n,()=>({destroy:g,update:v=>{c(p=>Object.assign(Object.assign({},p),v))}}));const O=(o=i.okCancel)!==null&&o!==void 0?o:i.type==="confirm",[b]=L("Modal",re.Modal);return r.createElement(X,Object.assign({prefixCls:C,rootPrefixCls:m},i,{close:g,open:u,afterClose:f,okText:i.okText||(O?b==null?void 0:b.okText:b==null?void 0:b.justOkText),direction:i.direction||s,cancelText:i.cancelText||(b==null?void 0:b.cancelText)}))},Fe=r.forwardRef($e);let _=0;const Ie=r.memo(r.forwardRef((e,n)=>{const[l,t]=Oe();return r.useImperativeHandle(n,()=>({patchElement:t}),[]),r.createElement(r.Fragment,null,l)}));function Se(){const e=r.useRef(null),[n,l]=r.useState([]);r.useEffect(()=>{n.length&&(w(n).forEach(d=>{d()}),l([]))},[n]);const t=r.useCallback(u=>function(i){var c;_+=1;const s=r.createRef();let a;const C=r.createElement(Fe,{key:`modal-${_}`,config:u(i),ref:s,afterClose:()=>{a==null||a()}});return a=(c=e.current)===null||c===void 0?void 0:c.patchElement(C),a&&T.push(a),{destroy:()=>{function m(){var f;(f=s.current)===null||f===void 0||f.destroy()}s.current?m():l(f=>[].concat(w(f),[m]))},update:m=>{function f(){var g;(g=s.current)===null||g===void 0||g.update(m)}s.current?f():l(g=>[].concat(w(g),[f]))}}},[]);return[r.useMemo(()=>({info:t(U),success:t(V),error:t(Z),warning:t(J),confirm:t(ee)}),[]),r.createElement(Ie,{key:"modal-holder",ref:e})]}var Ae=globalThis&&globalThis.__rest||function(e,n){var l={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(l[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(l[t[o]]=e[t[o]]);return l};const Me=e=>{const{prefixCls:n,className:l,closeIcon:t,closable:o,type:u,title:d,children:i}=e,c=Ae(e,["prefixCls","className","closeIcon","closable","type","title","children"]),{getPrefixCls:s}=r.useContext(B),a=s(),C=n||s("modal"),[,m]=Q(C),f=`${C}-confirm`;let g={};return u?g={closable:o??!1,title:"",footer:"",children:r.createElement(K,Object.assign({},e,{confirmPrefixCls:f,rootPrefixCls:a,content:i}))}:g={closable:o??!0,title:d,footer:e.footer===void 0?r.createElement(G,Object.assign({},e)):e.footer,children:i},r.createElement(ve,Object.assign({prefixCls:C,className:N(m,`${C}-pure-panel`,u&&f,u&&`${f}-${u}`,l)},c,{closeIcon:W(C,t),closable:o},g))},Re=Me;function te(e){return F(J(e))}const h=Y;h.useModal=Se;h.info=function(n){return F(U(n))};h.success=function(n){return F(V(n))};h.error=function(n){return F(Z(n))};h.warning=te;h.warn=te;h.confirm=function(n){return F(ee(n))};h.destroyAll=function(){for(;T.length;){const n=T.pop();n&&n()}};h.config=Ne;h._InternalPanelDoNotUseOrYouWillBeFired=Re;const Be=h,Ye=({title:e,openModal:n,handleOk:l,confirmLoadingModal:t,handleCancel:o,okText:u,cancelText:d,width:i,maskClosable:c,children:s})=>se(Be,{title:e,open:n,onOk:l,confirmLoading:t,onCancel:o,cancelText:d,okText:u,mask:!0,maskClosable:c,width:i,children:[ae(ye,{}),s]});export{Ye as M};
