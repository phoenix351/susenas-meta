import{r,a as t,F as C,j as b,c as u}from"./app-56f5b824.js";import{m as _}from"./index-fbef3bc5.js";import{F as l}from"./index-2acae938.js";import{S as n}from"./index-abd961d1.js";import{B as I}from"./TextArea-aff3433e.js";import{R as v}from"./ReloadOutlined-4f529afa.js";const R=({form:e,onFinish:p,setDataSource:d})=>{const[x,m]=_.useMessage(),h=[{label:"[71] SULAWESI UTARA",value:"71"}],[F,f]=r.useState([]),[g,S]=r.useState(!0),[w,i]=r.useState([]),K=async()=>{const s=route("api.entri.kabkot"),{data:a}=await u.get(s);console.log({data:a});const k=a.data.map(o=>({label:`[${o.kode_kabkot}] ${o.kabkot}`,value:o.kode_kabkot}));a.kode_kabkot==="00"?S(!1):e.setFieldValue("kode_kabkot",a.kode_kabkot),f(k)},c=async()=>{const s=route("api.entri.nks",{kodeKabkot:e.getFieldValue("kode_kabkot"),semester:e.getFieldValue("semester")}),{data:a}=await u.get(s),k=a.map(o=>({label:o,value:o}));i(k)};return r.useEffect(()=>{try{K(),e.setFieldValue("kode_prov","71"),e.setFieldValue("semester","2")}catch(s){console.log({error:s})}},[]),t(C,{children:b(l,{form:e,name:"EntriIntiForm",onFinish:p,autoComplete:"off",style:{width:"300px"},children:[m,t(l.Item,{name:"kode_prov",label:"Provinsi",children:t(n,{allowClear:!0,showSearch:!0,disabled:!0,optionFilterProp:"label",options:h,onClear:()=>{},onChange:()=>{e.setFieldsValue({kode_kabkot:"",nks:""}),d([]),i([])}})}),t(l.Item,{name:"semester",label:"semester",children:t(n,{allowClear:!0,showSearch:!0,optionFilterProp:"label",options:[{label:"Semester II",value:"2"}],disabled:!0})}),t(l.Item,{name:"kode_kabkot",label:"Kab/Kota",children:t(n,{allowClear:!0,showSearch:!0,disabled:g,optionFilterProp:"label",options:F,onChange:()=>{e.setFieldsValue({nks:""}),d([]),i([]),c()}})}),t(l.Item,{name:"nks",label:"NKS",children:t(n,{allowClear:!0,showSearch:!0,optionFilterProp:"label",options:w,onChange:()=>{c(),e.submit()}})}),b(I,{type:"primary",onClick:()=>e.submit(),children:[t(v,{})," Refresh"]})]})})};export{R as E};
