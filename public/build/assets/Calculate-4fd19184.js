import{r as p,j as i,F as C,a as o,b as P,c as h}from"./app-e557c7c6.js";import{A as j}from"./AuthenticatedLayout-fe66bae3.js";import{S as g}from"./index-6bd818a5.js";import{B as y}from"./index-50b80eee.js";import{E as B}from"./ExportOutlined-2de963cc.js";import{S as T}from"./SyncOutlined-e1439701.js";import{T as A}from"./index-fe1ab845.js";import"./Sider-e878b3e0.js";import"./AntdIcon-00a5507c.js";import"./LeftOutlined-26e8e4f2.js";import"./index-7ee738df.js";import"./useForceUpdate-46c57a70.js";import"./responsiveObserver-f28a2943.js";import"./EllipsisOutlined-9956e50d.js";import"./Overflow-c337ad3f.js";import"./Keyframes-6852444d.js";import"./useFlexGapSupport-458b4d4a.js";import"./KeyCode-6413d982.js";import"./EditOutlined-6cc1ce15.js";import"./index-9fea25df.js";import"./index-c55bd24a.js";import"./Title-3632d3ff.js";import"./CheckOutlined-3f885691.js";import"./styleChecker-390e3bce.js";import"./TextArea-b56a89be.js";const{Title:L}=A,U=({data:s})=>{const[f,x]=p.useState(0),[m,u]=p.useState(!1);console.log({data:s});const w=async r=>{try{r=r.filter(t=>t.length>10);const e=5,c=5,k=async t=>{const l=t.map(async a=>{const d=route("api.mak.calculate_qc",{id_ruta:a});try{return(await h.get(d)).data}catch(n){return console.error(`Error processing id_ruta ${a}:`,n),null}});return await Promise.all(l)};for(let t=0;t<r.length;t+=e){const l=r.slice(t,t+e),a=await Promise.all(Array.from({length:c},(d,n)=>{const E=n*(e/c),b=(n+1)*(e/c);return k(l.slice(E,b))}));console.log("Results:",a.flat()),x(t)}}catch(e){console.log("Something went wrong",{error:e})}},S=async()=>{try{u(!0);const r=await h.post(route("monitoring.update"))}catch(r){console.log("Something went wrong",{error:r})}finally{u(!1)}};return p.useEffect(()=>{w(s)},[]),i(C,{children:[o(P,{title:"Periksa"}),o(L,{level:2,children:f}),i(g,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:[i(y,{type:"primary",children:[o(B,{}),"Export as CSV"]}),i(y,{type:"primary",onClick:()=>S(),loading:m,children:[m??o(T,{}),"Update Data Monitoring"]})]}),o(g,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical"})]})};U.layout=s=>o(j,{user:s.props.auth.user,header:o("h2",{className:"",children:"Periksa"}),selectedKey:"periksa",children:s});export{U as default};
