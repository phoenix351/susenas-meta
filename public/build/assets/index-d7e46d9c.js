import{r as l,i as w,R as j,P as H,C as B,f as N,O as ne,E as oe,G as le,y as re}from"./app-99d6f54e.js";import{B as _,h as se,m as ae,N as ce,e as S,C as ie,n as fe,r as ue}from"./useFlexGapSupport-cdcedcf9.js";import{E as me,C as de}from"./ExclamationCircleFilled-e36dbf42.js";import{I as Ce}from"./InfoCircleFilled-b4144afa.js";import{A as z}from"./ActionButton-477564ba.js";import{u as Q,D as ge,P as be}from"./index-946120b1.js";import{C as xe}from"./CloseOutlined-33a60630.js";import{u as L}from"./useLocale-066e56a5.js";function ve(){const[e,n]=l.useState([]),r=l.useCallback(t=>(n(o=>[].concat(w(o),[t])),()=>{n(o=>o.filter(m=>m!==t))}),[]);return[e,r]}function W(e,n){return j.createElement("span",{className:`${e}-close-x`},n||j.createElement(xe,{className:`${e}-close-icon`}))}const G=e=>{const{okText:n,okType:r="primary",cancelText:t,confirmLoading:o,onOk:m,onCancel:b,okButtonProps:f,cancelButtonProps:c}=e,[s]=L("Modal",H());return j.createElement(j.Fragment,null,j.createElement(_,Object.assign({onClick:b},c),t||(s==null?void 0:s.cancelText)),j.createElement(_,Object.assign({},se(r),{loading:o,onClick:m},f),n||(s==null?void 0:s.okText)))};var pe=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};let R;const ye=e=>{R={x:e.pageX,y:e.pageY},setTimeout(()=>{R=null},100)};ae()&&document.documentElement.addEventListener("click",ye,!0);const Oe=e=>{var n;const{getPopupContainer:r,getPrefixCls:t,direction:o}=l.useContext(B),m=$=>{const{onCancel:E}=e;E==null||E($)},b=$=>{const{onOk:E}=e;E==null||E($)},{prefixCls:f,className:c,rootClassName:s,open:a,wrapClassName:d,centered:u,getContainer:i,closeIcon:C,focusTriggerAfterClose:O=!0,visible:x,width:v=520,footer:p}=e,P=pe(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","visible","width","footer"]),g=t("modal",f),y=t(),[k,I]=Q(g),A=N(d,{[`${g}-centered`]:!!u,[`${g}-wrap-rtl`]:o==="rtl"}),M=p===void 0?l.createElement(G,Object.assign({},e,{onOk:b,onCancel:m})):p;return k(l.createElement(ce,null,l.createElement(ne,{status:!0,override:!0},l.createElement(ge,Object.assign({width:v},P,{getContainer:i===void 0?r:i,prefixCls:g,rootClassName:N(I,s),wrapClassName:A,footer:M,visible:a??x,mousePosition:(n=P.mousePosition)!==null&&n!==void 0?n:R,onClose:m,closeIcon:W(g,C),focusTriggerAfterClose:O,transitionName:S(y,"zoom",e.transitionName),maskTransitionName:S(y,"fade",e.maskTransitionName),className:N(I,c)})))))},Y=Oe;function X(e){const{icon:n,onCancel:r,onOk:t,close:o,okText:m,okButtonProps:b,cancelText:f,cancelButtonProps:c,confirmPrefixCls:s,rootPrefixCls:a,type:d,okCancel:u,footer:i,locale:C}=e;let O=n;if(!n&&n!==null)switch(d){case"info":O=l.createElement(Ce,null);break;case"success":O=l.createElement(de,null);break;case"error":O=l.createElement(ie,null);break;default:O=l.createElement(me,null)}const x=e.okType||"primary",v=u??d==="confirm",p=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[P]=L("Modal"),g=C||P,y=v&&l.createElement(z,{actionFn:r,close:o,autoFocus:p==="cancel",buttonProps:c,prefixCls:`${a}-btn`},f||(g==null?void 0:g.cancelText));return l.createElement("div",{className:`${s}-body-wrapper`},l.createElement("div",{className:`${s}-body`},O,e.title===void 0?null:l.createElement("span",{className:`${s}-title`},e.title),l.createElement("div",{className:`${s}-content`},e.content)),i===void 0?l.createElement("div",{className:`${s}-btns`},y,l.createElement(z,{type:x,actionFn:t,close:o,autoFocus:p==="ok",buttonProps:b,prefixCls:`${a}-btn`},m||(v?g==null?void 0:g.okText:g==null?void 0:g.justOkText))):i)}const Pe=e=>{const{close:n,zIndex:r,afterClose:t,visible:o,open:m,keyboard:b,centered:f,getContainer:c,maskStyle:s,direction:a,prefixCls:d,wrapClassName:u,rootPrefixCls:i,iconPrefixCls:C,theme:O,bodyStyle:x,closable:v=!1,closeIcon:p,modalRender:P,focusTriggerAfterClose:g}=e,y=`${d}-confirm`,k=e.width||416,I=e.style||{},A=e.mask===void 0?!0:e.mask,M=e.maskClosable===void 0?!1:e.maskClosable,$=N(y,`${y}-${e.type}`,{[`${y}-rtl`]:a==="rtl"},e.className);return l.createElement(oe,{prefixCls:i,iconPrefixCls:C,direction:a,theme:O},l.createElement(Y,{prefixCls:d,className:$,wrapClassName:N({[`${y}-centered`]:!!e.centered},u),onCancel:()=>n==null?void 0:n({triggerCancel:!0}),open:m,title:"",footer:null,transitionName:S(i,"zoom",e.transitionName),maskTransitionName:S(i,"fade",e.maskTransitionName),mask:A,maskClosable:M,maskStyle:s,style:I,bodyStyle:x,width:k,zIndex:r,afterClose:t,keyboard:b,centered:f,getContainer:c,closable:v,closeIcon:p,modalRender:P,focusTriggerAfterClose:g},l.createElement(X,Object.assign({},e,{confirmPrefixCls:y}))))},q=Pe,he=[],T=he;var ke=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};let J="";function Ee(){return J}function F(e){const n=document.createDocumentFragment();let r=Object.assign(Object.assign({},e),{close:b,open:!0}),t;function o(){for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];const d=s.some(u=>u&&u.triggerCancel);e.onCancel&&d&&e.onCancel.apply(e,[()=>{}].concat(w(s.slice(1))));for(let u=0;u<T.length;u++)if(T[u]===b){T.splice(u,1);break}fe(n)}function m(c){var{okText:s,cancelText:a,prefixCls:d,getContainer:u}=c,i=ke(c,["okText","cancelText","prefixCls","getContainer"]);clearTimeout(t),t=setTimeout(()=>{const C=H(),{getPrefixCls:O,getIconPrefixCls:x,getTheme:v}=le(),p=O(void 0,Ee()),P=d||`${p}-modal`,g=x(),y=v();let k=u;k===!1&&(k=void 0),ue(l.createElement(q,Object.assign({},i,{getContainer:k,prefixCls:P,rootPrefixCls:p,iconPrefixCls:g,okText:s,locale:C,theme:y,cancelText:a||C.cancelText})),n)})}function b(){for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];r=Object.assign(Object.assign({},r),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),o.apply(this,s)}}),r.visible&&delete r.visible,m(r)}function f(c){typeof c=="function"?r=c(r):r=Object.assign(Object.assign({},r),c),m(r)}return m(r),T.push(b),{destroy:b,update:f}}function K(e){return Object.assign(Object.assign({},e),{type:"warning"})}function U(e){return Object.assign(Object.assign({},e),{type:"info"})}function V(e){return Object.assign(Object.assign({},e),{type:"success"})}function Z(e){return Object.assign(Object.assign({},e),{type:"error"})}function ee(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function Te(e){let{rootPrefixCls:n}=e;J=n}const je=(e,n)=>{let{afterClose:r,config:t}=e;var o;const[m,b]=l.useState(!0),[f,c]=l.useState(t),{direction:s,getPrefixCls:a}=l.useContext(B),d=a("modal"),u=a(),i=()=>{var v;r(),(v=f.afterClose)===null||v===void 0||v.call(f)},C=function(){b(!1);for(var v=arguments.length,p=new Array(v),P=0;P<v;P++)p[P]=arguments[P];const g=p.some(y=>y&&y.triggerCancel);f.onCancel&&g&&f.onCancel.apply(f,[()=>{}].concat(w(p.slice(1))))};l.useImperativeHandle(n,()=>({destroy:C,update:v=>{c(p=>Object.assign(Object.assign({},p),v))}}));const O=(o=f.okCancel)!==null&&o!==void 0?o:f.type==="confirm",[x]=L("Modal",re.Modal);return l.createElement(q,Object.assign({prefixCls:d,rootPrefixCls:u},f,{close:C,open:m,afterClose:i,okText:f.okText||(O?x==null?void 0:x.okText:x==null?void 0:x.justOkText),direction:f.direction||s,cancelText:f.cancelText||(x==null?void 0:x.cancelText)}))},we=l.forwardRef(je);let D=0;const Ne=l.memo(l.forwardRef((e,n)=>{const[r,t]=ve();return l.useImperativeHandle(n,()=>({patchElement:t}),[]),l.createElement(l.Fragment,null,r)}));function $e(){const e=l.useRef(null),[n,r]=l.useState([]);l.useEffect(()=>{n.length&&(w(n).forEach(b=>{b()}),r([]))},[n]);const t=l.useCallback(m=>function(f){var c;D+=1;const s=l.createRef();let a;const d=l.createElement(we,{key:`modal-${D}`,config:m(f),ref:s,afterClose:()=>{a==null||a()}});return a=(c=e.current)===null||c===void 0?void 0:c.patchElement(d),a&&T.push(a),{destroy:()=>{function u(){var i;(i=s.current)===null||i===void 0||i.destroy()}s.current?u():r(i=>[].concat(w(i),[u]))},update:u=>{function i(){var C;(C=s.current)===null||C===void 0||C.update(u)}s.current?i():r(C=>[].concat(w(C),[i]))}}},[]);return[l.useMemo(()=>({info:t(U),success:t(V),error:t(Z),warning:t(K),confirm:t(ee)}),[]),l.createElement(Ne,{key:"modal-holder",ref:e})]}var Fe=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const Ie=e=>{const{prefixCls:n,className:r,closeIcon:t,closable:o,type:m,title:b,children:f}=e,c=Fe(e,["prefixCls","className","closeIcon","closable","type","title","children"]),{getPrefixCls:s}=l.useContext(B),a=s(),d=n||s("modal"),[,u]=Q(d),i=`${d}-confirm`;let C={};return m?C={closable:o??!1,title:"",footer:"",children:l.createElement(X,Object.assign({},e,{confirmPrefixCls:i,rootPrefixCls:a,content:f}))}:C={closable:o??!0,title:b,footer:e.footer===void 0?l.createElement(G,Object.assign({},e)):e.footer,children:f},l.createElement(be,Object.assign({prefixCls:d,className:N(u,`${d}-pure-panel`,m&&i,m&&`${i}-${m}`,r)},c,{closeIcon:W(d,t),closable:o},C))},Se=Ie;function te(e){return F(K(e))}const h=Y;h.useModal=$e;h.info=function(n){return F(U(n))};h.success=function(n){return F(V(n))};h.error=function(n){return F(Z(n))};h.warning=te;h.warn=te;h.confirm=function(n){return F(ee(n))};h.destroyAll=function(){for(;T.length;){const n=T.pop();n&&n()}};h.config=Te;h._InternalPanelDoNotUseOrYouWillBeFired=Se;const He=h;export{He as M};
