import{r as o,i as T,j as m,F as v,a as t,c as g}from"./app-af43503a.js";import{A as V}from"./AuthenticatedLayout-a94642f1.js";import{R as y}from"./RupiahInput-2ca944d5.js";import{T as F}from"./TextRupiah-2a52441e.js";import j from"./UpdateRangeHarga-1b7ba2e2.js";import z from"./UpdateForm-e088c792.js";import{F as r}from"./index-7b49c84f.js";import{S as w}from"./index-f4b92d9b.js";import{B as d}from"./index-76f04737.js";import{A as $}from"./AntdIcon-937b6b10.js";import{I as N}from"./index-4483dd73.js";import{S as H}from"./index-a0229386.js";import{T as P}from"./Table-b9d643cb.js";import{M as S}from"./index-35ef6427.js";import{E as q}from"./EditOutlined-24f96d29.js";import"./Sider-239bcf32.js";import"./LeftOutlined-d4bb2dd6.js";import"./index-b0778147.js";import"./useForceUpdate-fa4aeaa0.js";import"./responsiveObserver-c3fc3361.js";import"./EllipsisOutlined-e3781b90.js";import"./Overflow-0df44584.js";import"./Keyframes-097eede1.js";import"./useFlexGapSupport-2defffec.js";import"./KeyCode-6413d982.js";import"./index-65be2aae.js";import"./index-ad718474.js";import"./debounce-9b200d22.js";import"./index-fa065f39.js";import"./TextArea-3dd3a4d9.js";import"./CloseCircleFilled-70c684fc.js";import"./index-4e959500.js";import"./Title-8a179cd0.js";import"./CheckOutlined-579d7e94.js";import"./styleChecker-db12fac3.js";import"./pickAttrs-34bc81c1.js";import"./DeleteOutlined-c82642ec.js";import"./EyeOutlined-e115b12e.js";import"./ExclamationCircleFilled-d5d80012.js";import"./CloseOutlined-f37a1da2.js";import"./addEventListener-7a510b6f.js";import"./Dropdown-f87771dc.js";import"./InfoCircleFilled-9e526591.js";import"./ActionButton-660c83f4.js";import"./index-80e7febf.js";var G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};const J=G;var Q=function(p,k){return o.createElement($,T({},p,{ref:k,icon:J}))};const W=o.forwardRef(Q),X=({kelompok:i,kabkot:p})=>{const[k,h]=o.useState([]),[I,l]=o.useState(!1),[f,R]=o.useState(!1),[C,U]=o.useState(!1),[L,c]=o.useState(!1),[x,_]=o.useState(!1),[n]=r.useForm(),[s]=r.useForm(),b=async()=>{l(!0);let{data:a}=await g.get(route("range_harga.fetch"));a=a.map(({id_komoditas:e,min:u,max:B,kode_kabkot:E,komoditas:D})=>({komoditas_id:e,min:u,max:B,kode_kabkot:E,komoditas:D})),h(a),l(!1)};o.useEffect(()=>{b()},[]);const M=[{title:"Komoditas",dataIndex:"komoditas.nama_komoditas",key:"komoditas.nama_komoditas",render:(a,e)=>e.komoditas.nama_komoditas},{title:"Kelompok",dataIndex:"komoditas.nama_kelompok",key:"komoditas.nama_kelompok",render:(a,e)=>e.komoditas.nama_kelompok},{title:"Kabupaten/Kota",dataIndex:"kode_kabkot",key:"kode_kabkot"},{title:"Harga Minimum",dataIndex:"min",key:"min",render:a=>t(F,{color:"#000",value:a})},{title:"Harga Maksimum",dataIndex:"max",key:"max",render:a=>t(F,{color:"#000",value:a})},{title:"Aksi",key:"aksi",dataIndex:"aksi",render:(a,e)=>m(d,{onClick:()=>K(e),children:[t(q,{})," Ubah"]})}],O=async a=>{l(!0);let e={nama_komoditas:a.nama_komoditas,kode_kabkot:a.kode_kabkot,min:a.min,max:a.max,id_kelompok:a.kelompok_id};const{data:u}=await g.get(route("range_harga.fetch"),{params:e});h(u),l(!1)};function K(a){s.resetFields(),s.setFieldsValue({kode_kabkot:a.kode_kabkot,id_komoditas:a.komoditas_id,max:a.max,min:a.min,nama_kelompok:a.komoditas.nama_kelompok,nama_komoditas:a.komoditas.nama_komoditas}),c(!0)}async function A(a){try{_(!0);const e=await g.put(route("range_harga.update"),a)}catch(e){console.error(e),console.error("error update range harga")}finally{_(!1),b(),c(!1)}}return m(v,{children:[t(w,{style:{display:"flex",justifyContent:"end"},children:m(d,{onClick:()=>R(!f),style:{marginBottom:20},children:[t(W,{})," Filter Data"]})}),m(r,{form:n,layout:"vertical",style:{width:400,backgroundColor:"#fff",padding:20,borderRadius:20,display:f?"":"none",position:"absolute",zIndex:1e3,right:40,boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px"},onFinish:O,onKeyDown:a=>{a.code==="Enter"&&n.submit()},children:[t(r.Item,{label:"Komoditas",name:"nama_komoditas",style:{marginBottom:"4px"},children:t(N,{placeholder:"Kopi Luwak",allowClear:!0})}),t(r.Item,{label:"kelompok",name:"kelompok_id",style:{marginBottom:"4px"},children:t(H,{allowClear:!0,showSearch:!0,showArrow:!0,optionFilterProp:"label",options:i.map(a=>({label:a.nama_kelompok,value:a.id_kelompok}))})}),t(r.Item,{label:"kabupaten/kota",name:"kode_kabkot",style:{marginBottom:"4px"},children:t(H,{allowClear:!0,showSearch:!0,showArrow:!0,optionFilterProp:"label",options:p.map(a=>({label:`[${a.kode_kabkot}] ${a.kabkot}`,value:a.kode_kabkot}))})}),t(y,{label:"Harga Minimum",inputName:"min"}),t(y,{label:"Harga Maksimum",inputName:"max"}),t(r.Item,{children:m(w,{children:[t(d,{type:"primary",onClick:()=>n.submit(),children:"Apply"}),t(d,{type:"default",onClick:()=>{n.resetFields(),n.submit()},children:"Clear"})]})})]}),t(P,{dataSource:k,columns:M,loading:I}),t(S,{open:C,okText:"",confirmLoading:x,onOk:()=>{},onCancel:()=>U(!1),title:"Update Range Harga",width:1e3,children:t(j,{})}),t(S,{open:L,okText:"Simpan",confirmLoading:x,onOk:()=>s.submit(),onCancel:()=>c(!1),title:"Update Range Harga",width:500,children:t(z,{form:s,onFinish:A})})]})};X.layout=i=>t(V,{user:i.props.auth.user,header:t("h2",{className:"",children:"Kelola Range Harga"}),selectedKey:"range_harga",children:i});export{X as default};
