import{r,a as t,F as C,j as b,c as u}from"./app-6875295f.js";import{m as _}from"./index-2a54ca54.js";import{F as l}from"./index-67154d3a.js";import{S as n}from"./index-b126b355.js";import{B as I}from"./TextArea-747be706.js";import{R as v}from"./ReloadOutlined-e44b4e39.js";const R=({form:e,onFinish:p,setDataSource:c})=>{const[x,m]=_.useMessage(),h=[{label:"[71] SULAWESI UTARA",value:"71"}],[F,f]=r.useState([]),[g,S]=r.useState(!0),[w,i]=r.useState([]),K=async()=>{const s=route("api.entri.kabkot"),{data:a}=await u.get(s);console.log({data:a});const d=a.data.map(o=>({label:`[${o.kode_kabkot}] ${o.kabkot}`,value:o.kode_kabkot}));a.kode_kabkot==="00"?S(!1):e.setFieldValue("kode_kabkot",a.kode_kabkot),k(),f(d)},k=async()=>{const s=route("api.entri.nks",{kodeKabkot:e.getFieldValue("kode_kabkot"),semester:e.getFieldValue("semester")}),{data:a}=await u.get(s),d=a.map(o=>({label:o,value:o}));i(d)};return r.useEffect(()=>{try{K(),e.setFieldValue("kode_prov","71"),e.setFieldValue("semester","2")}catch(s){console.log({error:s})}},[]),t(C,{children:b(l,{form:e,name:"EntriIntiForm",onFinish:p,autoComplete:"off",style:{width:"300px"},children:[m,t(l.Item,{name:"kode_prov",label:"Provinsi",children:t(n,{allowClear:!0,showSearch:!0,disabled:!0,optionFilterProp:"label",options:h,onClear:()=>{},onChange:()=>{e.setFieldsValue({kode_kabkot:"",nks:""}),c([]),i([])}})}),t(l.Item,{name:"semester",label:"semester",children:t(n,{allowClear:!0,showSearch:!0,optionFilterProp:"label",options:[{label:"Semester II",value:"2"}],disabled:!0})}),t(l.Item,{name:"kode_kabkot",label:"Kab/Kota",children:t(n,{allowClear:!0,showSearch:!0,disabled:g,optionFilterProp:"label",options:F,onChange:()=>{e.setFieldsValue({nks:""}),c([]),i([]),k()}})}),t(l.Item,{name:"nks",label:"NKS",children:t(n,{allowClear:!0,showSearch:!0,optionFilterProp:"label",options:w,onChange:()=>{k(),e.submit()}})}),b(I,{type:"primary",onClick:()=>e.submit(),children:[t(v,{})," Refresh"]})]})})};export{R as E};
