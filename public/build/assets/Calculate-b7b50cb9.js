import{r as l,j as i,F as C,a as o,b as P,c as h}from"./app-af43503a.js";import{A as j}from"./AuthenticatedLayout-a94642f1.js";import{S as g}from"./index-f4b92d9b.js";import{B as y}from"./index-76f04737.js";import{E as B}from"./ExportOutlined-cf345730.js";import{S as T}from"./SyncOutlined-9ee0f292.js";import{T as A}from"./index-4e959500.js";import"./Sider-239bcf32.js";import"./AntdIcon-937b6b10.js";import"./LeftOutlined-d4bb2dd6.js";import"./index-b0778147.js";import"./useForceUpdate-fa4aeaa0.js";import"./responsiveObserver-c3fc3361.js";import"./EllipsisOutlined-e3781b90.js";import"./Overflow-0df44584.js";import"./Keyframes-097eede1.js";import"./useFlexGapSupport-2defffec.js";import"./KeyCode-6413d982.js";import"./EditOutlined-24f96d29.js";import"./index-65be2aae.js";import"./index-ad718474.js";import"./Title-8a179cd0.js";import"./CheckOutlined-579d7e94.js";import"./CloseCircleFilled-70c684fc.js";import"./styleChecker-db12fac3.js";import"./TextArea-3dd3a4d9.js";const{Title:L}=A,U=({data:s})=>{const[f,x]=l.useState(0),[m,u]=l.useState(!1);console.log({data:s});const w=async r=>{try{r=r.filter(t=>t.length>10);const e=5,c=5,k=async t=>{const p=t.map(async a=>{const d=route("api.mak.calculate_qc",{id_ruta:a});try{return(await h.get(d)).data}catch(n){return console.error(`Error processing id_ruta ${a}:`,n),null}});return await Promise.all(p)};for(let t=0;t<r.length;t+=e){const p=r.slice(t,t+e),a=await Promise.all(Array.from({length:c},(d,n)=>{const E=n*(e/c),b=(n+1)*(e/c);return k(p.slice(E,b))}));console.log("Results:",a.flat()),x(t)}}catch(e){console.log("Something went wrong",{error:e})}},S=async()=>{try{u(!0);const r=await h.post(route("monitoring.update"))}catch(r){console.log("Something went wrong",{error:r})}finally{u(!1)}};return l.useEffect(()=>{w(s)},[]),i(C,{children:[o(P,{title:"Periksa"}),o(L,{level:2,children:f}),i(g,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:[i(y,{type:"primary",children:[o(B,{}),"Export as CSV"]}),i(y,{type:"primary",onClick:()=>S(),loading:m,children:[m??o(T,{}),"Update Data Monitoring"]})]}),o(g,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical"})]})};U.layout=s=>o(j,{user:s.props.auth.user,header:o("h2",{className:"",children:"Periksa"}),selectedKey:"periksa",children:s});export{U as default};
