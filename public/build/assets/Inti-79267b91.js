import{r as i,a as e,F as C,j as g,c as f,b as K,g as x}from"./app-47f9fb95.js";import{A as E}from"./AuthenticatedLayout-179e1858.js";import{m as _}from"./index-c04db46a.js";import{F as s}from"./index-57964690.js";import{S as k}from"./index-c5db7636.js";import{B as n}from"./index-90e55f26.js";import{S as I}from"./index-7ee3fec1.js";import{T as N}from"./Table-0e48ae23.js";import"./Sider-0b6fde5b.js";import"./AntdIcon-380994e8.js";import"./index-d606693a.js";import"./KeyCode-6413d982.js";import"./index-039bef2b.js";import"./CloseOutlined-bfc6998d.js";import"./addEventListener-5ce19582.js";import"./Dropdown-7a2d2964.js";const v=({form:a,onFinish:p,setDataSource:l})=>{const[d,h]=_.useMessage(),b=[{label:"[71] SULAWESI UTARA",value:"71"}],[S,F]=i.useState([]);i.useState([]);const[r,t]=i.useState([]),c=async()=>{const u=route("api.entri.kabkot"),{data:m}=await f.get(u),y=m.data.map(o=>({label:`[${o.kode_kabkot}] ${o.kabkot}`,value:o.kode_kabkot}));a.setFieldValue("kode_kabkot",m.kode_kabkot),F(y)},w=async()=>{const u=route("api.entri.nks",{kodeKabkot:a.getFieldValue("kode_kabkot"),semester:a.getFieldValue("semester")}),{data:m}=await f.get(u),y=m.map(o=>({label:o,value:o}));t(y)};return i.useEffect(()=>{try{c(),a.setFieldValue("kode_prov","71")}catch{}},[]),e(C,{children:g(s,{form:a,name:"EntriIntiForm",onFinish:p,autoComplete:"off",style:{width:"300px"},children:[h,e(s.Item,{name:"kode_prov",label:"Provinsi",children:e(k,{allowClear:!0,showSearch:!0,disabled:!0,optionFilterProp:"label",options:b,onClear:()=>{},onChange:()=>{a.setFieldsValue({kode_kab:"",semester:"",nks:""}),l([]),t([])}})}),e(s.Item,{name:"kode_kabkot",label:"Kab/Kota",children:e(k,{allowClear:!0,showSearch:!0,disabled:!0,optionFilterProp:"label",options:S,onChange:()=>{a.setFieldsValue({semester:"",nks:""}),l([]),t([])}})}),e(s.Item,{name:"semester",label:"semester",children:e(k,{allowClear:!0,showSearch:!0,optionFilterProp:"label",options:[{label:"Semester I",value:"1",selected:!0}],onChange:()=>{w()}})}),e(s.Item,{name:"nks",label:"NKS",children:e(k,{allowClear:!0,showSearch:!0,optionFilterProp:"label",options:r,onChange:()=>a.submit()})}),e(n,{type:"primary",onClick:()=>a.submit(),children:"Refresh"})]})})},A=()=>{i.useEffect(()=>{},[]);const[a]=s.useForm(),[p,l]=i.useState([]),[d,h]=_.useMessage(),b={3:e(n,{type:"primary",danger:!0,children:"Error"}),2:e(n,{type:"default",children:"Warning"}),1:e(n,{type:"primary",style:{backgroundColor:"green"},children:"Success"})};return g(C,{children:[h,e(K,{title:"Entri Kuesioner Inti"}),g(I,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:[e(v,{setDataSource:l,form:a,onFinish:async r=>{console.log({values:r}),d.open({type:"loading",key:"cari",content:"Memuat Data"});try{const t=route("api.entri.mak",r),{data:c}=await f.get(t);console.log({data:c}),l(c.data),d.open({type:"success",key:"cari",content:"Berhasil mengambil data"})}catch{d.open({type:"error",key:"cari",content:"Oops terjadi kesalahan, silahkan hubungi admin"})}}}),e(I,{style:{width:"100%",justifyContent:"end"},children:e(n,{type:"primary",onClick:()=>x.visit(route("entri.mak.create")),children:"Tambah Ruta"})}),e(N,{dataSource:p,columns:[{title:"Nomor",dataIndex:"id",key:"id"},{title:"Kecamatan",dataIndex:"kec",key:"kec",render:(r,t)=>`[${t.kode_kec}] ${t.kec}`},{title:"Desa",dataIndex:"desa",key:"desa",render:(r,t)=>`[${t.kode_desa}] ${t.desa}`},{title:"Blok Sensus",dataIndex:"kode_bs4",key:"kode_bs4"},{title:"No Urut Sampel",dataIndex:"r109",key:"r109"},{title:"Nama KRT",dataIndex:"r110",key:"r110"},{title:"Alamat",dataIndex:"r111",key:"r111"},{title:"Status",dataIndex:"status",key:"status",render:r=>b[r]||e("span",{children:"No Status"})},{title:"Entri",dataIndex:"entri",key:"entri",render:(r,t)=>e(n,{type:"primary",onClick:()=>x.get(`${route("entri.mak.edit",{id:t.id})}`),children:"Entri"})}]}),";"]})]})};A.layout=a=>e(E,{user:a.props.auth.user,header:e("h2",{className:"",children:"Dashboard"}),selectedKey:"entri",children:a});export{A as default};
