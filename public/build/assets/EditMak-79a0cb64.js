import{e as Ue,r as s,C as ae,f as H,h as bt,o as ze,_ as it,i as kt,a as t,j as u,c as G,F as ee,b as yt,g as Ge}from"./app-e494dc4b.js";import{D as ft,A as St}from"./AuthenticatedLayout-a355e1e8.js";import{_ as de,M as We,A as _t,S as $t,B as At}from"./Blok1_2-b8f322e7.js";import{F as V}from"./index-097880b6.js";import{I as Re}from"./index-871de327.js";import{T as z}from"./TextRupiah-d0ab8c0e.js";import{K as ie,g as Je,i as rt,c as lt,I as ne,B as se}from"./index-87422963.js";import{S as j}from"./index-00456188.js";import{T as ue}from"./index-f6b3e024.js";import{g as st,m as ct,A as dt}from"./AntdIcon-301051ec.js";import{m as be}from"./index-d1ea5eeb.js";import{T as Ce}from"./index-bb09d941.js";import{l as Nt}from"./lodash-d794452e.js";import{S as ut,T as je}from"./Table-ba68105f.js";import{P as Ct,R as vt}from"./ReloadOutlined-b5629531.js";import{M as Rt}from"./Modal-966ec28f.js";import"./Sider-237ace22.js";import"./index-f43b9175.js";import"./KeyCode-5df951c8.js";import"./index-03a19f9b.js";import"./index-6e81a2b3.js";import"./addEventListener-e9230ed4.js";import"./index-b1caa286.js";import"./index-50d2099a.js";const xt=new ie("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),wt=new ie("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),Et=new ie("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),It=new ie("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),Ot=new ie("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),Tt=new ie("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),Bt=e=>{const{componentCls:n,iconCls:i,antCls:a,badgeFontHeight:o,badgeShadowSize:l,badgeHeightSm:d,motionDurationSlow:c,badgeStatusSize:r,marginXS:p,badgeRibbonOffset:g}=e,b=`${a}-scroll-number`,k=`${a}-ribbon`,$=`${a}-ribbon-wrapper`,y=Je(e,(S,m)=>{let{darkColor:h}=m;return{[`${n}-color-${S}`]:{background:h}}}),I=Je(e,(S,m)=>{let{darkColor:h}=m;return{[`&${k}-color-${S}`]:{background:h,color:h}}});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},Ue(e)),{position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${n}-count`]:{zIndex:e.badgeZIndex,minWidth:e.badgeHeight,height:e.badgeHeight,color:e.badgeTextColor,fontWeight:e.badgeFontWeight,fontSize:e.badgeFontSize,lineHeight:`${e.badgeHeight}px`,whiteSpace:"nowrap",textAlign:"center",background:e.badgeColor,borderRadius:e.badgeHeight/2,boxShadow:`0 0 0 ${l}px ${e.badgeShadowColor}`,transition:`background ${e.motionDurationMid}`,a:{color:e.badgeTextColor},"a:hover":{color:e.badgeTextColor},"a:hover &":{background:e.badgeColorHover}},[`${n}-count-sm`]:{minWidth:d,height:d,fontSize:e.badgeFontSizeSm,lineHeight:`${d}px`,borderRadius:d/2},[`${n}-multiple-words`]:{padding:`0 ${e.paddingXS}px`},[`${n}-dot`]:{zIndex:e.badgeZIndex,width:e.badgeDotSize,minWidth:e.badgeDotSize,height:e.badgeDotSize,background:e.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${l}px ${e.badgeShadowColor}`},[`${n}-dot${b}`]:{transition:`background ${c}`},[`${n}-count, ${n}-dot, ${b}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`&${i}-spin`]:{animationName:Tt,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${n}-status`]:{lineHeight:"inherit",verticalAlign:"baseline",[`${n}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:r,height:r,verticalAlign:"middle",borderRadius:"50%"},[`${n}-status-success`]:{backgroundColor:e.colorSuccess},[`${n}-status-processing`]:{position:"relative",color:e.colorPrimary,backgroundColor:e.colorPrimary,"&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:l,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:xt,animationDuration:e.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${n}-status-default`]:{backgroundColor:e.colorTextPlaceholder},[`${n}-status-error`]:{backgroundColor:e.colorError},[`${n}-status-warning`]:{backgroundColor:e.colorWarning},[`${n}-status-text`]:{marginInlineStart:p,color:e.colorText,fontSize:e.fontSize}}}),y),{[`${n}-zoom-appear, ${n}-zoom-enter`]:{animationName:wt,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`${n}-zoom-leave`]:{animationName:Et,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack,animationFillMode:"both"},[`&${n}-not-a-wrapper`]:{[`${n}-zoom-appear, ${n}-zoom-enter`]:{animationName:It,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`${n}-zoom-leave`]:{animationName:Ot,animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseOutBack},[`&:not(${n}-status)`]:{verticalAlign:"middle"},[`${b}-custom-component, ${n}-count`]:{transform:"none"},[`${b}-custom-component, ${b}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[`${b}`]:{overflow:"hidden",[`${b}-only`]:{position:"relative",display:"inline-block",height:e.badgeHeight,transition:`all ${e.motionDurationSlow} ${e.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${b}-only-unit`]:{height:e.badgeHeight,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${b}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${n}-count, ${n}-dot, ${b}-custom-component`]:{transform:"translate(-50%, -50%)"}}}),[`${$}`]:{position:"relative"},[`${k}`]:Object.assign(Object.assign(Object.assign(Object.assign({},Ue(e)),{position:"absolute",top:p,padding:`0 ${e.paddingXS}px`,color:e.colorPrimary,lineHeight:`${o}px`,whiteSpace:"nowrap",backgroundColor:e.colorPrimary,borderRadius:e.borderRadiusSM,[`${k}-text`]:{color:e.colorTextLightSolid},[`${k}-corner`]:{position:"absolute",top:"100%",width:g,height:g,color:"currentcolor",border:`${g/2}px solid`,transform:e.badgeRibbonCornerTransform,transformOrigin:"top",filter:e.badgeRibbonCornerFilter}}),I),{[`&${k}-placement-end`]:{insetInlineEnd:-g,borderEndEndRadius:0,[`${k}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${k}-placement-start`]:{insetInlineStart:-g,borderEndStartRadius:0,[`${k}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}})}},mt=st("Badge",e=>{const{fontSize:n,lineHeight:i,fontSizeSM:a,lineWidth:o,marginXS:l,colorBorderBg:d}=e,c=Math.round(n*i),r=o,p="auto",g=c-2*r,b=e.colorBgContainer,k="normal",$=a,y=e.colorError,I=e.colorErrorHover,S=n,m=a/2,h=a,_=a/2,O=ct(e,{badgeFontHeight:c,badgeShadowSize:r,badgeZIndex:p,badgeHeight:g,badgeTextColor:b,badgeFontWeight:k,badgeFontSize:$,badgeColor:y,badgeColorHover:I,badgeShadowColor:d,badgeHeightSm:S,badgeDotSize:m,badgeFontSizeSm:h,badgeStatusSize:_,badgeProcessingDuration:"1.2s",badgeRibbonOffset:l,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"});return[Bt(O)]}),jt=e=>{let{className:n,prefixCls:i,style:a,color:o,children:l,text:d,placement:c="end"}=e;const{getPrefixCls:r,direction:p}=s.useContext(ae),g=r("ribbon",i),b=rt(o,!1),k=H(g,`${g}-placement-${c}`,{[`${g}-rtl`]:p==="rtl",[`${g}-color-${o}`]:b},n),[$,y]=mt(g),I={},S={};return o&&!b&&(I.background=o,S.color=o),$(s.createElement("div",{className:H(`${g}-wrapper`,y)},l,s.createElement("div",{className:H(k,y),style:Object.assign(Object.assign({},I),a)},s.createElement("span",{className:`${g}-text`},d),s.createElement("div",{className:`${g}-corner`,style:S}))))},Kt=jt;function qe(e){let{prefixCls:n,value:i,current:a,offset:o=0}=e,l;return o&&(l={position:"absolute",top:`${o}00%`,left:0}),s.createElement("span",{style:l,className:H(`${n}-only-unit`,{current:a})},i)}function Pt(e,n,i){let a=e,o=0;for(;(a+10)%10!==n;)a+=i,o+=i;return o}function Mt(e){const{prefixCls:n,count:i,value:a}=e,o=Number(a),l=Math.abs(i),[d,c]=s.useState(o),[r,p]=s.useState(l),g=()=>{c(o),p(l)};s.useEffect(()=>{const $=setTimeout(()=>{g()},1e3);return()=>{clearTimeout($)}},[o]);let b,k;if(d===o||Number.isNaN(o)||Number.isNaN(d))b=[s.createElement(qe,Object.assign({},e,{key:o,current:!0}))],k={transition:"none"};else{b=[];const $=o+10,y=[];for(let m=o;m<=$;m+=1)y.push(m);const I=y.findIndex(m=>m%10===d);b=y.map((m,h)=>{const _=m%10;return s.createElement(qe,Object.assign({},e,{key:m,value:_,offset:h-I,current:h===I}))});const S=r<l?1:-1;k={transform:`translateY(${-Pt(d,o,S)}00%)`}}return s.createElement("span",{className:`${n}-only`,style:k,onTransitionEnd:g},b)}var Vt=globalThis&&globalThis.__rest||function(e,n){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(i[a[o]]=e[a[o]]);return i};const Ft=s.forwardRef((e,n)=>{var{prefixCls:i,count:a,className:o,motionClassName:l,style:d,title:c,show:r,component:p="sup",children:g}=e,b=Vt(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]);const{getPrefixCls:k}=s.useContext(ae),$=k("scroll-number",i),y=Object.assign(Object.assign({},b),{"data-show":r,style:d,className:H($,o,l),title:c});let I=a;if(a&&Number(a)%1===0){const S=String(a).split("");I=S.map((m,h)=>s.createElement(Mt,{prefixCls:$,count:Number(a),value:m,key:S.length-h}))}return d&&d.borderColor&&(y.style=Object.assign(Object.assign({},d),{boxShadow:`0 0 0 1px ${d.borderColor} inset`})),g?lt(g,S=>({className:H(`${$}-custom-component`,S==null?void 0:S.className,l)})):s.createElement(p,Object.assign({},y,{ref:n}),I)}),Ht=Ft;var Dt=globalThis&&globalThis.__rest||function(e,n){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)n.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(i[a[o]]=e[a[o]]);return i};const Lt=(e,n)=>{const{prefixCls:i,scrollNumberPrefixCls:a,children:o,status:l,text:d,color:c,count:r=null,overflowCount:p=99,dot:g=!1,size:b="default",title:k,offset:$,style:y,className:I,rootClassName:S,showZero:m=!1}=e,h=Dt(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","rootClassName","showZero"]),{getPrefixCls:_,direction:O}=s.useContext(ae),N=_("badge",i),[K,L]=mt(N),C=r>p?`${p}+`:r,f=C==="0"||C===0,v=r===null||f&&!m,P=(l!=null||c!=null)&&v,D=g&&!f,R=D?"":C,F=s.useMemo(()=>(R==null||R===""||f&&!m)&&!D,[R,f,m,D]),q=s.useRef(r);F||(q.current=r);const Y=q.current,ke=s.useRef(R);F||(ke.current=R);const oe=ke.current,ye=s.useRef(D);F||(ye.current=D);const re=s.useMemo(()=>{if(!$)return Object.assign({},y);const Z={marginTop:$[1]};return O==="rtl"?Z.left=parseInt($[0],10):Z.right=-parseInt($[0],10),Object.assign(Object.assign({},Z),y)},[O,$,y]),Ee=k??(typeof Y=="string"||typeof Y=="number"?Y:void 0),fe=F||!d?null:s.createElement("span",{className:`${N}-status-text`},d),Ie=!Y||typeof Y!="object"?void 0:lt(Y,Z=>({style:Object.assign(Object.assign({},re),Z.style)})),le=rt(c,!1),Oe=H({[`${N}-status-dot`]:P,[`${N}-status-${l}`]:!!l,[`${N}-color-${c}`]:le}),Se={};c&&!le&&(Se.color=c,Se.background=c);const _e=H(N,{[`${N}-status`]:P,[`${N}-not-a-wrapper`]:!o,[`${N}-rtl`]:O==="rtl"},I,S,L);if(!o&&P){const Z=re.color;return K(s.createElement("span",Object.assign({},h,{className:_e,style:re}),s.createElement("span",{className:Oe,style:Se}),d&&s.createElement("span",{style:{color:Z},className:`${N}-status-text`},d)))}return K(s.createElement("span",Object.assign({ref:n},h,{className:_e}),o,s.createElement(bt,{visible:!F,motionName:`${N}-zoom`,motionAppear:!1,motionDeadline:1e3},Z=>{let{className:$e,ref:Te}=Z;const Be=_("scroll-number",a),x=ye.current,E=H({[`${N}-dot`]:x,[`${N}-count`]:!x,[`${N}-count-sm`]:b==="small",[`${N}-multiple-words`]:!x&&oe&&oe.toString().length>1,[`${N}-status-${l}`]:!!l,[`${N}-color-${c}`]:le});let w=Object.assign({},re);return c&&!le&&(w=w||{},w.background=c),s.createElement(Ht,{prefixCls:Be,show:!F,motionClassName:$e,className:E,count:oe,title:Ee,style:w,key:"scrollNumber",ref:Te},Ie)}),fe))},pt=s.forwardRef(Lt);pt.Ribbon=Kt;const Ke=pt,zt=e=>{const{prefixCls:n,className:i,style:a,size:o,shape:l}=e,d=H({[`${n}-lg`]:o==="large",[`${n}-sm`]:o==="small"}),c=H({[`${n}-circle`]:l==="circle",[`${n}-square`]:l==="square",[`${n}-round`]:l==="round"}),r=s.useMemo(()=>typeof o=="number"?{width:o,height:o,lineHeight:`${o}px`}:{},[o]);return s.createElement("span",{className:H(n,d,c,i),style:Object.assign(Object.assign({},r),a)})},xe=zt,Ut=new ie("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),we=e=>({height:e,lineHeight:`${e}px`}),ce=e=>Object.assign({width:e},we(e)),Gt=e=>({background:e.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:Ut,animationDuration:e.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),Pe=e=>Object.assign({width:e*5,minWidth:e*5},we(e)),Wt=e=>{const{skeletonAvatarCls:n,gradientFromColor:i,controlHeight:a,controlHeightLG:o,controlHeightSM:l}=e;return{[`${n}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:i},ce(a)),[`${n}${n}-circle`]:{borderRadius:"50%"},[`${n}${n}-lg`]:Object.assign({},ce(o)),[`${n}${n}-sm`]:Object.assign({},ce(l))}},Jt=e=>{const{controlHeight:n,borderRadiusSM:i,skeletonInputCls:a,controlHeightLG:o,controlHeightSM:l,gradientFromColor:d}=e;return{[`${a}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:d,borderRadius:i},Pe(n)),[`${a}-lg`]:Object.assign({},Pe(o)),[`${a}-sm`]:Object.assign({},Pe(l))}},Ye=e=>Object.assign({width:e},we(e)),qt=e=>{const{skeletonImageCls:n,imageSizeBase:i,gradientFromColor:a,borderRadiusSM:o}=e;return{[`${n}`]:Object.assign(Object.assign({display:"flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",background:a,borderRadius:o},Ye(i*2)),{[`${n}-path`]:{fill:"#bfbfbf"},[`${n}-svg`]:Object.assign(Object.assign({},Ye(i)),{maxWidth:i*4,maxHeight:i*4}),[`${n}-svg${n}-svg-circle`]:{borderRadius:"50%"}}),[`${n}${n}-circle`]:{borderRadius:"50%"}}},Me=(e,n,i)=>{const{skeletonButtonCls:a}=e;return{[`${i}${a}-circle`]:{width:n,minWidth:n,borderRadius:"50%"},[`${i}${a}-round`]:{borderRadius:n}}},Ve=e=>Object.assign({width:e*2,minWidth:e*2},we(e)),Yt=e=>{const{borderRadiusSM:n,skeletonButtonCls:i,controlHeight:a,controlHeightLG:o,controlHeightSM:l,gradientFromColor:d}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[`${i}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:d,borderRadius:n,width:a*2,minWidth:a*2},Ve(a))},Me(e,a,i)),{[`${i}-lg`]:Object.assign({},Ve(o))}),Me(e,o,`${i}-lg`)),{[`${i}-sm`]:Object.assign({},Ve(l))}),Me(e,l,`${i}-sm`))},Zt=e=>{const{componentCls:n,skeletonAvatarCls:i,skeletonTitleCls:a,skeletonParagraphCls:o,skeletonButtonCls:l,skeletonInputCls:d,skeletonImageCls:c,controlHeight:r,controlHeightLG:p,controlHeightSM:g,gradientFromColor:b,padding:k,marginSM:$,borderRadius:y,titleHeight:I,blockRadius:S,paragraphLiHeight:m,controlHeightXS:h,paragraphMarginTop:_}=e;return{[`${n}`]:{display:"table",width:"100%",[`${n}-header`]:{display:"table-cell",paddingInlineEnd:k,verticalAlign:"top",[`${i}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:b},ce(r)),[`${i}-circle`]:{borderRadius:"50%"},[`${i}-lg`]:Object.assign({},ce(p)),[`${i}-sm`]:Object.assign({},ce(g))},[`${n}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[`${a}`]:{width:"100%",height:I,background:b,borderRadius:S,[`+ ${o}`]:{marginBlockStart:g}},[`${o}`]:{padding:0,"> li":{width:"100%",height:m,listStyle:"none",background:b,borderRadius:S,"+ li":{marginBlockStart:h}}},[`${o}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${n}-content`]:{[`${a}, ${o} > li`]:{borderRadius:y}}},[`${n}-with-avatar ${n}-content`]:{[`${a}`]:{marginBlockStart:$,[`+ ${o}`]:{marginBlockStart:_}}},[`${n}${n}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},Yt(e)),Wt(e)),Jt(e)),qt(e)),[`${n}${n}-block`]:{width:"100%",[`${l}`]:{width:"100%"},[`${d}`]:{width:"100%"}},[`${n}${n}-active`]:{[`
        ${a},
        ${o} > li,
        ${i},
        ${l},
        ${d},
        ${c}
      `]:Object.assign({},Gt(e))}}},me=st("Skeleton",e=>{const{componentCls:n}=e,i=ct(e,{skeletonAvatarCls:`${n}-avatar`,skeletonTitleCls:`${n}-title`,skeletonParagraphCls:`${n}-paragraph`,skeletonButtonCls:`${n}-button`,skeletonInputCls:`${n}-input`,skeletonImageCls:`${n}-image`,imageSizeBase:e.controlHeight*1.5,borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${e.gradientFromColor} 25%, ${e.gradientToColor} 37%, ${e.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[Zt(i)]},e=>{const{colorFillContent:n,colorFill:i}=e,a=n,o=i;return{color:a,colorGradientEnd:o,gradientFromColor:a,gradientToColor:o,titleHeight:e.controlHeight/2,blockRadius:e.borderRadiusSM,paragraphMarginTop:e.marginLG+e.marginXXS,paragraphLiHeight:e.controlHeight/2}},{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),Xt=e=>{const{prefixCls:n,className:i,rootClassName:a,active:o,shape:l="circle",size:d="default"}=e,{getPrefixCls:c}=s.useContext(ae),r=c("skeleton",n),[p,g]=me(r),b=ze(e,["prefixCls","className"]),k=H(r,`${r}-element`,{[`${r}-active`]:o},i,a,g);return p(s.createElement("div",{className:k},s.createElement(xe,Object.assign({prefixCls:`${r}-avatar`,shape:l,size:d},b))))},Qt=Xt,en=e=>{const{prefixCls:n,className:i,rootClassName:a,active:o,block:l=!1,size:d="default"}=e,{getPrefixCls:c}=s.useContext(ae),r=c("skeleton",n),[p,g]=me(r),b=ze(e,["prefixCls"]),k=H(r,`${r}-element`,{[`${r}-active`]:o,[`${r}-block`]:l},i,a,g);return p(s.createElement("div",{className:k},s.createElement(xe,Object.assign({prefixCls:`${r}-button`,size:d},b))))},tn=en;var nn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM288 604a64 64 0 10128 0 64 64 0 10-128 0zm118-224a48 48 0 1096 0 48 48 0 10-96 0zm158 228a96 96 0 10192 0 96 96 0 10-192 0zm148-314a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"dot-chart",theme:"outlined"};const an=nn;var on=function(n,i){return s.createElement(dt,it({},n,{ref:i,icon:an}))};const rn=s.forwardRef(on),ln=e=>{const{prefixCls:n,className:i,rootClassName:a,style:o,active:l,children:d}=e,{getPrefixCls:c}=s.useContext(ae),r=c("skeleton",n),[p,g]=me(r),b=H(r,`${r}-element`,{[`${r}-active`]:l},g,i,a),k=d??s.createElement(rn,null);return p(s.createElement("div",{className:b},s.createElement("div",{className:H(`${r}-image`,i),style:o},k)))},sn=ln,cn="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",dn=e=>{const{prefixCls:n,className:i,rootClassName:a,style:o,active:l}=e,{getPrefixCls:d}=s.useContext(ae),c=d("skeleton",n),[r,p]=me(c),g=H(c,`${c}-element`,{[`${c}-active`]:l},i,a,p);return r(s.createElement("div",{className:g},s.createElement("div",{className:H(`${c}-image`,i),style:o},s.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${c}-image-svg`},s.createElement("path",{d:cn,className:`${c}-image-path`})))))},un=dn,mn=e=>{const{prefixCls:n,className:i,rootClassName:a,active:o,block:l,size:d="default"}=e,{getPrefixCls:c}=s.useContext(ae),r=c("skeleton",n),[p,g]=me(r),b=ze(e,["prefixCls"]),k=H(r,`${r}-element`,{[`${r}-active`]:o,[`${r}-block`]:l},i,a,g);return p(s.createElement("div",{className:k},s.createElement(xe,Object.assign({prefixCls:`${r}-input`,size:d},b))))},pn=mn,hn=e=>{const n=c=>{const{width:r,rows:p=2}=e;if(Array.isArray(r))return r[c];if(p-1===c)return r},{prefixCls:i,className:a,style:o,rows:l}=e,d=kt(Array(l)).map((c,r)=>s.createElement("li",{key:r,style:{width:n(r)}}));return s.createElement("ul",{className:H(i,a),style:o},d)},gn=hn,bn=e=>{let{prefixCls:n,className:i,width:a,style:o}=e;return s.createElement("h3",{className:H(n,i),style:Object.assign({width:a},o)})},kn=bn;function Fe(e){return e&&typeof e=="object"?e:{}}function yn(e,n){return e&&!n?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function fn(e,n){return!e&&n?{width:"38%"}:e&&n?{width:"50%"}:{}}function Sn(e,n){const i={};return(!e||!n)&&(i.width="61%"),!e&&n?i.rows=3:i.rows=2,i}const pe=e=>{const{prefixCls:n,loading:i,className:a,rootClassName:o,style:l,children:d,avatar:c=!1,title:r=!0,paragraph:p=!0,active:g,round:b}=e,{getPrefixCls:k,direction:$}=s.useContext(ae),y=k("skeleton",n),[I,S]=me(y);if(i||!("loading"in e)){const m=!!c,h=!!r,_=!!p;let O;if(m){const L=Object.assign(Object.assign({prefixCls:`${y}-avatar`},yn(h,_)),Fe(c));O=s.createElement("div",{className:`${y}-header`},s.createElement(xe,Object.assign({},L)))}let N;if(h||_){let L;if(h){const f=Object.assign(Object.assign({prefixCls:`${y}-title`},fn(m,_)),Fe(r));L=s.createElement(kn,Object.assign({},f))}let C;if(_){const f=Object.assign(Object.assign({prefixCls:`${y}-paragraph`},Sn(m,h)),Fe(p));C=s.createElement(gn,Object.assign({},f))}N=s.createElement("div",{className:`${y}-content`},L,C)}const K=H(y,{[`${y}-with-avatar`]:m,[`${y}-active`]:g,[`${y}-rtl`]:$==="rtl",[`${y}-round`]:b},a,o,S);return I(s.createElement("div",{className:K,style:l},O,N))}return typeof d<"u"?d:null};pe.Button=tn;pe.Avatar=Qt;pe.Input=pn;pe.Image=un;pe.Node=sn;const _n=pe;var $n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar",theme:"outlined"};const An=$n;var Nn=function(n,i){return s.createElement(dt,it({},n,{ref:i,icon:An}))};const Cn=s.forwardRef(Nn),U=({inputName:e,onChange:n,initialValue:i,editable:a})=>{const[o,l]=s.useState(0),d=r=>{r=parseInt(r),l(r)},c=de(r=>{d(r),n&&n(r)},600);return t(V.Item,{name:e,initialValue:i?Math.round(Number(i)):0,style:{marginBottom:"4px"},children:t(Re,{className:"custom-input-number",readOnly:a||!1,style:{width:"100%",textAlign:"right"},min:0,max:1e9,formatter:r=>`Rp ${r}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:r=>{if(!r)return;const p=Math.round(r.replace(/[^\d]/g,""));return isNaN(p)?void 0:p},value:o,onChange:r=>{c(r)}})})},Ne=({inputName:e,onChange:n,initialValue:i,editable:a})=>{const[o,l]=s.useState(0),d=r=>{l(r)},c=de(r=>{d(r),n&&n(r)},600);return t(V.Item,{name:e,initialValue:i??void 0,style:{marginBottom:"4px"},children:t(Re,{className:"custom-input-number",readOnly:a||!1,min:0,step:.01,formatter:r=>`${r}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:r=>{if(!r)return;const p=parseFloat(r.replace(/[^\d.]/g,""));return isNaN(p)?0:p},value:o,onChange:r=>{c(r)}})})},Ze={backgroundColor:"#fc0",fontWeight:"700",padding:"5px"},he={borderStyle:"solid",border:"solid 1px black",padding:"5px"},Xe={borderStyle:"solid",border:"solid 1px black",textAlign:"center",padding:"5px"},He={borderStyle:"solid",border:"solid 1px black",textAlign:"right",padding:"5px"},De={borderStyle:"solid",border:"solid 1px black",backgroundColor:"#636f83",padding:"5px"},vn=({data:e,form:n,subKey:i,rekapMak:a,calculate:o})=>{const[l,d]=s.useState(0);return s.useEffect(()=>{const c=parseFloat(n.getFieldValue(`${e.nomor}_beli_harga`)||0),r=parseFloat(n.getFieldValue(`${e.nomor}_produksi_harga`)||0),p=c+r;d(p)},[n,e.nomor]),u("tr",{style:{backgroundColor:e.flagBasket?"#ffffcc":""},children:[t("td",{style:{...Xe,width:"55px"},children:e.nomor}),t("td",{style:{...he,width:"130px"},children:e.kode_coicop}),u("td",{colSpan:1,style:e.type==="sub"?Ze:he,children:[e.rincian,e.type==="lain"&&t(V.Item,{name:`${e.nomor}_item`,children:t(ne,{placeholder:"Sebutkan"})})]}),t("td",{colSpan:1,style:{...e.type==="sub"?Ze:Xe},children:e.type==="lain"?t(V.Item,{name:`${e.nomor}_satuan`,children:t(ne,{placeholder:"Sebutkan"})}):e.satuan}),t("td",{style:e.type==="sub"?De:he,children:e.type==="sub"||t(Ne,{inputName:`${e.nomor}_beli_volume`})}),u("td",{style:{...He,width:"150px"},children:[t(U,{inputName:`${e.type==="sub"?"jumlah":""}${e.nomor}_beli_harga${e.subKey}`,onChange:c=>{n.setFieldsValue({[`${e.nomor}_beli_harga`]:c}),d(parseFloat(c||0)+parseFloat(n.getFieldValue(`${e.nomor}_produksi_harga`)||0)),e.type}}),e.type==="sub"&&t(z,{color:"red",value:a[e.subKey]?a[e.subKey].beli??0:0})]}),t("td",{style:e.type==="sub"?De:he,children:e.type==="sub"||t(Ne,{inputName:`${e.nomor}_produksi_volume`})}),u("td",{style:He,children:[t(U,{inputName:`${e.type==="sub"?"jumlah":""}${e.nomor}_produksi_harga${e.subKey}`,onChange:c=>{n.setFieldsValue({[`${e.nomor}_produksi_harga`]:c}),d(parseFloat(c||0)+parseFloat(n.getFieldValue(`${e.nomor}_beli_harga`)||0)),e.type}}),e.type==="sub"&&t(z,{color:"red",value:a[e.subKey].produksi??0})]}),t("td",{style:e.type==="sub"?De:he,children:e.type==="sub"||t(Ne,{inputName:`${e.nomor}_total_volume`})}),u("td",{style:He,children:[t(U,{inputName:`${e.nomor}_total_harga`}),t(z,{color:"red",value:e.type==="sub"?a[e.subKey].produksi+a[e.subKey].beli:l})]})]})},{Text:ka,Title:Rn}=ue,xn={borderCollapse:"collapse",width:"100%"},J={borderStyle:"solid",border:"solid 1px black",padding:"5px"},te={borderStyle:"solid",border:"solid 1px black",textAlign:"center",padding:"5px"},ht=({title:e,konten:n,rekapMak:i,calculate:a,form:o})=>(e="BLOK IV.1. KONSUMSI DAN PENGELUARAN BAHAN MAKANAN, BAHAN MINUMAN, DAN ROKOK SEMINGGU TERAKHIR",u("table",{style:xn,children:[u("thead",{children:[t("tr",{style:{backgroundColor:"#fc0",textAlign:"center"},children:t("th",{style:J,colSpan:10,children:t(j,{direction:"vertical",style:{padding:"25px"},children:t(Rn,{level:4,children:e})})})}),u("tr",{children:[t("th",{style:J,rowSpan:2,children:"No Urut"}),t("th",{style:J,rowSpan:2,children:"Kode COICOP"}),t("th",{style:J,rowSpan:2,children:"Rincian"}),t("th",{style:J,rowSpan:2,children:"Satuan standar"}),t("th",{style:J,colSpan:2,children:"Berasal dari pembelian (tunai/bon)"}),t("th",{style:J,colSpan:2,children:"Berasal dari produksi sendiri, pemberian, dsb"}),t("th",{style:J,colSpan:2,children:"Jumlah konsumsi"})]}),u("tr",{children:[t("th",{style:J,children:"Banyaknya (0,00)"}),t("th",{style:J,children:"Nilai (Rp)"}),t("th",{style:J,children:"Banyaknya (0,00)"}),t("th",{style:J,children:"Nilai (Rp)"}),t("th",{style:J,children:"Banyaknya (5) + (7) (0,00)"}),t("th",{style:J,children:"Nilai (6) + (8) (Rp)"})]})]}),u("tbody",{children:[u("tr",{children:[t("td",{width:"55px",style:te,children:"(1)"}),t("td",{width:"130px",style:te,children:"(2)"}),t("td",{style:te,children:"(3)"}),t("td",{width:"80px",style:te,children:"(4)"}),t("td",{width:"100px",style:te,children:"(5)"}),t("td",{style:te,children:"(6)"}),t("td",{width:"100px",style:te,children:"(7)"}),t("td",{style:te,children:"(8)"}),t("td",{width:"100px",style:te,children:"(9)"}),t("td",{style:te,children:"(10)"})]}),n.map((l,d)=>t(vn,{data:l,form:o,rekapMak:i,calculate:a},d))]})]})),{Text:wn,Title:ya}=ue,ge=({form:e,rekapMak:n,calculate:i,from:a,to:o,hal:l})=>{const[d,c]=s.useState([]),[r,p]=s.useState(!0);s.useEffect(()=>{(async(k,$)=>{const{data:y}=await G.get(route("api.mak.komoditas.list",{from:k,to:$})),I=y.map(S=>({nomor:S.id,kode_coicop:S.kode_coicop,rincian:S.nama_komoditas,satuan:S.satuan,type:S.type,subKey:S.id_kelompok,flagBasket:S.flag_basket}));c([...I]),p(!1)})(a,o)},[]);const g="BLOK IV.1. KONSUMSI DAN PENGELUARAN BAHAN MAKANAN & MINUMAN SEMINGGU TERAKHIR";return u(j,{direction:"vertical",style:{width:"100%"},children:[u(j,{style:{width:"100%",justifyContent:"end"},direction:"horizontal",children:[t(wn,{children:"Jumlah komoditas bahan makanan dan bahan minuman terisi pada halaman ini"}),t(Ne,{inputName:`hal${l}_jml_komoditas`})]}),t(ht,{form:e,konten:r?[]:d,title:g,rekapMak:n,calculate:i}),r&&t(_n,{active:!0,paragraph:{rows:10}})]})},En=({form:e,onFinish:n,tabContentStyle:i,subTotalHarga:a,calculate:o,rekapMak:l})=>{be.useMessage();function d(c){}return s.useEffect(()=>{},[]),u(V,{form:e,name:"Blok4_1_hal2",onFinish:n,autoComplete:"off",layout:"vertical",onValuesChange:de(o,600),children:[t(V.Item,{name:"id_ruta",hidden:!0,children:t(ne,{placeholder:"id rt"})}),t(Ce,{onChange:d,type:"line",style:{backgroundColor:"#fff",padding:"10px"},items:[{label:"Hal 2",key:"1",children:t(ge,{from:1,to:34,hal:2,form:e,calculate:o,rekapMak:l})},{label:"Hal 4",key:"2",children:t(ge,{from:35,hal:4,to:62,form:e,calculate:o,rekapMak:l})},{label:"Hal 6",key:"3",children:t(ge,{from:63,to:94,hal:6,form:e,calculate:o,rekapMak:l})},{label:"Hal 8",key:"4",children:t(ge,{from:95,to:127,hal:8,form:e,calculate:o,rekapMak:l})},{label:"Blok 10",key:"5",children:t(ge,{from:128,to:158,hal:10,form:e,calculate:o,rekapMak:l})}]})]})},{Text:In,Title:fa}=ue,Qe=({onFinish:e,nomor_art:n,setDaftarArt:i,daftarArt:a,id_ruta:o,id_art:l,calculateKalori:d,konten:c,art:r})=>{const[p]=V.useForm(),[g,b]=s.useState(!0),k=async h=>{try{const _=route("entri.mak.konsumsi_art.store"),{data:O}=await G.patch(_,h,{headers:{"Content-Type":"application/json"}})}catch(_){console.log("error",{error:_})}},$=({subKey:h,jenis:_})=>{const O=`${_}_harga${h}`,N=p.getFieldsValue(),K=Object.entries(N).filter(([f])=>f.endsWith(O)).reduce((f,[,v])=>f+(v||0),0),C=[...a].map(f=>{let v={...f.rekap};return v[h][_]=K,f.id===l?{...f,rekap:v}:f});i(C)},y=de(()=>{const h="beli_harga12",_="beli_harga13",O="produksi_harga12",N="produksi_harga13",K=p.getFieldsValue(),L=Object.entries(K).filter(([R])=>R.endsWith(h)&&!R.includes("jumlah")).reduce((R,[,F])=>R+(F||0),0),C=Object.entries(K).filter(([R])=>R.endsWith(_)&&!R.includes("jumlah")).reduce((R,[,F])=>R+(F||0),0),f=Object.entries(K).filter(([R])=>R.endsWith(O)&&!R.includes("jumlah")).reduce((R,[,F])=>R+(F||0),0),v=Object.entries(K).filter(([R])=>R.endsWith(N)&&!R.includes("jumlah")).reduce((R,[,F])=>R+(F||0),0);let P=[...a];const D=P.map(R=>{let F={...R.rekap};return F[12]={beli:L,produksi:f,total:L+f},F[13]={beli:C,produksi:v,total:C+v},R.id===l?{...R,rekap:F}:R});console.log({newDaftarArt:P}),i(D)},600),I=de(()=>p.submit(),3e3),S=h=>{y(),I(),d(p.getFieldsValue()).then(_=>{let O=[...a];O[n].kalori=_})};s.useEffect(()=>{(async _=>{b(!0);const{data:O}=await G.get(route("api.mak.konsumsi.art",{id_art:_})),N=[159,192],L=O.map(C=>({[`${N.includes(C.id_komoditas)?"jumlah":""}${C.id_komoditas}_beli_harga${C.id_kelompok}`]:C.harga_beli,[`${N.includes(C.id_komoditas)?"jumlah":""}${C.id_komoditas}_produksi_harga${C.id_kelompok}`]:C.harga_produksi,[`${C.id_komoditas}_total_harga`]:C.harga_total,[`${C.id_komoditas}_item`]:C.item,[`${C.id_komoditas}_satuan`]:C.satuan,[`${C.id_komoditas}_beli_volume`]:C.volume_beli,[`${C.id_komoditas}_produksi_volume`]:C.volume_produksi,[`${C.id_komoditas}_total_volume`]:C.volume_total})).reduce((C,f)=>{for(const v in f)f.hasOwnProperty(v)&&(C[v]=f[v]);return C},{});L[`blok4_31_${n}_id_art`]=_,p.setFieldsValue(L)})(l),b(!0)},[l]),s.useEffect(()=>{p.setFieldsValue({id_ruta:o,id_art:l}),d(p.getFieldsValue()).then(h=>{let _=[...a];_[n].kalori=h})},[p]);const m="BLOK IV.1. KONSUMSI DAN PENGELUARAN BAHAN MAKANAN, BAHAN MINUMAN, DAN ROKOK SEMINGGU TERAKHIR";return t(j,{direction:"vertical",style:{width:"100%"},children:u(V,{form:p,name:"Art",onFinish:k,autoComplete:"off",layout:"vertical",onValuesChange:S,children:[u(j,{style:{width:"100%",justifyContent:"end"},direction:"horizontal",children:[t(In,{children:"Jumlah komoditas bahan makanan,bahan minuman, dan rokok yang terisi pada halaman ini"}),t(V.Item,{style:{margin:"auto"},name:"id_ruta",hidden:!0,children:t(ne,{readOnly:!0})}),t(V.Item,{style:{margin:"auto"},name:"id_art",hidden:!0,children:t(ne,{readOnly:!0})})]}),t(ht,{form:p,konten:c,title:m,calculate:$,rekapMak:r.rekap})]})})},{Text:On,Title:Tn}=ue,Bn={borderCollapse:"collapse",width:"100%",backgroundColor:"#fff"},et={borderStyle:"solid",border:"solid 1px black",padding:"5px"},jn={borderStyle:"solid",border:"solid 1px black",textAlign:"center",padding:"5px"},ve=({title:e,subtitle:n,columnsCount:i,columns:a,children:o})=>u("table",{style:Bn,children:[t("thead",{style:{backgroundColor:"#fc0",textAlign:"center"},children:t("tr",{children:t("td",{colSpan:i,style:et,children:u(j,{direction:"vertical",children:[t(Tn,{level:4,children:e}),t(On,{children:n})]})})})}),u("tbody",{children:[a&&u(ee,{children:[t("tr",{children:a.map(l=>t("th",{style:et,children:l}))}),t("tr",{children:Array.from(Array(i).keys()).map(l=>u("td",{style:jn,children:["(",l+1,")"]}))})]}),o]})]}),Le={borderStyle:"solid",border:"solid 1px black",margin:"auto",textAlign:"center",padding:"5px"},Kn=({artForm:e,artFormFinish:n,tabContentStyle:i,daftarArt:a,setDaftarArt:o,calculateKalori:l})=>{const d=f=>{},[c,r]=s.useState("0"),[p,g]=s.useState([]),[b,k]=s.useState([]),[$,y]=s.useState(!1),[I,S]=s.useState(!1),m=s.useRef(1),[h,_]=be.useMessage(),O=async()=>{S(!0);const f=`Art-${m.current++}`;try{const{data:v}=await G.post(route("entri.mak.art.store"),{nama:f,nomor_art:a.length+1,id_ruta:a[0].id_ruta}),P=[...a,{id:v.id,id_ruta:v.id_ruta,nomor_art:m.current++,nama:f,key:f,rekap:{12:{produksi:0,beli:0,total:0},13:{produksi:0,beli:0,total:0}}}];o([...P]),r(f)}catch(v){console.error("Error in add function:",v)}finally{S(!1)}},N=async f=>{const v=e.getFieldValue(`${f}-id_art`);if(f===0){h.open({content:"anggota ruta pertama tidak boleh dihapus,",type:"warning",key:v,duration:3});return}try{const{data:P}=await G.delete(route("entri.mak.art.delete",{id_art:v})),D=a.filter(R=>R.id!==v);o(D),h.open({content:"Berhasil menghapus 1 anggota rumah tangga",type:"success",key:v})}catch(P){console.error("Error in add function:",P),h.open({content:`Terjadi galat ketika menghapus data, tunjukan code ini pada Developer (${P})`,type:"error",key:v,duration:3})}},L=de((f,v,P)=>{const D=[...a];D[f][v]=P.trim(),o(D)},1e3),C=Nt.throttle(N,2e3);return s.useEffect(()=>{(async(P,D)=>{const{data:R}=await G.get(route("api.mak.komoditas.list",{from:P,to:D})),F=R.map(q=>({nomor:q.id,kode_coicop:q.kode_coicop,rincian:q.nama_komoditas,satuan:q.satuan,type:q.type,subKey:q.id_kelompok,flagBasket:q.flag_basket}));k([...F])})(159,197),y(!1);const v=a.map((P,D)=>({label:P.nama,key:String(D),children:t(Qe,{onFinish:d,nomor_art:P.nomor_art,daftarArt:a,setDaftarArt:o,id_ruta:e.getFieldValue("id_ruta"),art:P,id_art:P.id,calculateKalori:l,konten:b})}));g([...v])},[]),u(j,{direction:"vertical",style:i,children:[_,t(se,{type:"primary",onClick:O,children:"Tambah Art"}),u(V,{name:"artForm",form:e,onFinish:n,children:[t(V.Item,{name:"id_ruta",hidden:!0,children:t(ne,{})}),t(ve,{title:"DAFTAR ANGGOTA RUMAH TANGGA",columns:["Nomor","Nama Anggota Rumah Tangga","aksi"],columnsCount:3,children:I?t("tr",{children:t("td",{colSpan:3,children:u(j,{style:{width:"100%",justifyContent:"center",marginTop:"30px"},direction:"vertical",children:[t(j,{style:{width:"100%",justifyContent:"center"},children:t(ut,{size:"large"})}),t(j,{style:{width:"100%",justifyContent:"center"},children:"Menambahkan anggota rumah tangga..."})]})})}):a.map((f,v)=>u("tr",{children:[t("td",{style:Le,children:v+1}),u("td",{style:Le,children:[t(V.Item,{name:`${v}-id_art`,hidden:!0,children:t(ne,{})}),t(V.Item,{name:`${v}-nama`,style:{margin:"auto"},children:t(ne,{placeholder:"nama anggota rumah tangga",onChange:P=>L(v,"nama",P.target.value)})})]}),t("td",{style:Le,children:t(Ct,{placement:"topLeft",title:"apakah anda yakin akan menghapus art ini?",description:"hapus anggota rumah tangga",okText:"yakin dong",cancelText:"gajadi",onConfirm:()=>C(v),children:t(se,{disabled:v===0,children:"Hapus"})})})]},v))})]}),t(Ce,{style:{backgroundColor:"#fff",padding:"10px"},items:a.map((f,v)=>({label:f.nama,key:String(v),children:t(Qe,{onFinish:d,nomor_art:f.nomor_art,daftarArt:a,setDaftarArt:o,id_ruta:f.id_ruta,art:f,id_art:f.id,calculateKalori:l,konten:b})})),type:"line"})]})},Pn=({form:e,onFinish:n,tabContentStyle:i,rekapMak:a,setRekapMak:o,daftarArt:l,daftarRincian432:d})=>{const c={borderStyle:"solid",border:"solid 1px black",padding:"5px"},r={borderStyle:"solid",border:"solid 1px black",textAlign:"right",padding:"5px"},p={borderStyle:"solid",border:"solid 1px black",textAlign:"center",padding:"5px"},[g,b]=be.useMessage(),k=m=>{let h=[...a];h[16].total=m,h[17].total=h[15].total+h[16].total,o(h)},$=({rincian:m,key:h})=>u("tr",{children:[t("td",{style:p,children:m.nomor}),t("td",{style:c,children:m.rincian}),t("td",{style:r,children:m.id<16&&u(ee,{children:[t(U,{inputName:`blok4_32_${m.id-1}_beli`},h),t(z,{color:"red",value:a[m.id-1].beli},m.id)]})}),t("td",{style:r,children:m.id<16&&u(ee,{children:[t(U,{inputName:`blok4_32_${m.id-1}_produksi`},h),t(z,{color:"red",value:a[m.id-1].produksi},m.id)]})}),t("td",{style:r,children:u(ee,{children:[t(U,{inputName:`blok4_32_${m.id-1}_total`,onChange:h===16?k:void 0},h),t(z,{color:"red",value:a[m.id-1].total},m.id)]})})]}),[y,I]=s.useState({12:{beli:0,produksi:0,total:0},13:{beli:0,produksi:0,total:0}}),S=m=>{let h=m.reduce((_,O)=>(Object.values(O.rekap).forEach((N,K)=>{_[K]=_[K]||{beli:0,produksi:0,total:0},_[K].beli+=N.beli,_[K].produksi+=N.produksi,_[K].total+=N.total}),_),[]);return{12:h[0],13:h[1]}};return s.useEffect(()=>{let m=S(l);(async()=>{var O;const{data:_}=await G.get(route("entri.mak.art.fetch",{id_ruta:(O=l[0])==null?void 0:O.id_ruta}));_.forEach((N,K)=>{e.setFieldValue(`blok4_31_${K}_id_art`,N.id)})})(),I(m),o(_=>{let O=[..._];return O[12]=m[12],O[13]=m[13],O[14]=O.slice(0,14).reduce((N,K)=>({beli:N.beli+K.beli,produksi:N.produksi+K.produksi,total:N.total+K.total}),{beli:0,produksi:0,total:0}),[...O]})},[l]),s.useEffect(()=>{},[]),t(j,{direction:"vertical",style:i,children:u(V,{form:e,name:"Blok4_3",onFinish:n,autoComplete:"off",layout:"vertical",children:[u(ve,{title:"BLOK IV.3.1. REKAPITULASI PENGELUARAN MAKANAN DAN MINUMAN JADI SERTA ROKOK SELURUH ANGGOTA RUMAH TANGGA (DALAM RUPIAH)",subtitle:"",columns:["No.","Nama ART","Makanan dan Minuman Jadi (Pembelian)","Makanan dan Minuman Jadi (Produksi sendiri, Pemberian, dsb)","Rokok dan Tembaku (Pembelian)","Rokok dan Tembaku (Produksi sendiri, Pemberian, dsb)"],columnsCount:6,children:[l.map((m,h)=>u("tr",{children:[t("td",{style:p,children:h+1}),u("td",{style:c,children:[m.nama,t(V.Item,{name:`blok4_31_${h}_id_art`,label:null,initialValue:m.id,hidden:!0,children:t(ne,{readOnly:!0})},`form-item-${h}`)]}),u("td",{style:r,children:[t(U,{inputName:`blok4_31_${h}_mak_beli`,initialValue:m.mak_beli}),t(z,{color:"red",value:m.rekap[12].beli})]}),u("td",{style:r,children:[t(U,{inputName:`blok4_31_${h}_mak_produksi`,initialValue:m.mak_produksi}),t(z,{color:"red",value:m.rekap[12].produksi})]}),u("td",{style:r,children:[t(U,{inputName:`blok4_31_${h}_rokok_beli`,initialValue:m.rokok_beli}),t(z,{color:"red",value:m.rekap[13].beli})]}),u("td",{style:r,children:[t(U,{inputName:`blok4_31_${h}_rokok_produksi`,initialValue:m.rokok_produksi}),t(z,{color:"red",value:m.rekap[13].produksi})]})]})),l.length>0&&u("tr",{children:[t("td",{style:c}),t("td",{style:c,children:"JUMLAH"}),u("td",{style:r,children:[t(U,{inputName:"blok4_31_jumlah_mak_beli"}),t(z,{color:"red",value:y[12].beli})]}),u("td",{style:r,children:[t(U,{inputName:"blok4_31_jumlah_mak_produksi"}),t(z,{color:"red",value:y[12].produksi})]}),u("td",{style:r,children:[t(U,{inputName:"blok4_31_jumlah_rokok_beli"}),t(z,{color:"red",value:y[13].beli})]}),u("td",{style:r,children:[t(U,{inputName:"blok4_31_jumlah_rokok_produksi"}),t(z,{color:"red",value:y[13].produksi})]})]})]},1),t(ft,{}),t(ve,{title:"BLOK IV.3.2. REKAPITULASI PENGELUARAN MAKANAN, MINUMAN, DAN ROKOK (DALAM RUPIAH)",subtitle:"[Kolom (3) Disalin dari Blok IV.1 Kolom (6), Blok IV.3.1 Kolom (3), atau (5)] dan [Kolom (4) Disalin dari Blok IV.1 Kolom (8), Blok IV.3.1 Kolom (4), atau (6)]",columnsCount:5,columns:["No.","Jenis Pengeluaran","Pembelian Seminggu Terakhir","Produksi Sendiri, Pemberian, dsb., Seminggu Terakhir","Total Seminggu Terakhir [Kolom 3 + Kolom 4]"],children:d.map((m,h)=>$({rincian:m,key:h}))},2),b]})})},{Text:Mn,Title:Vn}=ue,tt={borderStyle:"solid",border:"solid 1px black",padding:"5px"},Ae={borderStyle:"solid",border:"solid 1px black",textAlign:"center",padding:"5px"},nt=({type:e,name:n,options:i,customKey:a,children:o,setValue:l})=>({number:t(V.Item,{name:n,label:null,children:t(Re,{min:0})}),binary:t(We,{name:n,options:[{label:"[1] YA",value:"1"},{label:"[5] TIDAK",value:"5"}],onChange:l&&(c=>l(c))}),rupiah:t(U,{inputName:n,editable:a===26}),multi:t(We,{name:n,options:i??[],onChange:l&&(c=>l(c))})})[e],Fn=({props:e,defaultValue:n})=>{const[i,a]=s.useState(n),[o,l]=s.useState([]),d=u(ee,{children:[t("td",{style:Ae,children:e.id}),t("td",{style:tt,children:e.rincian})]});return s.useEffect(()=>{if(e.children){let c=e.children.filter((r,p)=>{var g;return(g=r.dependentValues)==null?void 0:g.includes(i)}).map(r=>u("tr",{children:[t("td",{style:Ae}),t("td",{style:tt,children:r.rincian}),t("td",{style:Ae,children:t(nt,{type:r.type,name:`wtf_${r.nomor}`,options:r.options,customKey:r.id},r.nomor)})]},e.id));l(c)}},[i,e.children]),u(ee,{children:[u("tr",{style:{backgroundColor:e.id%2===0?" #fffae6":""},children:[d,t("td",{style:Ae,children:t(nt,{type:e.type,name:`wtf_${e.id}`,options:e.options,customKey:e.id,children:e.children,setValue:a},e.id)})]}),o.map(c=>c)]})},Hn=[{id:2,nomor:2,rincian:"BANYAKNYA ART (Blok III Rincian 301)",type:"number"},{id:3,nomor:3,rincian:"ADA BALITA? (R302>0)",type:"binary",children:[{id:27,nomor:"3c1",dependentValues:["1"],rincian:"Jumlah konsumsi susu (VSEN24.KP Rincian 70 s.d 74)",type:"rupiah"}]},{id:4,nomor:4,rincian:"ADA WANITA USIA SUBUR? (R405=2 dan R407 usia 10-54 tahun)",type:"binary"},{id:5,nomor:5,rincian:"ADA PEMBANTU/SUPIR? (R403=8)",type:"binary",children:[{id:28,nomor:"5c1",dependentValues:["1"],rincian:"Jumlah Gaji/Upah pembantu rumah tangga (VSEN24.KP Rincian 277)",type:"rupiah"}]},{id:6,nomor:6,rincian:"ADA ART YANG BEROBAT JALAN/RAWAT INAP? (R1105=1 ATAU R1201=1)",type:"binary",children:[{id:29,nomor:"6c1",dependentValues:["1"],rincian:"VSEN24.KP Rincian 248 s.d 254 Kolom 5 (Setahun terakhir)",type:"rupiah"}]},{id:7,nomor:7,rincian:"ADA ART YANG MENGOBATI SENDIRI? (R1104=1)",type:"binary",children:[{id:29,nomor:"6c2",dependentValues:["1"],rincian:"VSEN24.KP Rincian 255 s.d 257 Kolom 5 (Setahun terakhir)",type:"rupiah"}]},{id:8,nomor:8,rincian:"ADA ART YANG PERNAH MENGGUNAKAN INTERNET?(R808 =1)",type:"binary",children:[{id:30,nomor:"8c1",dependentValues:["1"],rincian:"VSEN24.KP Rincian 236+238",type:"rupiah"}]},{id:9,nomor:9,rincian:"ADA ART YANG MEMILIKI TABUNGAN (BANK)?(R701=1)",type:"binary"},{id:10,nomor:10,rincian:"ADA ART YANG SEDANG BERSEKOLAH? (R610=2)",type:"binary",children:[{id:31,nomor:"10c1",dependentValues:["1"],rincian:"VSEN24.KP Rincian 265 s.d. 270",type:"rupiah"}]},{id:11,nomor:11,rincian:"ADA ART YANG MEMILIKI/MENGUASAI HP? (R802=1)",type:"binary"},{id:12,nomor:11,rincian:"ADA ART DENGAN STATUS PEKERJAAN BURUH/KARYAWAN/PEGAWAI/PEKERJA BEBAS? (R707=4 atau 5)",type:"binary"},{id:13,nomor:12,rincian:"ADA ART DENGAN STATUS BERUSAHA? (R706=1 atau 2)",type:"binary"},{id:14,nomor:17,rincian:"ADA ART YANG MEROKOK? (R1207 = 1 atau 2)",type:"binary",children:[{id:32,nomor:"14c1",dependentValues:["1"],rincian:"VSEN24.KP Rincian 192 Kolom 10",type:"rupiah"}]},{id:15,nomor:18,rincian:"ADA YANG SEDANG MENGGUNAKAN KB? (Blok XVI Rincian 1601=2)",type:"binary",children:[{id:33,nomor:"15c1",dependentValues:["1"],rincian:"VSEN24.KP Rincian 263 Kolom 5",type:"rupiah"}]},{id:16,nomor:14,rincian:"STATUS RUMAH? (Blok XVIII Rincian 1802)",type:"multi",options:[{label:"[1] Milik sendiri",value:"1"},{label:"[2] Kontrak/sewa",value:"2"},{label:"[3] Bebas sewa",value:"3"},{label:"[4] Dinas",value:"4"},{label:"[5] Lainnya",value:"5"}],children:[{id:34,nomor:"16c1",dependentValues:["1","3"],rincian:"VSEN24.KP Rincian 200",type:"rupiah"},{id:35,nomor:"16c2",dependentValues:["2"],rincian:"VSEN24.KP Rincian 201 + 202",type:"rupiah"},{id:37,nomor:"16c3",dependentValues:["4","5"],rincian:"VSEN24.KP Rincian 203",type:"rupiah"}]},{id:17,nomor:15,rincian:"RUTA MENGGUNAKAN PAM METERAN(LEDING)? (R1810A=3 atau R1814A=3)",type:"binary"},{id:18,nomor:16,rincian:"AIR MINUM? (R1810A)",type:"multi",options:[{label:"[1] Air kemasan bermerk",value:"1"},{label:"[2] Air isi ulang",value:"2"},{label:"[3] Leding/sumur bor/pompa ",value:"3"},{label:"[4] Lainnya",value:"4"}]},{id:19,nomor:17,rincian:"SUMBER AIR CUCI/MANDI, DLL (R1814A)",type:"multi",options:[{label:"[1] Air kemasan bermerk",value:"1"},{label:"[2] Air isi ulang",value:"2"},{label:"[3] Leding/sumur bor/pompa ",value:"3"},{label:"[4] Lainnya",value:"4"}]},{id:20,nomor:17,rincian:"SUMBER UTAMA PENERANGAN? (R1816A)",type:"multi",options:[{label:"[1] Listrik PLN dengan meteran",value:"1"},{label:"[2] Listrik PLN tanpa meteran",value:"2"},{label:"[3] Listrik non PLN",value:"3"},{label:"[4] Bukan listrik",value:"4"}]},{id:21,nomor:23,rincian:"BAHAN BAKAR MEMASAK? (R1817)",type:"multi",options:[{label:"[1] Listrik",value:"1"},{label:"[2] LPG > 3 kg",value:"2"},{label:"[3] LPG 3 kg",value:"3"},{label:"[4] Minyak tanah",value:"4"},{label:"[5] Arang/briket/kayu bakar",value:"5"},{label:"[6] Lainnya",value:"6"},{label:"[7] Tidak memasak di rumah",value:"7"}]},{id:22,nomor:24,rincian:"APAKAH RUTA MENERIMA KREDIT? (R1901 salah satu berkode 1)",type:"binary"},{id:23,nomor:26,rincian:"MEMILIKI KENDARAAN BERMOTOR? (R2001H=1 atau R2001.K=1)",type:"binary",children:[{id:39,nomor:"23c1",dependentValues:["1"],rincian:"VSEN24.KP Rincian 309",type:"rupiah"}]},{id:24,nomor:19,rincian:"MEMILIKI ASURANSI/JAMINAN KESEHATAN? (Blok XI Rincian 1101)",type:"binary",children:[{id:40,nomor:"24c1",dependentValues:["1"],rincian:"VSEN24.KP Rincian 311",type:"rupiah"}]},{id:26,nomor:"",rincian:"GARIS KEMISKINAN MARET 2023",type:"rupiah"}],Dn=({form:e,onFinish:n,tabContentStyle:i})=>u(j,{direction:"vertical",style:i,children:[t(j,{style:{width:"100%",justifyContent:"space-between"},direction:"horizontal"}),t(V,{form:e,name:"Worksheet",onFinish:n,autoComplete:"off",layout:"vertical",children:u("table",{style:{borderCollapse:"collapse",width:"100%"},children:[t("thead",{style:{backgroundColor:"#fc0",textAlign:"center"},children:t("tr",{children:t("td",{style:{borderStyle:"solid",border:"solid 1px black",padding:"5px"},colSpan:4,children:u(j,{direction:"vertical",children:[u(Vn,{level:4,style:{textTransform:"uppercase"},children:["Isian Worksheet Template"," "]}),t(Mn,{children:"RINCIAN (Lihat Dokumen VSEN22.K)"})]})})})}),t("tbody",{children:Hn.map(l=>Fn({props:l,defaultValue:e.getFieldValue(`wtf_${l.id}`)}))})]})})]}),Ln=({form:e,onFinish:n,tabContentStyle:i,daftarQc:a})=>{const o={borderStyle:"solid",border:"solid 1px black",padding:"5px"},l={borderStyle:"solid",border:"solid 1px black",textAlign:"center",padding:"5px"},[d,c]=be.useMessage(),r=({rincian:p,key:g})=>u("tr",{children:[t("td",{style:{...l,width:"30px"},children:g+1}),t("td",{style:{...o,width:"auto"},children:p.rincian}),t("td",{style:{...o,width:"150px",textAlign:"right"},children:p.id===5?t(ee,{children:t(U,{inputName:`blokqc_${p.id}`},g)}):t(j,{direction:"vertical",children:t(V.Item,{name:`blokqc_${p.id}`,label:null,style:{marginBottom:"5px",textAlign:"center"},children:t(Re,{className:"custom-input-number",style:{textAlign:"right",width:"100%"},formatter:b=>{const k=Number(b)??0,$=k.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",");return p.dataType==="decimal"?$:String(k)}},g)})})})]},g);return t(j,{direction:"vertical",style:i,children:u(V,{form:e,name:"Blok4_3",onFinish:n,autoComplete:"off",layout:"vertical",children:[t(ve,{title:"Quality Control",columnsCount:3,columns:["No.","Rincian","Isian"],children:a.map((p,g)=>r({rincian:p,key:g}))},2),c]})})},at=[{id:1,nomor:1,rincian:"Padi-padian (R.1)",type:"standar"},{id:2,nomor:2,rincian:"Umbi-umbian (R.8)",type:"standar"},{id:3,nomor:3,rincian:"Ikan/udang/cumi/kerang (R.16)",type:"standar"},{id:4,nomor:4,rincian:"Daging (R.55)",type:"standar"},{id:5,nomor:5,rincian:"Telur dan Susu (R.65)",type:"standar"},{id:6,nomor:6,rincian:"Sayur-sayuran (R.75)",type:"standar"},{id:7,nomor:7,rincian:"Kacang-kacangan (R.102)",type:"standar"},{id:8,nomor:8,rincian:"Buah-buahan (R.110)",type:"standar"},{id:9,nomor:9,rincian:"Minyak dan Kelapa (R.126)",type:"standar"},{id:10,nomor:10,rincian:"Bahan Minuman (R.131)",type:"standar"},{id:11,nomor:11,rincian:"Bumbu-bumbuan (R.139)",type:"standar"},{id:12,nomor:12,rincian:"Bahan Makanan Lainnya (R.154)",type:"standar"},{id:13,nomor:13,rincian:"Makanan dan Minuman Jadi (Blok IV.3.1 Baris Jumlah)",type:"standar"},{id:14,nomor:14,rincian:"Rokok dan Tembakau (Blok IV.3.1 Baris Jumlah)",type:"standar"},{id:15,nomor:15,rincian:"SUBJUMLAH [R.1 s.d. R.14]",type:"standar"},{id:16,nomor:16,rincian:"RATA-RATA PENGELUARAN MAKANAN SEBULAN [R.15 x 30/7]",type:"average"},{id:17,nomor:17,rincian:"RATA-RATA PENGELUARAN BUKAN MAKANAN SEBULAN [salin dari Blok 4.3.3 rincian 8 kolom 3]",type:"average"},{id:18,nomor:18,rincian:"RATA-RATA PENGELUARAN MAKANAN SEBULAN [R.16 + R17]",type:"average"}],zn=async(e,n,i,a)=>{const{data:o}=await G.get(route("api.mak.calculate_qc",{id_ruta:e}));let l=[...i];return l[0].value=o.kalori_total/n/7,l[1].value=o.jumlah_komoditas_bahan_makanan,l[2].value=o.jumlah_komoditas_makanan_jadi_rokok,l[3].value=a,l[4].value=l[1].value+l[2].value+l[3].value,l[5].value=Math.round(o.pengeluaran/n),l[6].value=o.kalori_basket/7/n,l},Un=({data:e,konsumsi_ruta:n,art:i,garis_kemiskinan:a,rekap_konsumsi:o,rekap_konsumsi_art:l})=>{const d={backgroundColor:"#fff",paddingLeft:"10px",paddingRight:"10px",paddingBottom:"15px",width:"100%"},[c]=V.useForm(),[r]=V.useForm(),[p]=V.useForm(),[g]=V.useForm(),[b,k]=s.useState(null),[$,y]=s.useState([]),[I,S]=s.useState(at.map(x=>({beli:0,produksi:0,total:0}))),[m,h]=s.useState(!1),[_,O]=s.useState([{rincian:"Kalori per Kapita per Hari",id:0,value:0,dataType:"decimal"},{rincian:"Kalori 52 basket komoditas per Kapita per Hari",id:6,value:0,dataType:"decimal"},{rincian:"Jumlah Komoditas Bahan Makanan/Minuman",id:1,value:0,dataType:"integer"},{rincian:"Jumlah Komoditas Makanan/Minuman Jadi dan Rokok",id:2,value:0,dataType:"integer"},{rincian:"Jumlah Komoditas Non Makanan [Disalin dari dokumen KP Blok III Rincian 305 ]",id:3,value:0,dataType:"integer"},{rincian:"Jumlah Semua Komoditas",id:4,value:0,dataType:"integer"},{rincian:"Pengeluaran per kapita",id:5,value:0,dataType:"rupiah"}]),[N,K]=s.useState(!1),[L,C]=s.useState(!1),[f,v]=s.useState([]),[P,D]=s.useState([]),[R,F]=s.useState([]),q=()=>{C(!1)},[Y,ke]=be.useMessage(),oe=async x=>{try{const E=route("entri.mak.update"),{data:w}=await G.patch(E,x,{headers:{"Content-Type":"application/json"}})}catch{console.error("error saving blok 1 and 2")}},ye=async x=>{try{const E=route("entri.mak.art.update"),w=await G.patch(E,x,{headers:{"Content-Type":"application/json"}})}catch{console.error("Oops terjadi kesalahan dalam menyimpan Kuesioner ART, silahkan hubungi admin")}},re=async x=>{try{const E=route("entri.mak.konsumsi.store"),{data:w}=await G.patch(E,x,{headers:{"Content-Type":"application/json"}})}catch{Y.open({type:"error",key:"4_1",content:"Oops terjadi kesalahan dalam mmenyimpan konsumsi, silahkan hubungi admin"})}},Ee=async x=>{try{const E=route("api.entri.inti",x),{data:w}=await G.get(E)}catch{Y.open({type:"error",key:"cari",content:"Oops terjadi kesalahan dalam menyimpan blok 4 1 art, silahkan hubungi admin"})}};function fe(x){}const[Ie,le]=s.useState([]),[Oe,Se]=s.useState([{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0}]),_e=async x=>{const w=Object.entries(x).filter(([W,M])=>W.endsWith("volume")&&typeof M=="number"&&M>0).map(async W=>{let M=W[0].split("_")[0],A=Number(W[1])??0;try{const{data:X}=await G.get(route("api.mak.komoditas.kalori.fetch",{id:M}));return A*X}catch{return console.log("error ketika fetch data kalori"),0}});return(await Promise.all(w)).reduce((W,M)=>W+M,0)},Z=async()=>{Y.loading({content:"Menyimpan data",type:"loading",key:"simpan"});try{const[x,E,w]=await Promise.all([g.submit(),c.submit(),r.submit()]),W=(await G.get(route("api.mak.calculate_qc",{id_ruta:$[0].id_ruta}))).data,M=await zn(e.id,$.length,_,c.getFieldValue("blokqc_3"));O([...M]),c.setFieldsValue({blokqc_0:M[0].value,blokqc_1:M[1].value,blokqc_2:M[2].value,blokqc_4:M[4].value,blokqc_5:M[5].value,blokqc_6:M[6].value}),k(new Date),Ge.get(route("entri.mak.edit",{id:e.id}),{},{preserveState:!0,preserveScroll:!0}),Y.open({content:"Data berhasil tersimpan",type:"success",key:"simpan",duration:2})}catch{Y.open({content:"Data gagal tersimpan",type:"error",key:"simpan",duration:2})}},$e=async()=>{await Z();const x=c.getFieldValue("id");try{h(!0);const{data:E}=await G.get(route("api.mak.revalidasi",{id_ruta:x}));D([...E.evaluasi_rh]),F([...E.daftar_error]),v([...E.daftar_warning]),Y.open({content:"Revalidasi selesai",type:"success",key:"revalidasi"})}catch(E){console.error("Error submitting forms:",E)}finally{h(!1)}},Te=async()=>{const x=r.getFieldsValue();[0,1,2,3,4,5,6,7,8,9,10,11,14,15,16,17].forEach(w=>{let B=[...I];const W=`beli_harga${w}`,M=Object.entries(x).filter(([T])=>T.endsWith(W)&&!T.includes("jumlah")).reduce((T,[,Q])=>T+(Q||0),0);B[w].beli=M;const A=`produksi_harga${w}`,X=Object.entries(x).filter(([T])=>T.endsWith(A)&&!T.includes("jumlah")).reduce((T,[,Q])=>T+(Q||0),0);B[w].produksi=X,w<=14&&(B[w].total=B[w].beli+B[w].produksi),B[14]=B.slice(0,14).reduce((T,Q)=>({beli:T.beli+Q.beli,produksi:T.produksi+Q.produksi,total:T.total+Q.total}),{beli:0,produksi:0,total:0}),B[15].total=Math.round(B[14].total*30/7),B[17].total=B[15].total+B[16].total,S(B)})};s.useEffect(()=>{let x=[...I];$==null||$.forEach((w,B)=>{g.setFieldValue(`${B}-id_art`,w.id),g.setFieldValue(`${B}-nama`,w.nama)});const E=$==null?void 0:$.reduce((w,B)=>(Object.values(B.rekap).forEach((W,M)=>{w[M]=w[M]||{beli:0,produksi:0,total:0},w[M].beli+=W.beli,w[M].produksi+=W.produksi,w[M].total+=W.total}),w),[]);x[12]=E?E[0]:0,x[13]=E?E[1]:0,x[14]=x.slice(0,14).reduce((w,B)=>({beli:B?w.beli+B.beli:0,produksi:B?w.produksi+B.produksi:0,total:B?w.total+B.total:0}),{beli:0,produksi:0,total:0}),x[15].total=Math.round(x[14].total*30/7),x[17].total=x[15].total+x[16].total,S(x)},[$]),s.useRef(!1);const Be=x=>{x.ctrlKey&&x.key==="s"&&(x.preventDefault(),c.submit())};return s.useEffect(()=>{(()=>{if(i=i.map(X=>({...X,rekap:{12:{produksi:0,beli:0,total:0},13:{produksi:0,beli:0,total:0}}})),i.length<1&&y(X=>[...X,{id:"",id_ruta:e.id,nama:e.r110,nomor_art:0,rekap:{12:{produksi:0,beli:0,total:0},13:{produksi:0,beli:0,total:0}}}]),i.length>0){var A=[...i];l.map(T=>({id_art:T.id_art,id_kelompok:T.id_kelompok,beli:Number(T.beli),produksi:Number(T.produksi)})).forEach(T=>(A=A.map(Q=>(Q.id===T.id_art&&(Q.rekap[T.id_kelompok].produksi=T.produksi,Q.rekap[T.id_kelompok].beli=T.beli,Q.rekap[T.id_kelompok].total=T.beli+T.produksi),Q)),T)),y(A)}})(),document.addEventListener("keydown",Be),c.setFieldsValue(e);let E=[...I];o.map(A=>({id_kelompok:A.id_kelompok,beli:Number(A.beli),produksi:Number(A.produksi)})).forEach(A=>{E[A.id_kelompok].beli=A.beli,E[A.id_kelompok].produksi=A.produksi,E[A.id_kelompok].total=A.produksi+A.beli}),E[16].total=e.blok4_32_16_total,S(E),c.setFieldValue("wtf_26",a),r.setFieldsValue({id_ruta:e.id,hal10_jml_komoditas:e.hal10_jml_komoditas??void 0,hal8_jml_komoditas:e.hal8_jml_komoditas??void 0,hal6_jml_komoditas:e.hal6_jml_komoditas??void 0,hal4_jml_komoditas:e.hal4_jml_komoditas??void 0,hal2_jml_komoditas:e.hal2_jml_komoditas??void 0});const B=[1,8,16],M=n.map(A=>({[`${B.includes(A.id_komoditas)?"jumlah":""}${A.id_komoditas}_beli_harga${A.id_kelompok}`]:A.harga_beli,[`${B.includes(A.id_komoditas)?"jumlah":""}${A.id_komoditas}_produksi_harga${A.id_kelompok}`]:A.harga_produksi,[`${A.id_komoditas}_total_harga`]:A.harga_total,[`${A.id_komoditas}_item`]:A.item,[`${A.id_komoditas}_satuan`]:A.satuan,[`${A.id_komoditas}_beli_volume`]:A.volume_beli,[`${A.id_komoditas}_produksi_volume`]:A.volume_produksi,[`${A.id_komoditas}_total_volume`]:A.volume_total})).reduce((A,X)=>{for(const T in X)X.hasOwnProperty(T)&&(A[T]=X[T]);return A},{});r.setFieldsValue(M),g.setFieldsValue({id_ruta:e.id}),k(new Date(e.updated_at))},[]),u(ee,{children:[ke,t(yt,{title:"Entri Kuesioner Inti"}),u(j,{style:{width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:[u(j,{style:{width:"100%",justifyContent:"space-between"},direction:"horizontal",children:[t(j,{children:u(se,{onClick:()=>Ge.get(route("entri",{kode_kabkot:c.getFieldValue("kode_kabkot"),nks:c.getFieldValue("nks")})),children:[t(_t,{})," Kembali"]})}),u(j,{direction:"horizontal",style:{width:"100%",justifyContent:"end"},children:["Last Saved :",(b==null?void 0:b.toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}))||"Never",u(se,{type:"primary",onClick:Z,children:[t($t,{})," Simpan"]}),u(se,{type:"primary",style:{backgroundColor:"#e64d00"},onClick:async()=>{C(!0),N||($e(),K(!0))},children:[t(Cn,{}),"Evaluasi"]})]})]}),t(Ce,{onChange:fe,type:"card",items:[{label:"Blok I, II",key:"1",children:t(At,{tabContentStyle:d,form:c,onFinish:oe,setDaftarArt:y,editable:!1,identitas_wilayah:{desa:e.desa,kode_desa:e.kode_desa,kec:e.kec,kode_kec:e.kode_kec}})},{label:"Worksheet",key:"2",children:t(Dn,{tabContentStyle:d,form:c,onFinish:oe})},{label:"Blok IV.1",key:"3",children:t(En,{onFinish:re,form:r,tabContentStyle:d,calculate:Te,subTotalHarga:Oe,rekapMak:I,setRekapMak:S})},{label:"Blok IV.1 ART",key:"4",children:t(Kn,{tabContentStyle:d,form:p,artForm:g,onFinish:Ee,artFormFinish:ye,rekapArt:Ie,setRekapArt:le,daftarArt:$,setDaftarArt:y,calculateKalori:_e})},{label:"Blok IV.3",key:"5",children:t(Pn,{tabContentStyle:d,form:c,onFinish:oe,daftarArt:$,rekapMak:I,daftarRincian432:at,setRekapMak:S})},{label:"Blok QC",key:"6",children:t(Ln,{tabContentStyle:d,form:c,onFinish:oe,daftarQc:_})}]})]}),u(Rt,{cancelText:"Tutup",okText:"",handleCancel:q,confirmLoadingModal:!1,openModal:L,handleOk:q,title:"Daftar Evaluasi",width:"1200px",children:[u(j,{style:{marginBottom:"20px",width:"100%",justifyContent:"end"},children:[u(se,{type:"primary",onClick:$e,children:[t(vt,{})," Revalidasi"]}),t(gt,{children:"Klik ini untuk melakukan revalidasi ulang"})]}),m?u(j,{style:{width:"100%",justifyContent:"center"},direction:"vertical",children:[t(j,{style:{width:"100%",justifyContent:"center"},children:t(ut,{size:"large"})}),t(j,{style:{width:"100%",justifyContent:"center"},children:"Sedang melakukan evaluasi terhadap isian, harap bersabar :)"})]}):t(j,{style:{width:"100%"},direction:"vertical",children:t(Ce,{onChange:fe,type:"card",items:[{label:t(Ke,{count:R.length,children:"Error Isian"}),key:"1",children:u(ee,{children:[u(j,{children:["Jumlah error :"," ",R.length]}),t(je,{bordered:!0,columns:ot,dataSource:R,style:{width:"100%"}})]})},{label:t(Ke,{count:f.length,color:"rgb(255, 204, 0)",children:"Warning Isian"}),key:"2",children:u(ee,{children:[u(j,{children:["Jumlah warning :"," ",f.length]}),t(je,{bordered:!0,columns:ot,dataSource:f,style:{width:"100%"}})]})},{label:t(Ke,{count:P.length,color:"rgb(255, 204, 0)",children:"Warning Isian Range Harga"}),key:"3",children:u(ee,{children:[u(j,{children:["Jumlah warning range harga :"," ",P.length]}),t(je,{bordered:!0,columns:Gn,dataSource:P,style:{width:"100%"}})]})}]})})]},"range-harga-modal")]})},{Text:gt}=ue,Gn=[{title:"Nomor",dataIndex:"nomor",key:"nomor",width:10,render:(e,n,i)=>i+1},{title:"Komoditas",dataIndex:"komoditas",key:"komoditas",render:(e,n)=>`[${n.id_komoditas}] ${n.nama_komoditas}`},{title:"Harga per Satuan",dataIndex:"harga",key:"harga",width:"20%",render:e=>t(z,{color:"#000",value:Number(e)})},{title:"Rincian",dataIndex:"rincian",key:"rincian",render:(e,n)=>u(gt,{children:[n.rincian,"(",t(z,{value:n.min,color:"red"})," s.d",t(z,{value:n.max,color:"red"}),")"]})}],ot=[{title:"Nomor",dataIndex:"nomor",key:"nomor",width:15,render:(e,n,i)=>i+1},{title:"Variabel",dataIndex:"variable",key:"variable"},{title:"Deskripsi",dataIndex:"rincian",key:"rincian"}];Un.layout=e=>t(St,{user:e.props.auth.user,header:t("h2",{className:"",children:"Dashboard"}),selectedKey:"entri",children:e});export{Un as default};
