import{r as p,j as o,F as u,a,b as E}from"./app-07f63a06.js";import{A as N}from"./AuthenticatedLayout-234c9ce1.js";import{c as i,E as f}from"./ColumnSorter-efe1a947.js";import{T as B}from"./index-a00f5fb5.js";import{S as s}from"./index-63628ab1.js";import{B as D}from"./index-2eda4a0e.js";import{T as I}from"./Table-9845d268.js";import{T as P}from"./index-85ea263e.js";import"./Sider-14134412.js";import"./AntdIcon-8b9092f5.js";import"./index-d2dcf194.js";import"./KeyCode-2c288b19.js";import"./index-188e454b.js";import"./index-e06b5d3f.js";import"./addEventListener-a6f927f4.js";const{Title:S}=P,v=(n,c)=>{const _=n.map(r=>r.title).join(";")+`
`+c.map(r=>n.map(k=>{if(k.render){const l=k.render(r[k.dataIndex],r);return l&&l.props?l.props.children:l}else return r[k.dataIndex]}).join(";")).join(`
`),m=new Blob([_],{type:"text/csv"}),d=document.createElement("a");d.href=URL.createObjectURL(m),d.download="export.csv",document.body.appendChild(d),d.click(),document.body.removeChild(d)},U=({data:n,rekap_kabkot:c,users:_})=>{const[m,d]=p.useState([]),[r,k]=p.useState([]),[l,j]=p.useState([]);p.useEffect(()=>{d(n),k(c),j(_)},[]);const C=i("jumlah_dok"),F=i("jumlah_dokumen"),x=i("dok_clean"),b=i("dok_warning"),h=i("dok_error"),K=i("nks"),$=[{title:"Kabupaten",dataIndex:"kabupaten",key:"kabupaten",filters:r.map(t=>({text:`[${t.kode_prov}${t.kode_kabkot}] ${t.kabkot}`,value:t.kode_kabkot})),onFilter:(t,e)=>e.kode_kabkot===t,render:(t,e)=>`[${e.kode_prov}${e.kode_kabkot}] ${e.kabkot}`},{title:"NKS",dataIndex:"nks",key:"nks",render:(t,e)=>`${e.nks}`,sorter:K},{title:"Target Dokumen",dataIndex:"target_dok",key:"target_dok",render:()=>10},{title:"Jumlah Dokumen Dientri",dataIndex:"jumlah_dok",key:"jumlah_dok",sorter:C},{title:"Dokumen Clean",dataIndex:"dok_clean",key:"dok_clean",sorter:x},{title:"Dokumen Warning",dataIndex:"dok_warning",key:"dok_warning",sorter:b},{title:"Dokumen Error",dataIndex:"dok_error",key:"dok_error",sorter:h},{title:"% clean",dataIndex:"persentase",key:"persentase",sorter:(t,e)=>{const g=(Number(t.dok_clean)/10*100).toFixed(2),y=(Number(e.dok_clean)/10*100).toFixed(2);return parseFloat(g)-parseFloat(y)},render:(t,e)=>`${(Number(e.dok_clean)/10*100).toFixed(2)} %`}],w=[{title:"Kabupaten",dataIndex:"kabupaten",key:"kabupaten",render:(t,e)=>`[${e.kode_prov}${e.kode_kabkot}] ${e.kabkot}`},{title:"Target Dokumen",dataIndex:"target_dok",key:"target_dok",render:(t,e)=>e.target_nks*10},{title:"Jumlah Dokumen Dientri",dataIndex:"jumlah_dok",key:"jumlah_dok",sorter:C},{title:"Dokumen Clean",dataIndex:"dok_clean",key:"dok_clean",sorter:x},{title:"Dokumen Warning",dataIndex:"dok_warning",key:"dok_warning",sorter:b},{title:"Dokumen Error",dataIndex:"dok_error",key:"dok_error",sorter:h},{title:"%clean",dataIndex:"persentase",key:"persentase",sorter:(t,e)=>{const g=(Number(t.dok_clean)/10*100).toFixed(2),y=(Number(e.dok_clean)/10*100).toFixed(2);return parseFloat(g)-parseFloat(y)},render:(t,e)=>`${(Number(e.dok_clean)/e.target_nks/10*100).toFixed(2)} %`}],T=[{title:"Kabupaten",dataIndex:"kode_kabkot",key:"kabupaten",render:(t,e)=>`[71${e.kode_kabkot}] ${e.kabkot}`,filters:r.map(t=>({text:`[${t.kode_prov}${t.kode_kabkot}] ${t.kabkot}`,value:t.kode_kabkot})),onFilter:(t,e)=>e.kode_kabkot===t},{title:"Nama Lengkap",dataIndex:"nama_lengkap",key:"nama_lengkap"},{title:"Username",dataIndex:"username",key:"username"},{title:"Jumlah Dokumen Dientri",dataIndex:"jumlah_dokumen",key:"jumlah_dokumen",sorter:F},{title:"Dokumen Clean",dataIndex:"dok_clean",key:"dok_clean",sorter:x},{title:"Dokumen Warning",dataIndex:"dok_warning",key:"dok_warning",sorter:b},{title:"Dokumen Error",dataIndex:"dok_error",key:"dok_error",sorter:h}];return o(u,{children:[a(E,{title:"Dashboard"}),a(B,{style:{backgroundColor:"#fff",padding:"10px"},items:[{label:"Progress per Kabupaten/Kota",key:"1",children:o(u,{children:[o(S,{level:2,children:["Progress pendataan menurut Kabupaten/Kota"," "]}),a(s,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:o(D,{type:"primary",onClick:()=>v(w,r),children:[a(f,{}),"Export as CSV"]})}),a(s,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px",marginBottom:"30px"},direction:"vertical",children:a(I,{columns:w,pagination:{pageSize:20,hideOnSinglePage:!0},style:{width:"100%",backgroundColor:"red"},dataSource:r,scroll:{x:"100%"}})})]})},{label:"Progress per NKS",key:"2",children:o(u,{children:[a(S,{level:2,children:"Progress pendataan menurut NKS "}),a(s,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:o(D,{type:"primary",onClick:()=>v($,m),children:[a(f,{}),"Export as CSV"]})}),a(s,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:a(I,{columns:$,dataSource:m,scroll:{x:"100%"}})})]})},{label:"Progress per PML",key:"3",children:o(u,{children:[a(S,{level:2,children:"Progress pendataan menurut PML "}),a(s,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:o(D,{type:"primary",onClick:()=>v(T,l),children:[a(f,{}),"Export as CSV"]})}),a(s,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:a(I,{columns:T,dataSource:l,scroll:{x:"100%"}})})]})}]})]})};U.layout=n=>a(N,{user:n.props.auth.user,header:a("h2",{className:"",children:"Dashboard"}),selectedKey:"dashboard",children:n});export{U as default};
