import{r as l,T as w,m as j,a3 as H,C as R,o as N,a4 as ne,V as oe,X as le,s as re}from"./app-af43503a.js";import{B as _,c as se,u as ae,r as ce}from"./index-76f04737.js";import{E as ie,C as ue}from"./ExclamationCircleFilled-d5d80012.js";import{u as L,C as fe}from"./CloseCircleFilled-70c684fc.js";import{I as me}from"./InfoCircleFilled-9e526591.js";import{A as z}from"./ActionButton-660c83f4.js";import{g as de,N as Ce,h as S}from"./useFlexGapSupport-2defffec.js";import{u as Q,D as ge,P as be}from"./index-80e7febf.js";import{C as xe}from"./CloseOutlined-f37a1da2.js";function ve(){const[e,n]=l.useState([]),r=l.useCallback(t=>(n(o=>[].concat(w(o),[t])),()=>{n(o=>o.filter(m=>m!==t))}),[]);return[e,r]}function W(e,n){return j.createElement("span",{className:`${e}-close-x`},n||j.createElement(xe,{className:`${e}-close-icon`}))}const G=e=>{const{okText:n,okType:r="primary",cancelText:t,confirmLoading:o,onOk:m,onCancel:b,okButtonProps:u,cancelButtonProps:c}=e,[s]=L("Modal",H());return j.createElement(j.Fragment,null,j.createElement(_,Object.assign({onClick:b},c),t||(s==null?void 0:s.cancelText)),j.createElement(_,Object.assign({},se(r),{loading:o,onClick:m},u),n||(s==null?void 0:s.okText)))};var pe=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};let B;const ye=e=>{B={x:e.pageX,y:e.pageY},setTimeout(()=>{B=null},100)};de()&&document.documentElement.addEventListener("click",ye,!0);const Oe=e=>{var n;const{getPopupContainer:r,getPrefixCls:t,direction:o}=l.useContext(R),m=$=>{const{onCancel:E}=e;E==null||E($)},b=$=>{const{onOk:E}=e;E==null||E($)},{prefixCls:u,className:c,rootClassName:s,open:a,wrapClassName:d,centered:f,getContainer:i,closeIcon:C,focusTriggerAfterClose:O=!0,visible:x,width:v=520,footer:p}=e,P=pe(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","visible","width","footer"]),g=t("modal",u),y=t(),[k,I]=Q(g),A=N(d,{[`${g}-centered`]:!!f,[`${g}-wrap-rtl`]:o==="rtl"}),M=p===void 0?l.createElement(G,Object.assign({},e,{onOk:b,onCancel:m})):p;return k(l.createElement(Ce,null,l.createElement(ne,{status:!0,override:!0},l.createElement(ge,Object.assign({width:v},P,{getContainer:i===void 0?r:i,prefixCls:g,rootClassName:N(I,s),wrapClassName:A,footer:M,visible:a??x,mousePosition:(n=P.mousePosition)!==null&&n!==void 0?n:B,onClose:m,closeIcon:W(g,C),focusTriggerAfterClose:O,transitionName:S(y,"zoom",e.transitionName),maskTransitionName:S(y,"fade",e.maskTransitionName),className:N(I,c)})))))},X=Oe;function Y(e){const{icon:n,onCancel:r,onOk:t,close:o,okText:m,okButtonProps:b,cancelText:u,cancelButtonProps:c,confirmPrefixCls:s,rootPrefixCls:a,type:d,okCancel:f,footer:i,locale:C}=e;let O=n;if(!n&&n!==null)switch(d){case"info":O=l.createElement(me,null);break;case"success":O=l.createElement(ue,null);break;case"error":O=l.createElement(fe,null);break;default:O=l.createElement(ie,null)}const x=e.okType||"primary",v=f??d==="confirm",p=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[P]=L("Modal"),g=C||P,y=v&&l.createElement(z,{actionFn:r,close:o,autoFocus:p==="cancel",buttonProps:c,prefixCls:`${a}-btn`},u||(g==null?void 0:g.cancelText));return l.createElement("div",{className:`${s}-body-wrapper`},l.createElement("div",{className:`${s}-body`},O,e.title===void 0?null:l.createElement("span",{className:`${s}-title`},e.title),l.createElement("div",{className:`${s}-content`},e.content)),i===void 0?l.createElement("div",{className:`${s}-btns`},y,l.createElement(z,{type:x,actionFn:t,close:o,autoFocus:p==="ok",buttonProps:b,prefixCls:`${a}-btn`},m||(v?g==null?void 0:g.okText:g==null?void 0:g.justOkText))):i)}const Pe=e=>{const{close:n,zIndex:r,afterClose:t,visible:o,open:m,keyboard:b,centered:u,getContainer:c,maskStyle:s,direction:a,prefixCls:d,wrapClassName:f,rootPrefixCls:i,iconPrefixCls:C,theme:O,bodyStyle:x,closable:v=!1,closeIcon:p,modalRender:P,focusTriggerAfterClose:g}=e,y=`${d}-confirm`,k=e.width||416,I=e.style||{},A=e.mask===void 0?!0:e.mask,M=e.maskClosable===void 0?!1:e.maskClosable,$=N(y,`${y}-${e.type}`,{[`${y}-rtl`]:a==="rtl"},e.className);return l.createElement(oe,{prefixCls:i,iconPrefixCls:C,direction:a,theme:O},l.createElement(X,{prefixCls:d,className:$,wrapClassName:N({[`${y}-centered`]:!!e.centered},f),onCancel:()=>n==null?void 0:n({triggerCancel:!0}),open:m,title:"",footer:null,transitionName:S(i,"zoom",e.transitionName),maskTransitionName:S(i,"fade",e.maskTransitionName),mask:A,maskClosable:M,maskStyle:s,style:I,bodyStyle:x,width:k,zIndex:r,afterClose:t,keyboard:b,centered:u,getContainer:c,closable:v,closeIcon:p,modalRender:P,focusTriggerAfterClose:g},l.createElement(Y,Object.assign({},e,{confirmPrefixCls:y}))))},V=Pe,he=[],T=he;var ke=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};let q="";function Ee(){return q}function F(e){const n=document.createDocumentFragment();let r=Object.assign(Object.assign({},e),{close:b,open:!0}),t;function o(){for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];const d=s.some(f=>f&&f.triggerCancel);e.onCancel&&d&&e.onCancel.apply(e,[()=>{}].concat(w(s.slice(1))));for(let f=0;f<T.length;f++)if(T[f]===b){T.splice(f,1);break}ae(n)}function m(c){var{okText:s,cancelText:a,prefixCls:d,getContainer:f}=c,i=ke(c,["okText","cancelText","prefixCls","getContainer"]);clearTimeout(t),t=setTimeout(()=>{const C=H(),{getPrefixCls:O,getIconPrefixCls:x,getTheme:v}=le(),p=O(void 0,Ee()),P=d||`${p}-modal`,g=x(),y=v();let k=f;k===!1&&(k=void 0),ce(l.createElement(V,Object.assign({},i,{getContainer:k,prefixCls:P,rootPrefixCls:p,iconPrefixCls:g,okText:s,locale:C,theme:y,cancelText:a||C.cancelText})),n)})}function b(){for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];r=Object.assign(Object.assign({},r),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),o.apply(this,s)}}),r.visible&&delete r.visible,m(r)}function u(c){typeof c=="function"?r=c(r):r=Object.assign(Object.assign({},r),c),m(r)}return m(r),T.push(b),{destroy:b,update:u}}function J(e){return Object.assign(Object.assign({},e),{type:"warning"})}function K(e){return Object.assign(Object.assign({},e),{type:"info"})}function U(e){return Object.assign(Object.assign({},e),{type:"success"})}function Z(e){return Object.assign(Object.assign({},e),{type:"error"})}function ee(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function Te(e){let{rootPrefixCls:n}=e;q=n}const je=(e,n)=>{let{afterClose:r,config:t}=e;var o;const[m,b]=l.useState(!0),[u,c]=l.useState(t),{direction:s,getPrefixCls:a}=l.useContext(R),d=a("modal"),f=a(),i=()=>{var v;r(),(v=u.afterClose)===null||v===void 0||v.call(u)},C=function(){b(!1);for(var v=arguments.length,p=new Array(v),P=0;P<v;P++)p[P]=arguments[P];const g=p.some(y=>y&&y.triggerCancel);u.onCancel&&g&&u.onCancel.apply(u,[()=>{}].concat(w(p.slice(1))))};l.useImperativeHandle(n,()=>({destroy:C,update:v=>{c(p=>Object.assign(Object.assign({},p),v))}}));const O=(o=u.okCancel)!==null&&o!==void 0?o:u.type==="confirm",[x]=L("Modal",re.Modal);return l.createElement(V,Object.assign({prefixCls:d,rootPrefixCls:f},u,{close:C,open:m,afterClose:i,okText:u.okText||(O?x==null?void 0:x.okText:x==null?void 0:x.justOkText),direction:u.direction||s,cancelText:u.cancelText||(x==null?void 0:x.cancelText)}))},we=l.forwardRef(je);let D=0;const Ne=l.memo(l.forwardRef((e,n)=>{const[r,t]=ve();return l.useImperativeHandle(n,()=>({patchElement:t}),[]),l.createElement(l.Fragment,null,r)}));function $e(){const e=l.useRef(null),[n,r]=l.useState([]);l.useEffect(()=>{n.length&&(w(n).forEach(b=>{b()}),r([]))},[n]);const t=l.useCallback(m=>function(u){var c;D+=1;const s=l.createRef();let a;const d=l.createElement(we,{key:`modal-${D}`,config:m(u),ref:s,afterClose:()=>{a==null||a()}});return a=(c=e.current)===null||c===void 0?void 0:c.patchElement(d),a&&T.push(a),{destroy:()=>{function f(){var i;(i=s.current)===null||i===void 0||i.destroy()}s.current?f():r(i=>[].concat(w(i),[f]))},update:f=>{function i(){var C;(C=s.current)===null||C===void 0||C.update(f)}s.current?i():r(C=>[].concat(w(C),[i]))}}},[]);return[l.useMemo(()=>({info:t(K),success:t(U),error:t(Z),warning:t(J),confirm:t(ee)}),[]),l.createElement(Ne,{key:"modal-holder",ref:e})]}var Fe=globalThis&&globalThis.__rest||function(e,n){var r={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(r[t[o]]=e[t[o]]);return r};const Ie=e=>{const{prefixCls:n,className:r,closeIcon:t,closable:o,type:m,title:b,children:u}=e,c=Fe(e,["prefixCls","className","closeIcon","closable","type","title","children"]),{getPrefixCls:s}=l.useContext(R),a=s(),d=n||s("modal"),[,f]=Q(d),i=`${d}-confirm`;let C={};return m?C={closable:o??!1,title:"",footer:"",children:l.createElement(Y,Object.assign({},e,{confirmPrefixCls:i,rootPrefixCls:a,content:u}))}:C={closable:o??!0,title:b,footer:e.footer===void 0?l.createElement(G,Object.assign({},e)):e.footer,children:u},l.createElement(be,Object.assign({prefixCls:d,className:N(f,`${d}-pure-panel`,m&&i,m&&`${i}-${m}`,r)},c,{closeIcon:W(d,t),closable:o},C))},Se=Ie;function te(e){return F(J(e))}const h=X;h.useModal=$e;h.info=function(n){return F(K(n))};h.success=function(n){return F(U(n))};h.error=function(n){return F(Z(n))};h.warning=te;h.warn=te;h.confirm=function(n){return F(ee(n))};h.destroyAll=function(){for(;T.length;){const n=T.pop();n&&n()}};h.config=Te;h._InternalPanelDoNotUseOrYouWillBeFired=Se;const Qe=h;export{Qe as M};
