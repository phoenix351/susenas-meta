import{r as p,j as i,F as C,a as o,b as P,c as h}from"./app-e4c0373a.js";import{A as j}from"./AuthenticatedLayout-44da130b.js";import{S as g}from"./index-c5e6a5b8.js";import{B as y}from"./index-dfc0fd1d.js";import{E as B}from"./ExportOutlined-44f6a372.js";import{S as T}from"./SyncOutlined-d60545ac.js";import{T as A}from"./index-db0a3f57.js";import"./Sider-dc1ae08f.js";import"./AntdIcon-afd26e9a.js";import"./LeftOutlined-afb6c5bd.js";import"./index-0939f339.js";import"./useForceUpdate-e1e6d3ff.js";import"./responsiveObserver-2bf891d6.js";import"./EllipsisOutlined-70edf86c.js";import"./Overflow-cda08727.js";import"./Keyframes-f3b01d4a.js";import"./useFlexGapSupport-95c54203.js";import"./KeyCode-6413d982.js";import"./EditOutlined-0f9afd6f.js";import"./index-c5cb5dc2.js";import"./index-ef5c41f7.js";import"./Title-8ddc04f3.js";import"./CheckOutlined-b439785a.js";import"./styleChecker-6f819655.js";import"./TextArea-3d18e405.js";const{Title:L}=A,U=({data:s})=>{const[f,x]=p.useState(0),[m,u]=p.useState(!1);console.log({data:s});const w=async r=>{try{r=r.filter(t=>t.length>10);const e=5,c=5,k=async t=>{const l=t.map(async a=>{const d=route("api.mak.calculate_qc",{id_ruta:a});try{return(await h.get(d)).data}catch(n){return console.error(`Error processing id_ruta ${a}:`,n),null}});return await Promise.all(l)};for(let t=0;t<r.length;t+=e){const l=r.slice(t,t+e),a=await Promise.all(Array.from({length:c},(d,n)=>{const E=n*(e/c),b=(n+1)*(e/c);return k(l.slice(E,b))}));console.log("Results:",a.flat()),x(t)}}catch(e){console.log("Something went wrong",{error:e})}},S=async()=>{try{u(!0);const r=await h.post(route("monitoring.update"))}catch(r){console.log("Something went wrong",{error:r})}finally{u(!1)}};return p.useEffect(()=>{w(s)},[]),i(C,{children:[o(P,{title:"Periksa"}),o(L,{level:2,children:f}),i(g,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:[i(y,{type:"primary",children:[o(B,{}),"Export as CSV"]}),i(y,{type:"primary",onClick:()=>S(),loading:m,children:[m??o(T,{}),"Update Data Monitoring"]})]}),o(g,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical"})]})};U.layout=s=>o(j,{user:s.props.auth.user,header:o("h2",{className:"",children:"Periksa"}),selectedKey:"periksa",children:s});export{U as default};
