import{r,_ as w,a as e,F as E,j as d,c as f,b as $,g as _}from"./app-894b5060.js";import{A as P}from"./AuthenticatedLayout-d969d3a6.js";import{m as K}from"./index-ae587b3c.js";import{F as k}from"./index-a83d82f4.js";import{S as g}from"./index-e59ab217.js";import{B as b}from"./index-19dce762.js";import{R as V,P as H}from"./ReloadOutlined-a44938ac.js";import{l as A}from"./lodash-27380d56.js";import{S as D}from"./index-4d0eaef9.js";import{A as I}from"./AntdIcon-675c8209.js";import{T as N}from"./Table-c9e1a9b1.js";import"./Sider-e74e5ed0.js";import"./index-2754962a.js";import"./KeyCode-3783f810.js";import"./index-a18f84bc.js";import"./addEventListener-e888a729.js";var R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"};const B=R;var T=function(l,n){return r.createElement(I,w({},l,{ref:n,icon:B}))};const j=r.forwardRef(T);var z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9z"}}]},name:"edit",theme:"filled"};const M=z;var O=function(l,n){return r.createElement(I,w({},l,{ref:n,icon:M}))};const L=r.forwardRef(O);var U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};const W=U;var q=function(l,n){return r.createElement(I,w({},l,{ref:n,icon:W}))};const G=r.forwardRef(q),J=({form:a,onFinish:l,setDataSource:n})=>{const[c,y]=K.useMessage(),m=[{label:"[71] SULAWESI UTARA",value:"71"}],[i,v]=r.useState([]);r.useState([]);const[F,x]=r.useState(!0),[S,p]=r.useState([]),o=async()=>{const s=route("api.entri.kabkot"),{data:h}=await f.get(s),C=h.data.map(u=>({label:`[${u.kode_kabkot}] ${u.kabkot}`,value:u.kode_kabkot}));h.kode_kabkot==="00"?x(!1):a.setFieldValue("kode_kabkot",h.kode_kabkot),v(C)},t=async()=>{const s=route("api.entri.nks",{kodeKabkot:a.getFieldValue("kode_kabkot"),semester:a.getFieldValue("semester")}),{data:h}=await f.get(s),C=h.map(u=>({label:u,value:u}));p(C)};return r.useEffect(()=>{try{o(),a.setFieldValue("kode_prov","71")}catch{}},[]),e(E,{children:d(k,{form:a,name:"EntriIntiForm",onFinish:l,autoComplete:"off",style:{width:"300px"},children:[y,e(k.Item,{name:"kode_prov",label:"Provinsi",children:e(g,{allowClear:!0,showSearch:!0,disabled:!0,optionFilterProp:"label",options:m,onClear:()=>{},onChange:()=>{a.setFieldsValue({kode_kabkot:"",semester:"",nks:""}),n([]),p([])}})}),e(k.Item,{name:"kode_kabkot",label:"Kab/Kota",children:e(g,{allowClear:!0,showSearch:!0,disabled:F,optionFilterProp:"label",options:i,onChange:()=>{a.setFieldsValue({semester:"",nks:""}),n([]),p([])}})}),e(k.Item,{name:"semester",label:"semester",children:e(g,{allowClear:!0,showSearch:!0,optionFilterProp:"label",options:[{label:"Semester I",value:"1",selected:!0}],onChange:()=>{t()}})}),e(k.Item,{name:"nks",label:"NKS",children:e(g,{allowClear:!0,showSearch:!0,optionFilterProp:"label",options:S,onChange:()=>{t(),a.submit()}})}),d(b,{type:"primary",onClick:()=>a.submit(),children:[e(V,{})," Refresh"]})]})})},Q=({data_susenas:a,nks:l,kode_kabkot:n})=>{r.useEffect(()=>{a.length>0&&(c.setFieldsValue({nks:l,kode_kabkot:n,semester:"1"}),m(a))},[]);const[c]=k.useForm(),[y,m]=r.useState([]),[i,v]=K.useMessage(),F=async o=>{console.log({values:o}),i.open({type:"loading",key:"cari",content:"Memuat Data"});try{const t=route("api.entri.mak",o),{data:s}=await f.get(t);console.log({data:s}),m(s.data),i.open({type:"success",key:"cari",content:"Berhasil mengambil data"})}catch{i.open({type:"error",key:"cari",content:"Oops terjadi kesalahan, silahkan hubungi admin"})}},x=async o=>{try{const{data:t}=await f.delete(route("entri.mak.delete",{id_ruta:o}));i.open({content:"Berhasil menghapus 1 anggota rumah tangga",type:"success",key:"hapus-ruta"}),_.get(route("entri",{kode_kabkot:c.getFieldValue("kode_kabkot"),nks:c.getFieldValue("nks")}))}catch(t){i.open({content:`Terjadi galat ketika menghapus data, tunjukan code ini pada Developer (${t})`,type:"error",key:"hapus-ruta",duration:3})}},S=A.throttle(x,2e3),p=[{title:"No",dataIndex:"id",key:"id",render:(o,t,s)=>s+1},{title:"Kecamatan",dataIndex:"kec",key:"kec",render:(o,t)=>`[${t.kode_kec}] ${t.kec}`},{title:"Desa",dataIndex:"desa",key:"desa",render:(o,t)=>`[${t.kode_desa}] ${t.desa}`},{title:"Blok Sensus",dataIndex:"kode_bs4",key:"kode_bs4"},{title:"No Urut Sampel",dataIndex:"r109",key:"r109"},{title:"Nama KRT",dataIndex:"r110",key:"r110"},{title:"Alamat",dataIndex:"r111",key:"r111"},{title:"Entri",dataIndex:"entri",key:"entri",render:(o,t)=>d(b,{type:"primary",onClick:()=>_.get(`${route("entri.mak.edit",{id:t.id})}`),children:[e(L,{})," entri"]})},{title:"Delete",dataIndex:"entri",key:"entri",render:(o,t)=>e(H,{placement:"topLeft",title:"apakah anda yakin akan menghapus ruta ini?",description:"hapus anggota rumah tangga",okText:"yakin dong",cancelText:"nyanda",onConfirm:()=>S(t.id),children:d(b,{type:"primary",style:{backgroundColor:"red"},children:[e(j,{})," hapus"]})})}];return d(E,{children:[v,e($,{title:"Entri Kuesioner Inti"}),d(D,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:[e(J,{setDataSource:m,form:c,onFinish:F}),e(D,{style:{width:"100%",justifyContent:"end"},children:d(b,{type:"primary",disabled:!c.getFieldValue("nks"),onClick:()=>_.visit(route("entri.mak.create")),children:[e(G,{})," Tambah Ruta"]})}),e(N,{dataSource:y,columns:p}),";"]})]})};Q.layout=a=>e(P,{user:a.props.auth.user,header:e("h2",{className:"",children:"Dashboard"}),selectedKey:"entri",children:a});export{Q as default};
