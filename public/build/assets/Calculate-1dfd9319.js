import{r as p,j as i,F as C,a as o,b as P,c as h}from"./app-5488b642.js";import{A as j}from"./AuthenticatedLayout-0604ef72.js";import{S as g}from"./index-5044f9b1.js";import{B as y}from"./index-f5c87f49.js";import{E as B}from"./ExportOutlined-977d79a3.js";import{S as T}from"./SyncOutlined-84ee6b70.js";import{T as A}from"./index-7894210b.js";import"./Sider-c7d462db.js";import"./AntdIcon-54e0d8e3.js";import"./LeftOutlined-4d2db241.js";import"./index-e2f14928.js";import"./useForceUpdate-d6383011.js";import"./responsiveObserver-ffd7fd36.js";import"./EllipsisOutlined-be03f216.js";import"./Overflow-7fa2eed2.js";import"./Keyframes-421582cf.js";import"./useFlexGapSupport-fd3dfe61.js";import"./KeyCode-6413d982.js";import"./EditOutlined-1e0d7ba9.js";import"./index-22a70d2d.js";import"./index-a3685fac.js";import"./Title-0c5d90fc.js";import"./CheckOutlined-d1e320cb.js";import"./styleChecker-ac0d96b1.js";import"./TextArea-196bc487.js";const{Title:L}=A,U=({data:s})=>{const[f,x]=p.useState(0),[m,u]=p.useState(!1);console.log({data:s});const w=async r=>{try{r=r.filter(t=>t.length>10);const e=5,c=5,k=async t=>{const l=t.map(async a=>{const d=route("api.mak.calculate_qc",{id_ruta:a});try{return(await h.get(d)).data}catch(n){return console.error(`Error processing id_ruta ${a}:`,n),null}});return await Promise.all(l)};for(let t=0;t<r.length;t+=e){const l=r.slice(t,t+e),a=await Promise.all(Array.from({length:c},(d,n)=>{const E=n*(e/c),b=(n+1)*(e/c);return k(l.slice(E,b))}));console.log("Results:",a.flat()),x(t)}}catch(e){console.log("Something went wrong",{error:e})}},S=async()=>{try{u(!0);const r=await h.post(route("monitoring.update"))}catch(r){console.log("Something went wrong",{error:r})}finally{u(!1)}};return p.useEffect(()=>{w(s)},[]),i(C,{children:[o(P,{title:"Periksa"}),o(L,{level:2,children:f}),i(g,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:[i(y,{type:"primary",children:[o(B,{}),"Export as CSV"]}),i(y,{type:"primary",onClick:()=>S(),loading:m,children:[m??o(T,{}),"Update Data Monitoring"]})]}),o(g,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical"})]})};U.layout=s=>o(j,{user:s.props.auth.user,header:o("h2",{className:"",children:"Periksa"}),selectedKey:"periksa",children:s});export{U as default};
