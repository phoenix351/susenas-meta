import{r as o,_ as P,a as e,F as w,j as m,c as C,b as A,g as I}from"./app-d4815cab.js";import{A as E}from"./AuthenticatedLayout-4573c1b4.js";import{m as K}from"./index-4ce5ce83.js";import{F as i}from"./index-9f565d71.js";import{S as b}from"./index-292c0cf0.js";import{B as f}from"./index-45adf2db.js";import{R as V}from"./ReloadOutlined-aad36361.js";import{S as v}from"./index-b05efd98.js";import{A as D}from"./AntdIcon-9a15311b.js";import{T as N}from"./Table-dca39530.js";import"./Sider-8e8e5f2a.js";import"./index-3eabea51.js";import"./KeyCode-94c23600.js";import"./index-17f8c862.js";import"./addEventListener-813c4589.js";var $={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};const O=$;var R=function(d,s){return o.createElement(D,P({},d,{ref:s,icon:O}))};const j=o.forwardRef(R),B=({form:t,onFinish:d,setDataSource:s})=>{const[p,g]=K.useMessage(),c=[{label:"[71] SULAWESI UTARA",value:"71"}],[u,y]=o.useState([]);o.useState([]);const[S,x]=o.useState(!0),[r,a]=o.useState([]),n=async()=>{const h=route("api.entri.kabkot"),{data:k}=await C.get(h),F=k.data.map(l=>({label:`[${l.kode_kabkot}] ${l.kabkot}`,value:l.kode_kabkot}));k.kode_kabkot==="00"?x(!1):t.setFieldValue("kode_kabkot",k.kode_kabkot),y(F)},_=async()=>{const h=route("api.entri.nks",{kodeKabkot:t.getFieldValue("kode_kabkot"),semester:t.getFieldValue("semester")}),{data:k}=await C.get(h),F=k.map(l=>({label:l,value:l}));a(F)};return o.useEffect(()=>{try{n(),t.setFieldValue("kode_prov","71")}catch{}},[]),e(w,{children:m(i,{form:t,name:"EntriIntiForm",onFinish:d,autoComplete:"off",style:{width:"300px"},children:[g,e(i.Item,{name:"kode_prov",label:"Provinsi",children:e(b,{allowClear:!0,showSearch:!0,disabled:!0,optionFilterProp:"label",options:c,onClear:()=>{},onChange:()=>{t.setFieldsValue({kode_kabkot:"",semester:"",nks:""}),s([]),a([])}})}),e(i.Item,{name:"kode_kabkot",label:"Kab/Kota",children:e(b,{allowClear:!0,showSearch:!0,disabled:S,optionFilterProp:"label",options:u,onChange:()=>{t.setFieldsValue({semester:"",nks:""}),s([]),a([])}})}),e(i.Item,{name:"semester",label:"semester",children:e(b,{allowClear:!0,showSearch:!0,optionFilterProp:"label",options:[{label:"Semester I",value:"1",selected:!0}],onChange:()=>{_()}})}),e(i.Item,{name:"nks",label:"NKS",children:e(b,{allowClear:!0,showSearch:!0,optionFilterProp:"label",options:r,onChange:()=>{_(),t.submit()}})}),m(f,{type:"primary",onClick:()=>t.submit(),children:[e(V,{})," Refresh"]})]})})},H=({data_susenas:t,nks:d,kode_kabkot:s})=>{o.useEffect(()=>{t.length>0&&(p.setFieldsValue({nks:d,kode_kabkot:s,semester:"1"}),c(t))},[]);const[p]=i.useForm(),[g,c]=o.useState([]),[u,y]=K.useMessage(),S=async r=>{console.log({values:r}),u.open({type:"loading",key:"cari",content:"Memuat Data"});try{const a=route("api.entri.mak",r),{data:n}=await C.get(a);console.log({data:n}),c(n.data),u.open({type:"success",key:"cari",content:"Berhasil mengambil data"})}catch{u.open({type:"error",key:"cari",content:"Oops terjadi kesalahan, silahkan hubungi admin"})}},x=[{title:"No",dataIndex:"id",key:"id",render:(r,a,n)=>n+1},{title:"Kecamatan",dataIndex:"kec",key:"kec",render:(r,a)=>`[${a.kode_kec}] ${a.kec}`},{title:"Desa",dataIndex:"desa",key:"desa",render:(r,a)=>`[${a.kode_desa}] ${a.desa}`},{title:"Blok Sensus",dataIndex:"kode_bs4",key:"kode_bs4"},{title:"No Urut Sampel",dataIndex:"r109",key:"r109"},{title:"Nama KRT",dataIndex:"r110",key:"r110"},{title:"Alamat",dataIndex:"r111",key:"r111"},{title:"Status",dataIndex:"status_dok",key:"status_dok",render:r=>e(f,{children:r})},{title:"Entri",dataIndex:"entri",key:"entri",render:(r,a)=>e(f,{type:"primary",onClick:()=>I.get(`${route("entri.mak.edit",{id:a.id})}`),children:"Entri"})}];return m(w,{children:[y,e(A,{title:"Entri Kuesioner Inti"}),m(v,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:[e(B,{setDataSource:c,form:p,onFinish:S}),e(v,{style:{width:"100%",justifyContent:"end"},children:m(f,{type:"primary",disabled:!p.getFieldValue("nks"),onClick:()=>I.visit(route("entri.mak.create")),children:[e(j,{})," Tambah Ruta"]})}),e(N,{dataSource:g,columns:x}),";"]})]})};H.layout=t=>e(E,{user:t.props.auth.user,header:e("h2",{className:"",children:"Dashboard"}),selectedKey:"entri",children:t});export{H as default};
