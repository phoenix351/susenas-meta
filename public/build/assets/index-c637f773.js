import{r as n,k as T,n as R,C as K,o as j,j as w,a as r,c as C}from"./app-cade510b.js";import{A}from"./AuthenticatedLayout-2e91c2e1.js";import F from"./KomoditasSummaryTable-23a84c3f.js";import $ from"./CardSkeleton-5ae6c15d.js";import{I as L,S as M}from"./index-b9cc14aa.js";import{T as V}from"./Title-821d3901.js";import{m as P}from"./index-b93aae69.js";import{S as D}from"./index-efbdf8f9.js";import{a as B,B as U}from"./index-beeaf8d9.js";import{F as O,R as X,C as _}from"./index-5ce765d1.js";import{S as G}from"./index-f9258c5c.js";import{D as W}from"./index-e3d5dafc.js";import{C as E}from"./index-cb79ba3c.js";import{u as Y}from"./useForceUpdate-a75d9b98.js";import{S as q}from"./Skeleton-5eb8e578.js";import{A as z,g as J,m as Q}from"./AntdIcon-da8305e3.js";import{S as Z}from"./SyncOutlined-79619059.js";import"./Sider-26ba9cdb.js";import"./LeftOutlined-a53789c4.js";import"./index-c911b603.js";import"./responsiveObserver-bed5db2e.js";import"./EllipsisOutlined-7069c36e.js";import"./Overflow-133b988e.js";import"./Keyframes-24838d9a.js";import"./useFlexGapSupport-8646280d.js";import"./KeyCode-6413d982.js";import"./EditOutlined-229e823d.js";import"./index-af8f5ca6.js";import"./Table-675fb605.js";import"./styleChecker-9cc21804.js";import"./pickAttrs-01b563d9.js";import"./addEventListener-61db0605.js";import"./TextArea-9a7525ca.js";import"./CloseCircleFilled-a13e8288.js";import"./Dropdown-531b1aaa.js";import"./CheckOutlined-c54abbe5.js";import"./CloseOutlined-0d8c520e.js";import"./EyeOutlined-a718312b.js";import"./ExclamationCircleFilled-1864351a.js";import"./InfoCircleFilled-7f3ebebf.js";import"./index-f72bb425.js";import"./PlusOutlined-975784f6.js";var ee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M882 272.1V144c0-17.7-14.3-32-32-32H174c-17.7 0-32 14.3-32 32v128.1c-16.7 1-30 14.9-30 31.9v131.7a177 177 0 0014.4 70.4c4.3 10.2 9.6 19.8 15.6 28.9v345c0 17.6 14.3 32 32 32h676c17.7 0 32-14.3 32-32V535a175 175 0 0015.6-28.9c9.5-22.3 14.4-46 14.4-70.4V304c0-17-13.3-30.9-30-31.9zM214 184h596v88H214v-88zm362 656.1H448V736h128v104.1zm234 0H640V704c0-17.7-14.3-32-32-32H416c-17.7 0-32 14.3-32 32v136.1H214V597.9c2.9 1.4 5.9 2.8 9 4 22.3 9.4 46 14.1 70.4 14.1s48-4.7 70.4-14.1c13.8-5.8 26.8-13.2 38.7-22.1.2-.1.4-.1.6 0a180.4 180.4 0 0038.7 22.1c22.3 9.4 46 14.1 70.4 14.1 24.4 0 48-4.7 70.4-14.1 13.8-5.8 26.8-13.2 38.7-22.1.2-.1.4-.1.6 0a180.4 180.4 0 0038.7 22.1c22.3 9.4 46 14.1 70.4 14.1 24.4 0 48-4.7 70.4-14.1 3-1.3 6-2.6 9-4v242.2zm30-404.4c0 59.8-49 108.3-109.3 108.3-40.8 0-76.4-22.1-95.2-54.9-2.9-5-8.1-8.1-13.9-8.1h-.6c-5.7 0-11 3.1-13.9 8.1A109.24 109.24 0 01512 544c-40.7 0-76.2-22-95-54.7-3-5.1-8.4-8.3-14.3-8.3s-11.4 3.2-14.3 8.3a109.63 109.63 0 01-95.1 54.7C233 544 184 495.5 184 435.7v-91.2c0-.3.2-.5.5-.5h655c.3 0 .5.2.5.5v91.2z"}}]},name:"shop",theme:"outlined"};const te=ee;var ae=function(t,e){return n.createElement(z,T({},t,{ref:e,icon:te}))};const oe=n.forwardRef(ae);var ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 312H696v-16c0-101.6-82.4-184-184-184s-184 82.4-184 184v16H192c-17.7 0-32 14.3-32 32v536c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V344c0-17.7-14.3-32-32-32zm-432-16c0-61.9 50.1-112 112-112s112 50.1 112 112v16H400v-16zm392 544H232V384h96v88c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-88h224v88c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-88h96v456z"}}]},name:"shopping",theme:"outlined"};const re=ne;var se=function(t,e){return n.createElement(z,T({},t,{ref:e,icon:re}))};const ie=n.forwardRef(se),ce=a=>{const{value:t,formatter:e,precision:i,decimalSeparator:p,groupSeparator:l="",prefixCls:s}=a;let m;if(typeof e=="function")m=e(t);else{const o=String(t),k=o.match(/^(-?)(\d*)(\.(\d+))?$/);if(!k||o==="-")m=o;else{const f=k[1];let c=k[2]||"0",u=k[4]||"";c=c.replace(/\B(?=(\d{3})+(?!\d))/g,l),typeof i=="number"&&(u=u.padEnd(i,"0").slice(0,i>0?i:0)),u&&(u=`${p}${u}`),m=[n.createElement("span",{key:"int",className:`${s}-content-value-int`},f,c),u&&n.createElement("span",{key:"decimal",className:`${s}-content-value-decimal`},u)]}}return n.createElement("span",{className:`${s}-content-value`},m)},le=ce,me=a=>{const{componentCls:t,marginXXS:e,padding:i,colorTextDescription:p,titleFontSize:l,colorTextHeading:s,contentFontSize:m,fontFamily:o}=a;return{[`${t}`]:Object.assign(Object.assign({},R(a)),{[`${t}-title`]:{marginBottom:e,color:p,fontSize:l},[`${t}-skeleton`]:{paddingTop:i},[`${t}-content`]:{color:s,fontSize:m,fontFamily:o,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:e},[`${t}-content-suffix`]:{marginInlineStart:e}}})}},pe=J("Statistic",a=>{const t=Q(a,{});return[me(t)]},a=>{const{fontSizeHeading3:t,fontSize:e}=a;return{titleFontSize:e,contentFontSize:t}}),de=a=>{const{prefixCls:t,className:e,rootClassName:i,style:p,valueStyle:l,value:s=0,title:m,valueRender:o,prefix:k,suffix:f,loading:c=!1,onMouseEnter:u,onMouseLeave:S,decimalSeparator:y=".",groupSeparator:d=","}=a,{getPrefixCls:h,direction:v}=n.useContext(K),g=h("statistic",t),[b,H]=pe(g),N=n.createElement(le,Object.assign({decimalSeparator:y,groupSeparator:d,prefixCls:g},a,{value:s})),I=j(g,{[`${g}-rtl`]:v==="rtl"},e,i,H);return b(n.createElement("div",{className:I,style:p,onMouseEnter:u,onMouseLeave:S},m&&n.createElement("div",{className:`${g}-title`},m),n.createElement(q,{paragraph:!1,loading:c,className:`${g}-skeleton`},n.createElement("div",{style:l,className:`${g}-content`},k&&n.createElement("span",{className:`${g}-content-prefix`},k),o?o(N):N,f&&n.createElement("span",{className:`${g}-content-suffix`},f)))))},x=de,ue=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function fe(a,t){let e=a;const i=/\[[^\]]*]/g,p=(t.match(i)||[]).map(o=>o.slice(1,-1)),l=t.replace(i,"[]"),s=ue.reduce((o,k)=>{let[f,c]=k;if(o.includes(f)){const u=Math.floor(e/c);return e-=u*c,o.replace(new RegExp(`${f}+`,"g"),S=>{const y=S.length;return u.toString().padStart(y,"0")})}return o},l);let m=0;return s.replace(i,()=>{const o=p[m];return m+=1,o})}function he(a,t){const{format:e=""}=t,i=new Date(a).getTime(),p=Date.now(),l=Math.max(i-p,0);return fe(l,e)}const ke=1e3/30;function ge(a){return new Date(a).getTime()}const ve=a=>{const{value:t,format:e="HH:mm:ss",onChange:i,onFinish:p}=a,l=Y(),s=n.useRef(null),m=()=>{p==null||p(),s.current&&(clearInterval(s.current),s.current=null)},o=()=>{const c=ge(t);c>=Date.now()&&(s.current=setInterval(()=>{l(),i==null||i(c-Date.now()),c<Date.now()&&m()},ke))};n.useEffect(()=>(o(),()=>{s.current&&(clearInterval(s.current),s.current=null)}),[t]);const k=(c,u)=>he(c,Object.assign(Object.assign({},u),{format:e})),f=c=>B(c,{title:void 0});return n.createElement(x,Object.assign({},a,{valueRender:f,formatter:k}))},Se=n.memo(ve);x.Countdown=Se;const ye=a=>{const{placeholder:t="",value:e,prefixCls:i,disabled:p,onChange:l,handleClear:s}=a,m=n.useCallback(o=>{l==null||l(o),o.target.value===""&&(s==null||s())},[l]);return n.createElement(L,{placeholder:t,className:i,value:e,onChange:m,disabled:p,allowClear:!0,prefix:n.createElement(M,null)})},xe=ye,be=()=>{const[a,t]=n.useState([]),[e,i]=n.useState(null),[p,l]=n.useState([]),[s,m]=n.useState(""),[o,k]=P.useMessage(),[f,c]=n.useState(!1);async function u(){try{const{data:d}=await C.get(route("api.wilayah.kabkot"));t(d.data.map(h=>({label:`[${h.kode_kabkot}] ${h.kabkot}`,value:h.kode_kabkot})))}catch(d){console.error("error fetch kabkot",d)}}async function S(d){try{c(!0),o.open({content:"memuat data...",type:"loading",key:"show-summary"});const h=await C.get(route("api.monitoring.rekap_kabkot",{kode_kabkot:d})),v=await C.get(route("api.monitoring.rekap_komoditas",{kode_kabkot:d})),g=h.data,b=v.data;i(g),l(b),o.open({content:"selesai memuat data.",type:"info",key:"show-summary"})}catch(h){o.open({content:"error memuat data.",type:"error",key:"show-summary"}),console.error("error fetch kabkot",h)}finally{c(!1)}}n.useEffect(()=>{u()},[]);async function y(){try{c(!0),o.open({content:"sedang sinkron data, anda bisa lanjut eksplorasi data",type:"loading",key:"sync",duration:0});const{data:d}=await C.get(route("dashboard.update"));c(!1),o.open({content:"Update dashboard selesai",type:"success",key:"sync",duration:2})}catch{o.open({content:"error ketika sinkron data...",type:"error",key:"sync"})}}return w("div",{children:[k,w(D,{direction:"horizontal",align:"center",style:{display:"flex",justifyContent:"space-between"},children:[r(V,{children:"Dashboard"}),r(U,{icon:r(Z,{}),onClick:y,children:"Sync Data"})]}),r(O,{children:r(O.Item,{children:r(G,{options:[...a,{label:"[00] PROVINSI SULAWESI UTARA",value:"00"}],showSearch:!0,showArrow:!0,optionFilterProp:"label",placeholder:"Pilih Kabupaten/Kota",onChange:d=>S(d)})})}),r(W,{}),w(X,{gutter:16,children:[r(_,{span:8,children:r(E,{bordered:!1,children:f?r($,{}):r(x,{title:"Konsumsi Perkapita Perhari (Total)",value:e!=null&&e.konsumsi_perkapita_total?(e.konsumsi_perkapita_total/30).toLocaleString("id-ID"):"-",precision:3,valueStyle:{color:"#000"},prefix:r(ie,{}),suffix:"kalori"})})}),r(_,{span:8,children:r(E,{bordered:!1,children:f?r($,{}):r(x,{title:"Konsumsi Perkapita Perhari (Basket Komoditas)",value:e!=null&&e.konsumsi_perkapita_basket_komoditas?(e.konsumsi_perkapita_basket_komoditas/30).toLocaleString("id-ID"):"-",precision:3,valueStyle:{color:"#3f8600"},prefix:r(oe,{}),suffix:"kalori"})})}),r(_,{span:8,children:r(E,{bordered:!1,children:f?r($,{}):r(x,{title:"Garis Kemiskinan Sementara",value:e!=null&&e.garis_kemiskinan?e.garis_kemiskinan.toLocaleString("id-ID"):"-",precision:3,valueStyle:{color:"#3f8600"},prefix:"Rp ",suffix:""})})})]}),r(D,{direction:"vertical",style:{display:"block",marginTop:20},children:r(xe,{placeholder:"Cari berdasarkan nama atau kelompok komoditas",onChange:d=>{const h=d.target.value;m(h)}})}),r(F,{dataSource:p.filter(d=>{let h=d.nama_kelompok.toLowerCase(),v=d.nama_komoditas.toLowerCase();const g=`${h} ${v}`;return`${v} ${h}`.includes(s)||g.includes(s)}),loadingData:f})]})};be.layout=a=>r(A,{user:a.props.auth.user,header:r("h2",{className:"",children:"index"}),selectedKey:"dashboard",children:a});export{be as default};
