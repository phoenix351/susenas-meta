import{r as p,j as i,F as C,a as o,b as P,c as h}from"./app-594863b6.js";import{A as j}from"./AuthenticatedLayout-231fcac0.js";import{S as g}from"./index-a6fc668a.js";import{B as y}from"./index-04d30823.js";import{E as B}from"./ExportOutlined-a0915778.js";import{S as T}from"./SyncOutlined-6b3baa28.js";import{T as A}from"./index-c4629e43.js";import"./Sider-dec78fca.js";import"./AntdIcon-175e4fcc.js";import"./LeftOutlined-64be42a7.js";import"./index-9f703954.js";import"./useForceUpdate-6e0d1c94.js";import"./responsiveObserver-358d8654.js";import"./EllipsisOutlined-be96201e.js";import"./Overflow-9030fe5e.js";import"./Keyframes-65d81fe9.js";import"./useFlexGapSupport-d518330e.js";import"./KeyCode-6413d982.js";import"./EditOutlined-07cea508.js";import"./index-695b4647.js";import"./index-7ac5cd43.js";import"./Title-c3ea1799.js";import"./CheckOutlined-eae11d92.js";import"./styleChecker-3b719b20.js";import"./TextArea-77b1be0c.js";const{Title:L}=A,U=({data:s})=>{const[f,x]=p.useState(0),[m,u]=p.useState(!1);console.log({data:s});const w=async r=>{try{r=r.filter(t=>t.length>10);const e=5,c=5,k=async t=>{const l=t.map(async a=>{const d=route("api.mak.calculate_qc",{id_ruta:a});try{return(await h.get(d)).data}catch(n){return console.error(`Error processing id_ruta ${a}:`,n),null}});return await Promise.all(l)};for(let t=0;t<r.length;t+=e){const l=r.slice(t,t+e),a=await Promise.all(Array.from({length:c},(d,n)=>{const E=n*(e/c),b=(n+1)*(e/c);return k(l.slice(E,b))}));console.log("Results:",a.flat()),x(t)}}catch(e){console.log("Something went wrong",{error:e})}},S=async()=>{try{u(!0);const r=await h.post(route("monitoring.update"))}catch(r){console.log("Something went wrong",{error:r})}finally{u(!1)}};return p.useEffect(()=>{w(s)},[]),i(C,{children:[o(P,{title:"Periksa"}),o(L,{level:2,children:f}),i(g,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:[i(y,{type:"primary",children:[o(B,{}),"Export as CSV"]}),i(y,{type:"primary",onClick:()=>S(),loading:m,children:[m??o(T,{}),"Update Data Monitoring"]})]}),o(g,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical"})]})};U.layout=s=>o(j,{user:s.props.auth.user,header:o("h2",{className:"",children:"Periksa"}),selectedKey:"periksa",children:s});export{U as default};
