import{r as c,j as i,F as _,a,b as N,c as D}from"./app-cade510b.js";import{A as E}from"./AuthenticatedLayout-2e91c2e1.js";import{c as m}from"./ColumnSorter-93532ebd.js";import{T as B}from"./index-f72bb425.js";import{S as u}from"./index-efbdf8f9.js";import{B as I}from"./index-beeaf8d9.js";import{T as S}from"./Table-675fb605.js";import{T as P}from"./index-821a731c.js";import{E as v}from"./ExportOutlined-ea482430.js";import"./Sider-26ba9cdb.js";import"./AntdIcon-da8305e3.js";import"./LeftOutlined-a53789c4.js";import"./index-c911b603.js";import"./useForceUpdate-a75d9b98.js";import"./responsiveObserver-bed5db2e.js";import"./EllipsisOutlined-7069c36e.js";import"./Overflow-133b988e.js";import"./Keyframes-24838d9a.js";import"./useFlexGapSupport-8646280d.js";import"./KeyCode-6413d982.js";import"./EditOutlined-229e823d.js";import"./index-e3d5dafc.js";import"./index-af8f5ca6.js";import"./CloseOutlined-0d8c520e.js";import"./PlusOutlined-975784f6.js";import"./Dropdown-531b1aaa.js";import"./styleChecker-9cc21804.js";import"./pickAttrs-01b563d9.js";import"./addEventListener-61db0605.js";import"./index-f9258c5c.js";import"./TextArea-9a7525ca.js";import"./CloseCircleFilled-a13e8288.js";import"./CheckOutlined-c54abbe5.js";import"./index-b9cc14aa.js";import"./EyeOutlined-a718312b.js";import"./Title-821d3901.js";const{Title:j}=P,w=(o,g)=>{const k=o.map(d=>d.title).join(";")+`
`+g.map(d=>o.map(n=>{if(n.render){const s=n.render(d[n.dataIndex],d);return s&&s.props?s.props.children:s}else return d[n.dataIndex]}).join(";")).join(`
`),x=new Blob([k],{type:"text/csv"}),r=document.createElement("a");r.href=URL.createObjectURL(x),r.download="export.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r)},L=()=>{const[o,g]=c.useState([]),[k,x]=c.useState([]),[r,d]=c.useState([]),[n,s]=c.useState(!1);c.useEffect(()=>{(async()=>{s(!0);try{const e=await D.get(route("api.monitoring.rekap_kabkot"));x(e.data.rekap_kabkot??[]);const l=await D.get(route("api.monitoring.rekap_nks"));g(l.data.rekap_nks??[]);const p=await D.get(route("api.monitoring.rekap_user"));d(p.data.rekap_user??[]),console.log({response_kabkot:e,response_user:p,response_nks:l})}catch(e){console.log("something went wrong: ",{error:e})}finally{s(!1)}})()},[]);const b=m("jumlah_dok"),F=m("jumlah_dokumen"),h=m("dok_clean"),y=m("dok_warning"),f=m("dok_error"),K=m("nks"),C=[{title:"Kabupaten",dataIndex:"kabupaten",key:"kabupaten",filters:k.map(t=>({text:`[${t.kode_prov}${t.kode_kabkot}] ${t.kabkot}`,value:t.kode_kabkot})),onFilter:(t,e)=>e.kode_kabkot===t,render:(t,e)=>`[${e.kode_prov}${e.kode_kabkot}] ${e.kabkot}`},{title:"NKS",dataIndex:"nks",key:"nks",render:(t,e)=>`${e.nks}`,sorter:K},{title:"Target Dokumen",dataIndex:"target_dok",key:"target_dok",render:()=>10},{title:"Jumlah Dokumen Dientri",dataIndex:"jumlah_dok",key:"jumlah_dok",sorter:b},{title:"Dokumen Clean",dataIndex:"dok_clean",key:"dok_clean",sorter:h},{title:"Dokumen Warning",dataIndex:"dok_warning",key:"dok_warning",sorter:y},{title:"Dokumen Error",dataIndex:"dok_error",key:"dok_error",sorter:f},{title:"% clean",dataIndex:"persentase",key:"persentase",sorter:(t,e)=>{const l=(Number(t.dok_clean)/10*100).toFixed(2),p=(Number(e.dok_clean)/10*100).toFixed(2);return parseFloat(l)-parseFloat(p)},render:(t,e)=>`${(Number(e.dok_clean)/10*100).toFixed(2)} %`}],$=[{title:"Kabupaten",dataIndex:"kabupaten",key:"kabupaten",render:(t,e)=>`[${e.kode_prov}${e.kode_kabkot}] ${e.kabkot}`},{title:"Target Dokumen",dataIndex:"target_dok",key:"target_dok",render:(t,e)=>e.target_nks*10},{title:"Jumlah Dokumen Dientri",dataIndex:"jumlah_dok",key:"jumlah_dok",sorter:b},{title:"Dokumen Clean",dataIndex:"dok_clean",key:"dok_clean",sorter:h},{title:"Dokumen Warning",dataIndex:"dok_warning",key:"dok_warning",sorter:y},{title:"Dokumen Error",dataIndex:"dok_error",key:"dok_error",sorter:f},{title:"%clean",dataIndex:"persentase",key:"persentase",sorter:(t,e)=>{const l=(Number(t.dok_clean)/t.target_nks*100).toFixed(2),p=(Number(e.dok_clean)/e.target_nks*100).toFixed(2);return parseFloat(l)-parseFloat(p)},render:(t,e)=>`${(Number(e.dok_clean)/e.target_nks/10*100).toFixed(2)} %`}],T=[{title:"Kabupaten",dataIndex:"kode_kabkot",key:"kabupaten",render:(t,e)=>`[71${e.kode_kabkot}] ${e.kabkot}`,filters:k.map(t=>({text:`[${t.kode_prov}${t.kode_kabkot}] ${t.kabkot}`,value:t.kode_kabkot})),onFilter:(t,e)=>e.kode_kabkot===t},{title:"Nama Lengkap",dataIndex:"nama_lengkap",key:"nama_lengkap"},{title:"Username",dataIndex:"username",key:"username"},{title:"Jumlah Dokumen Dientri",dataIndex:"jumlah_dokumen",key:"jumlah_dokumen",sorter:F},{title:"Dokumen Clean",dataIndex:"dok_clean",key:"dok_clean",sorter:h},{title:"Dokumen Warning",dataIndex:"dok_warning",key:"dok_warning",sorter:y},{title:"Dokumen Error",dataIndex:"dok_error",key:"dok_error",sorter:f}];return i(_,{children:[a(N,{title:"Dashboard"}),a(B,{style:{backgroundColor:"#fff",padding:"10px"},items:[{label:"Progress per Kabupaten/Kota",key:"1",children:i(_,{children:[i(j,{level:2,children:["Progress pendataan menurut Kabupaten/Kota"," "]}),a(u,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:i(I,{type:"primary",onClick:()=>w($,k),children:[a(v,{}),"Export as CSV"]})}),a(u,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px",marginBottom:"30px"},direction:"vertical",children:a(S,{columns:$,pagination:{pageSize:20,hideOnSinglePage:!0},loading:{spinning:n,tip:"memuat data..."},dataSource:k,scroll:{x:"100%"}})})]})},{label:"Progress per NKS",key:"2",children:i(_,{children:[a(j,{level:2,children:"Progress pendataan menurut NKS "}),a(u,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:i(I,{type:"primary",onClick:()=>w(C,o),children:[a(v,{}),"Export as CSV"]})}),a(u,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:a(S,{columns:C,loading:{spinning:n,tip:"memuat data..."},dataSource:o,scroll:{x:"100%"}})})]})},{label:"Progress per PML",key:"3",children:i(_,{children:[a(j,{level:2,children:"Progress pendataan menurut PML "}),a(u,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:i(I,{type:"primary",onClick:()=>w(T,r),children:[a(v,{}),"Export as CSV"]})}),a(u,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:a(S,{columns:T,loading:{spinning:n,tip:"memuat data..."},dataSource:r,scroll:{x:"100%"}})})]})}]})]})};L.layout=o=>a(E,{user:o.props.auth.user,header:a("h2",{className:"",children:"Dashboard"}),selectedKey:"dashboard",children:o});export{L as default};
