import{r as n,_ as S,j as l,F as H,a as e,c as h}from"./app-54bba900.js";import{A as C,E as K}from"./AuthenticatedLayout-630bc9da.js";import{R as f}from"./RupiahInput-5fc16d9a.js";import{F as i}from"./index-8da74228.js";import{B as d}from"./TextArea-9ac0aa49.js";import{A}from"./AntdIcon-71a17da6.js";import{I as E}from"./index-e8a5f194.js";import{S as g}from"./index-689e26bf.js";import{S as R}from"./index-7988c5ce.js";import{T as B}from"./Table-8b77b588.js";import"./Sider-ba01838b.js";import"./index-1cd3745d.js";import"./KeyCode-6413d982.js";import"./index-5271d5fd.js";import"./debounce-f54583b8.js";import"./index-82a29645.js";import"./addEventListener-8ec56d01.js";import"./CheckOutlined-e032d51b.js";import"./CloseOutlined-57ac73b0.js";var D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880.1 154H143.9c-24.5 0-39.8 26.7-27.5 48L349 597.4V838c0 17.7 14.2 32 31.8 32h262.4c17.6 0 31.8-14.3 31.8-32V597.4L907.7 202c12.2-21.3-3.1-48-27.6-48zM603.4 798H420.6V642h182.9v156zm9.6-236.6l-9.5 16.6h-183l-9.5-16.6L212.7 226h598.6L613 561.4z"}}]},name:"filter",theme:"outlined"};const L=D;var M=function(s,k){return n.createElement(A,S({},s,{ref:k,icon:L}))};const O=n.forwardRef(M),v=({kelompok:o,kabkot:s})=>{const[k,u]=n.useState([]),[_,m]=n.useState(!1),[p,b]=n.useState(!1),[r]=i.useForm(),x=async()=>{m(!0);let{data:a}=await h.get(route("range_harga.fetch"));a=a.map(({id_komoditas:t,min:c,max:F,kode_kabkot:w,komoditas:I})=>({komoditas_id:t,min:c,max:F,kode_kabkot:w,komoditas:I})),u(a),m(!1)};n.useEffect(()=>{x(),r.setFieldsValue({nama_komoditas:"beras",kelompok_id:0,kode_kabkot:"02",min:1e3,max:1e5})},[]);const y=[{title:"Komoditas",dataIndex:"komoditas.nama_komoditas",key:"komoditas.nama_komoditas",render:(a,t)=>t.komoditas.nama_komoditas},{title:"Kelompok",dataIndex:"komoditas.nama_kelompok",key:"komoditas.nama_kelompok",render:(a,t)=>t.komoditas.nama_kelompok},{title:"Kabupaten/Kota",dataIndex:"kode_kabkot",key:"kode_kabkot"},{title:"Harga Minimum",dataIndex:"min",key:"min"},{title:"Harga Maksimum",dataIndex:"max",key:"max"},{title:"Kalori",dataIndex:"komoditas.kalori",key:"komoditas.kalori",render:(a,t)=>t.komoditas.kalori},{title:"Aksi",key:"aksi",dataIndex:"aksi",render:(a,t)=>l(d,{onClick:()=>V(t.komoditas_id),children:[e(K,{})," Ubah"]})}];return l(H,{children:[l(d,{onClick:()=>b(!p),style:{marginBottom:p?0:20},children:[e(O,{})," Filter Data"]}),l(i,{form:r,layout:"vertical",style:{width:400,margin:"20px 0px 20px 0px",backgroundColor:"#fff",padding:20,borderRadius:20,display:p?"":"none"},onFinish:async a=>{m(!0);let t={nama_komoditas:a.nama_komoditas,kode_kabkot:a.kode_kabkot,min:a.min,max:a.max,id_kelompok:a.kelompok_id};const{data:c}=await h.get(route("range_harga.fetch"),{params:t});u(c),m(!1)},onKeyDown:a=>{a.code==="Enter"&&r.submit()},children:[e(i.Item,{label:"Komoditas",name:"nama_komoditas",style:{marginBottom:"4px"},children:e(E,{placeholder:"Kopi Luwak",allowClear:!0})}),e(i.Item,{label:"kelompok",name:"kelompok_id",style:{marginBottom:"4px"},children:e(g,{allowClear:!0,showSearch:!0,showArrow:!0,optionFilterProp:"label",options:o.map(a=>({label:a.nama_kelompok,value:a.id_kelompok}))})}),e(i.Item,{label:"kabupaten/kota",name:"kode_kabkot",style:{marginBottom:"4px"},children:e(g,{allowClear:!0,showSearch:!0,showArrow:!0,optionFilterProp:"label",options:s.map(a=>({label:`[${a.kode_kabkot}] ${a.kabkot}`,value:a.kode_kabkot}))})}),e(f,{label:"Harga Minimum",inputName:"min"}),e(f,{label:"Harga Maksimum",inputName:"max"}),e(i.Item,{children:l(R,{children:[e(d,{type:"primary",onClick:()=>r.submit(),children:"Apply"}),e(d,{type:"default",onClick:()=>{r.resetFields(),r.submit()},children:"Clear"})]})})]}),e(B,{dataSource:k,columns:y,loading:_})]})};v.layout=o=>e(C,{user:o.props.auth.user,header:e("h2",{className:"",children:"Kelola Range Harga"}),selectedKey:"range_harga",children:o});function V(o){throw new Error("Function not implemented.")}export{v as default};
