import{r as p,j as l,F as x,a as t,b as N}from"./app-5d0b70f5.js";import{A as F}from"./AuthenticatedLayout-f75216ef.js";import{T as E}from"./index-76d82c3f.js";import{S as m}from"./index-8ca95db8.js";import{B as v}from"./index-65c35e7d.js";import{E as I}from"./ExportOutlined-77687a4b.js";import{T as S}from"./Table-ccdbe276.js";import{T as $}from"./index-c95c3c31.js";import"./Sider-6188eb25.js";import"./AntdIcon-fa0127d1.js";import"./index-8056d16e.js";import"./KeyCode-dbe0232e.js";import"./index-a9241260.js";import"./index-c0f70985.js";import"./addEventListener-ce52f1f6.js";const{Title:C}=$;function c(r){return(s,i,d)=>{const o=s[r]!==void 0?Number(s[r]):0,n=i[r]!==void 0?Number(i[r]):0;return d==="ascend"?o-n:d==="descend"?n-o:0}}const j=(r,s)=>{const i=r.map(n=>n.title).join(";")+`
`+s.map(n=>r.map(k=>{if(k.render){const u=k.render(n[k.dataIndex],n);return u&&u.props?u.props.children:u}else return n[k.dataIndex]}).join(";")).join(`
`),d=new Blob([i],{type:"text/csv"}),o=document.createElement("a");o.href=URL.createObjectURL(d),o.download="export.csv",document.body.appendChild(o),o.click(),document.body.removeChild(o)},B=({data:r,rekap_kabkot:s,users:i})=>{const[d,o]=p.useState([]),[n,k]=p.useState([]),[u,T]=p.useState([]);p.useEffect(()=>{console.log({rekap_kabkot:s}),o(r),k(s),T(i)},[]);const _=c("jumlah_dok"),b=c("dok_clean"),h=c("dok_warning"),g=c("dok_error"),K=c("nks"),y=[{title:"Kabupaten",dataIndex:"kabupaten",key:"kabupaten",filters:n.map(a=>({text:`[${a.kode_prov}${a.kode_kabkot}] ${a.kabkot}`,value:a.kode_kabkot})),onFilter:(a,e)=>e.kode_kabkot===a,render:(a,e)=>`[${e.kode_prov}${e.kode_kabkot}] ${e.kabkot}`},{title:"NKS",dataIndex:"nks",key:"nks",render:(a,e)=>`${e.nks}`,sorter:K},{title:"Target Dokumen",dataIndex:"target_dok",key:"target_dok",render:()=>10},{title:"Jumlah Dokumen Dientri",dataIndex:"jumlah_dok",key:"jumlah_dok",sorter:_},{title:"Dokumen Clean",dataIndex:"dok_clean",key:"dok_clean",sorter:b},{title:"Dokumen Warning",dataIndex:"dok_warning",key:"dok_warning",sorter:h},{title:"Dokumen Error",dataIndex:"dok_error",key:"dok_error",sorter:g},{title:"% clean",dataIndex:"persentase",key:"persentase",sorter:(a,e)=>{const f=(Number(a.dok_clean)/10*100).toFixed(2),D=(Number(e.dok_clean)/10*100).toFixed(2);return parseFloat(f)-parseFloat(D)},render:(a,e)=>`${(Number(e.dok_clean)/10*100).toFixed(2)} %`}],w=[{title:"Kabupaten",dataIndex:"kabupaten",key:"kabupaten",render:(a,e)=>`[${e.kode_prov}${e.kode_kabkot}] ${e.kabkot}`},{title:"Target Dokumen",dataIndex:"target_dok",key:"target_dok",render:(a,e)=>e.target_nks*10},{title:"Jumlah Dokumen Dientri",dataIndex:"jumlah_dok",key:"jumlah_dok",sorter:_},{title:"Dokumen Clean",dataIndex:"dok_clean",key:"dok_clean",sorter:b},{title:"Dokumen Warning",dataIndex:"dok_warning",key:"dok_warning",sorter:h},{title:"Dokumen Error",dataIndex:"dok_error",key:"dok_error",sorter:g},{title:"%clean",dataIndex:"persentase",key:"persentase",sorter:(a,e)=>{const f=(Number(a.dok_clean)/10*100).toFixed(2),D=(Number(e.dok_clean)/10*100).toFixed(2);return parseFloat(f)-parseFloat(D)},render:(a,e)=>`${(Number(e.dok_clean)/e.target_nks/10*100).toFixed(2)} %`}];return l(x,{children:[t(N,{title:"Dashboard"}),t(E,{style:{backgroundColor:"#fff",padding:"10px"},items:[{label:"Progress per Kabupaten/Kota",key:"1",children:l(x,{children:[l(C,{level:2,children:["Progress pendataan menurut Kabupaten/Kota"," "]}),t(m,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:l(v,{type:"primary",onClick:()=>j(w,n),children:[t(I,{}),"Export as CSV"]})}),t(m,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px",marginBottom:"30px"},direction:"vertical",children:t(S,{columns:w,dataSource:n,scroll:{x:"100%"}})})]})},{label:"Progress per NKS",key:"2",children:l(x,{children:[t(C,{level:2,children:"Progress pendataan menurut NKS "}),t(m,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:l(v,{type:"primary",onClick:()=>j(y,d),children:[t(I,{}),"Export as CSV"]})}),t(m,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:t(S,{columns:y,dataSource:d,scroll:{x:"100%"}})})]})},{label:"Progress per PML",key:"3",children:l(x,{children:[t(C,{level:2,children:"Progress pendataan menurut PML "}),t(m,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:l(v,{type:"primary",onClick:()=>j(y,d),children:[t(I,{}),"Export as CSV"]})}),t(m,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:t(S,{columns:[{title:"Kabupaten",dataIndex:"kode_kabkot",key:"kabupaten"},{title:"Nama Lengkap",dataIndex:"nama_lengkap",key:"nama_lengkap"},{title:"Username",dataIndex:"username",key:"username"},{title:"Jumlah Dokumen Dientri",dataIndex:"jumlah_dokumen",key:"jumlah_dokumen",sorter:_},{title:"Dokumen Clean",dataIndex:"dok_clean",key:"dok_clean",sorter:b},{title:"Dokumen Warning",dataIndex:"dok_warning",key:"dok_warning",sorter:h},{title:"Dokumen Error",dataIndex:"dok_error",key:"dok_error",sorter:g}],dataSource:u,scroll:{x:"100%"}})})]})}]})]})};B.layout=r=>t(F,{user:r.props.auth.user,header:t("h2",{className:"",children:"Dashboard"}),selectedKey:"dashboard",children:r});export{B as default};
