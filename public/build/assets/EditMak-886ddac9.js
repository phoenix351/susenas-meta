import{e as Y,r as s,C as ie,o as Re,_ as Pe,f as Qe,a as t,j as c,c as z,F as X,b as Xe,g as Ie}from"./app-5d0b70f5.js";import{D as Ze,A as et}from"./AuthenticatedLayout-f75216ef.js";import{_ as ne,M as xe,A as tt,S as at,B as nt}from"./Blok1_2-abea327b.js";import{F as T}from"./index-3ba58409.js";import{I as ke}from"./index-a1ca54e6.js";import{T as H}from"./TextRupiah-49184a29.js";import{K as it,I as ee,B as te}from"./index-65c35e7d.js";import{S as w}from"./index-8ca95db8.js";import{T as oe}from"./index-c95c3c31.js";import{g as ot,m as lt,A as Le}from"./AntdIcon-fa0127d1.js";import{m as ce}from"./index-78ba8854.js";import{T as pe}from"./index-76d82c3f.js";import{l as rt}from"./lodash-46a9d5dc.js";import{S as Fe,T as we}from"./Table-ccdbe276.js";import{P as st,R as He}from"./ReloadOutlined-f4d732a1.js";import{M as dt}from"./Modal-89e5a4c1.js";import"./Sider-6188eb25.js";import"./index-8056d16e.js";import"./KeyCode-dbe0232e.js";import"./index-a9241260.js";import"./index-c0f70985.js";import"./addEventListener-ce52f1f6.js";import"./index-b23edf64.js";import"./index-41da9b3a.js";const ct=e=>{const{prefixCls:a,className:i,style:o,size:l,shape:r}=e,u=Y({[`${a}-lg`]:l==="large",[`${a}-sm`]:l==="small"}),d=Y({[`${a}-circle`]:r==="circle",[`${a}-square`]:r==="square",[`${a}-round`]:r==="round"}),n=s.useMemo(()=>typeof l=="number"?{width:l,height:l,lineHeight:`${l}px`}:{},[l]);return s.createElement("span",{className:Y(a,u,d,i),style:Object.assign(Object.assign({},n),o)})},ge=ct,ut=new it("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),be=e=>({height:e,lineHeight:`${e}px`}),ae=e=>Object.assign({width:e},be(e)),mt=e=>({background:e.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:ut,animationDuration:e.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),ye=e=>Object.assign({width:e*5,minWidth:e*5},be(e)),pt=e=>{const{skeletonAvatarCls:a,gradientFromColor:i,controlHeight:o,controlHeightLG:l,controlHeightSM:r}=e;return{[`${a}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:i},ae(o)),[`${a}${a}-circle`]:{borderRadius:"50%"},[`${a}${a}-lg`]:Object.assign({},ae(l)),[`${a}${a}-sm`]:Object.assign({},ae(r))}},ht=e=>{const{controlHeight:a,borderRadiusSM:i,skeletonInputCls:o,controlHeightLG:l,controlHeightSM:r,gradientFromColor:u}=e;return{[`${o}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:u,borderRadius:i},ye(a)),[`${o}-lg`]:Object.assign({},ye(l)),[`${o}-sm`]:Object.assign({},ye(r))}},Te=e=>Object.assign({width:e},be(e)),kt=e=>{const{skeletonImageCls:a,imageSizeBase:i,gradientFromColor:o,borderRadiusSM:l}=e;return{[`${a}`]:Object.assign(Object.assign({display:"flex",alignItems:"center",justifyContent:"center",verticalAlign:"top",background:o,borderRadius:l},Te(i*2)),{[`${a}-path`]:{fill:"#bfbfbf"},[`${a}-svg`]:Object.assign(Object.assign({},Te(i)),{maxWidth:i*4,maxHeight:i*4}),[`${a}-svg${a}-svg-circle`]:{borderRadius:"50%"}}),[`${a}${a}-circle`]:{borderRadius:"50%"}}},_e=(e,a,i)=>{const{skeletonButtonCls:o}=e;return{[`${i}${o}-circle`]:{width:a,minWidth:a,borderRadius:"50%"},[`${i}${o}-round`]:{borderRadius:a}}},Ae=e=>Object.assign({width:e*2,minWidth:e*2},be(e)),gt=e=>{const{borderRadiusSM:a,skeletonButtonCls:i,controlHeight:o,controlHeightLG:l,controlHeightSM:r,gradientFromColor:u}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[`${i}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:u,borderRadius:a,width:o*2,minWidth:o*2},Ae(o))},_e(e,o,i)),{[`${i}-lg`]:Object.assign({},Ae(l))}),_e(e,l,`${i}-lg`)),{[`${i}-sm`]:Object.assign({},Ae(r))}),_e(e,r,`${i}-sm`))},bt=e=>{const{componentCls:a,skeletonAvatarCls:i,skeletonTitleCls:o,skeletonParagraphCls:l,skeletonButtonCls:r,skeletonInputCls:u,skeletonImageCls:d,controlHeight:n,controlHeightLG:k,controlHeightSM:v,gradientFromColor:K,padding:O,marginSM:E,borderRadius:h,titleHeight:M,blockRadius:I,paragraphLiHeight:m,controlHeightXS:p,paragraphMarginTop:_}=e;return{[`${a}`]:{display:"table",width:"100%",[`${a}-header`]:{display:"table-cell",paddingInlineEnd:O,verticalAlign:"top",[`${i}`]:Object.assign({display:"inline-block",verticalAlign:"top",background:K},ae(n)),[`${i}-circle`]:{borderRadius:"50%"},[`${i}-lg`]:Object.assign({},ae(k)),[`${i}-sm`]:Object.assign({},ae(v))},[`${a}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[`${o}`]:{width:"100%",height:M,background:K,borderRadius:I,[`+ ${l}`]:{marginBlockStart:v}},[`${l}`]:{padding:0,"> li":{width:"100%",height:m,listStyle:"none",background:K,borderRadius:I,"+ li":{marginBlockStart:p}}},[`${l}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${a}-content`]:{[`${o}, ${l} > li`]:{borderRadius:h}}},[`${a}-with-avatar ${a}-content`]:{[`${o}`]:{marginBlockStart:E,[`+ ${l}`]:{marginBlockStart:_}}},[`${a}${a}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},gt(e)),pt(e)),ht(e)),kt(e)),[`${a}${a}-block`]:{width:"100%",[`${r}`]:{width:"100%"},[`${u}`]:{width:"100%"}},[`${a}${a}-active`]:{[`
        ${o},
        ${l} > li,
        ${i},
        ${r},
        ${u},
        ${d}
      `]:Object.assign({},mt(e))}}},le=ot("Skeleton",e=>{const{componentCls:a}=e,i=lt(e,{skeletonAvatarCls:`${a}-avatar`,skeletonTitleCls:`${a}-title`,skeletonParagraphCls:`${a}-paragraph`,skeletonButtonCls:`${a}-button`,skeletonInputCls:`${a}-input`,skeletonImageCls:`${a}-image`,imageSizeBase:e.controlHeight*1.5,borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${e.gradientFromColor} 25%, ${e.gradientToColor} 37%, ${e.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[bt(i)]},e=>{const{colorFillContent:a,colorFill:i}=e,o=a,l=i;return{color:o,colorGradientEnd:l,gradientFromColor:o,gradientToColor:l,titleHeight:e.controlHeight/2,blockRadius:e.borderRadiusSM,paragraphMarginTop:e.marginLG+e.marginXXS,paragraphLiHeight:e.controlHeight/2}},{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),yt=e=>{const{prefixCls:a,className:i,rootClassName:o,active:l,shape:r="circle",size:u="default"}=e,{getPrefixCls:d}=s.useContext(ie),n=d("skeleton",a),[k,v]=le(n),K=Re(e,["prefixCls","className"]),O=Y(n,`${n}-element`,{[`${n}-active`]:l},i,o,v);return k(s.createElement("div",{className:O},s.createElement(ge,Object.assign({prefixCls:`${n}-avatar`,shape:r,size:u},K))))},_t=yt,At=e=>{const{prefixCls:a,className:i,rootClassName:o,active:l,block:r=!1,size:u="default"}=e,{getPrefixCls:d}=s.useContext(ie),n=d("skeleton",a),[k,v]=le(n),K=Re(e,["prefixCls"]),O=Y(n,`${n}-element`,{[`${n}-active`]:l,[`${n}-block`]:r},i,o,v);return k(s.createElement("div",{className:O},s.createElement(ge,Object.assign({prefixCls:`${n}-button`,size:u},K))))},ft=At;var St={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM288 604a64 64 0 10128 0 64 64 0 10-128 0zm118-224a48 48 0 1096 0 48 48 0 10-96 0zm158 228a96 96 0 10192 0 96 96 0 10-192 0zm148-314a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"dot-chart",theme:"outlined"};const Nt=St;var vt=function(a,i){return s.createElement(Le,Pe({},a,{ref:i,icon:Nt}))};const $t=s.forwardRef(vt),Rt=e=>{const{prefixCls:a,className:i,rootClassName:o,style:l,active:r,children:u}=e,{getPrefixCls:d}=s.useContext(ie),n=d("skeleton",a),[k,v]=le(n),K=Y(n,`${n}-element`,{[`${n}-active`]:r},v,i,o),O=u??s.createElement($t,null);return k(s.createElement("div",{className:K},s.createElement("div",{className:Y(`${n}-image`,i),style:l},O)))},Ct=Rt,Et="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",It=e=>{const{prefixCls:a,className:i,rootClassName:o,style:l,active:r}=e,{getPrefixCls:u}=s.useContext(ie),d=u("skeleton",a),[n,k]=le(d),v=Y(d,`${d}-element`,{[`${d}-active`]:r},i,o,k);return n(s.createElement("div",{className:v},s.createElement("div",{className:Y(`${d}-image`,i),style:l},s.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${d}-image-svg`},s.createElement("path",{d:Et,className:`${d}-image-path`})))))},xt=It,wt=e=>{const{prefixCls:a,className:i,rootClassName:o,active:l,block:r,size:u="default"}=e,{getPrefixCls:d}=s.useContext(ie),n=d("skeleton",a),[k,v]=le(n),K=Re(e,["prefixCls"]),O=Y(n,`${n}-element`,{[`${n}-active`]:l,[`${n}-block`]:r},i,o,v);return k(s.createElement("div",{className:O},s.createElement(ge,Object.assign({prefixCls:`${n}-input`,size:u},K))))},Tt=wt,Kt=e=>{const a=d=>{const{width:n,rows:k=2}=e;if(Array.isArray(n))return n[d];if(k-1===d)return n},{prefixCls:i,className:o,style:l,rows:r}=e,u=Qe(Array(r)).map((d,n)=>s.createElement("li",{key:n,style:{width:a(n)}}));return s.createElement("ul",{className:Y(i,o),style:l},u)},Bt=Kt,Mt=e=>{let{prefixCls:a,className:i,width:o,style:l}=e;return s.createElement("h3",{className:Y(a,i),style:Object.assign({width:o},l)})},Ot=Mt;function fe(e){return e&&typeof e=="object"?e:{}}function jt(e,a){return e&&!a?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function Vt(e,a){return!e&&a?{width:"38%"}:e&&a?{width:"50%"}:{}}function Pt(e,a){const i={};return(!e||!a)&&(i.width="61%"),!e&&a?i.rows=3:i.rows=2,i}const re=e=>{const{prefixCls:a,loading:i,className:o,rootClassName:l,style:r,children:u,avatar:d=!1,title:n=!0,paragraph:k=!0,active:v,round:K}=e,{getPrefixCls:O,direction:E}=s.useContext(ie),h=O("skeleton",a),[M,I]=le(h);if(i||!("loading"in e)){const m=!!d,p=!!n,_=!!k;let x;if(m){const F=Object.assign(Object.assign({prefixCls:`${h}-avatar`},jt(p,_)),fe(d));x=s.createElement("div",{className:`${h}-header`},s.createElement(ge,Object.assign({},F)))}let j;if(p||_){let F;if(p){const b=Object.assign(Object.assign({prefixCls:`${h}-title`},Vt(m,_)),fe(n));F=s.createElement(Ot,Object.assign({},b))}let S;if(_){const b=Object.assign(Object.assign({prefixCls:`${h}-paragraph`},Pt(m,p)),fe(k));S=s.createElement(Bt,Object.assign({},b))}j=s.createElement("div",{className:`${h}-content`},F,S)}const B=Y(h,{[`${h}-with-avatar`]:m,[`${h}-active`]:v,[`${h}-rtl`]:E==="rtl",[`${h}-round`]:K},o,l,I);return M(s.createElement("div",{className:B,style:r},x,j))}return typeof u<"u"?u:null};re.Button=ft;re.Avatar=_t;re.Input=Tt;re.Image=xt;re.Node=Ct;const Lt=re;var Ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372zm47.7-395.2l-25.4-5.9V348.6c38 5.2 61.5 29 65.5 58.2.5 4 3.9 6.9 7.9 6.9h44.9c4.7 0 8.4-4.1 8-8.8-6.1-62.3-57.4-102.3-125.9-109.2V263c0-4.4-3.6-8-8-8h-28.1c-4.4 0-8 3.6-8 8v33c-70.8 6.9-126.2 46-126.2 119 0 67.6 49.8 100.2 102.1 112.7l24.7 6.3v142.7c-44.2-5.9-69-29.5-74.1-61.3-.6-3.8-4-6.6-7.9-6.6H363c-4.7 0-8.4 4-8 8.7 4.5 55 46.2 105.6 135.2 112.1V761c0 4.4 3.6 8 8 8h28.4c4.4 0 8-3.6 8-8.1l-.2-31.7c78.3-6.9 134.3-48.8 134.3-124-.1-69.4-44.2-100.4-109-116.4zm-68.6-16.2c-5.6-1.6-10.3-3.1-15-5-33.8-12.2-49.5-31.9-49.5-57.3 0-36.3 27.5-57 64.5-61.7v124zM534.3 677V543.3c3.1.9 5.9 1.6 8.8 2.2 47.3 14.4 63.2 34.4 63.2 65.1 0 39.1-29.4 62.6-72 66.4z"}}]},name:"dollar",theme:"outlined"};const Ht=Ft;var Dt=function(a,i){return s.createElement(Le,Pe({},a,{ref:i,icon:Ht}))};const Ut=s.forwardRef(Dt),U=({inputName:e,onChange:a,initialValue:i,editable:o})=>{const[l,r]=s.useState(0),u=n=>{r(n)},d=ne(n=>{u(n),a&&a(n)},600);return t(T.Item,{name:e,initialValue:i??void 0,style:{marginBottom:"4px"},children:t(ke,{className:"custom-input-number",readOnly:o||!1,style:{width:"100%",textAlign:"right"},min:0,max:1e9,formatter:n=>`Rp ${n}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:n=>{if(!n)return;const k=parseInt(n.replace(/[^\d]/g,""),10);return isNaN(k)?0:k},value:l,onChange:n=>{d(n)}})})},me=({inputName:e,onChange:a,initialValue:i,editable:o})=>{const[l,r]=s.useState(0),u=n=>{r(n)},d=ne(n=>{u(n),a&&a(n)},600);return t(T.Item,{name:e,initialValue:i??void 0,style:{marginBottom:"4px"},children:t(ke,{className:"custom-input-number",readOnly:o||!1,min:0,step:.01,formatter:n=>`${n}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:n=>{if(!n)return;const k=parseFloat(n.replace(/[^\d.]/g,""));return isNaN(k)?0:k},value:l,onChange:n=>{d(n)}})})},Ke={backgroundColor:"#fc0",fontWeight:"700",padding:"5px"},se={borderStyle:"solid",border:"solid 1px black",padding:"5px"},Be={borderStyle:"solid",border:"solid 1px black",textAlign:"center",padding:"5px"},Se={borderStyle:"solid",border:"solid 1px black",textAlign:"right",padding:"5px"},Ne={borderStyle:"solid",border:"solid 1px black",backgroundColor:"#636f83",padding:"5px"},Gt=({data:e,form:a,subKey:i,rekapMak:o,calculate:l})=>{const[r,u]=s.useState(0);return s.useEffect(()=>{const d=parseFloat(a.getFieldValue(`${e.nomor}_beli_harga`)||0),n=parseFloat(a.getFieldValue(`${e.nomor}_produksi_harga`)||0),k=d+n;u(k)},[a,e.nomor]),c("tr",{style:{backgroundColor:e.flagBasket?"#ffffcc":""},children:[t("td",{style:{...Be,width:"55px"},children:e.nomor}),t("td",{style:{...se,width:"130px"},children:e.kode_coicop}),c("td",{colSpan:1,style:e.type==="sub"?Ke:se,children:[e.rincian,e.type==="lain"&&t(T.Item,{name:`${e.nomor}_item`,children:t(ee,{placeholder:"Sebutkan"})})]}),t("td",{colSpan:1,style:{...e.type==="sub"?Ke:Be},children:e.type==="lain"?t(T.Item,{name:`${e.nomor}_satuan`,children:t(ee,{placeholder:"Sebutkan"})}):e.satuan}),t("td",{style:e.type==="sub"?Ne:se,children:e.type==="sub"||t(me,{inputName:`${e.nomor}_beli_volume`})}),c("td",{style:{...Se,width:"150px"},children:[t(U,{inputName:`${e.type==="sub"?"jumlah":""}${e.nomor}_beli_harga${e.subKey}`,onChange:d=>{a.setFieldsValue({[`${e.nomor}_beli_harga`]:d}),u(parseFloat(d||0)+parseFloat(a.getFieldValue(`${e.nomor}_produksi_harga`)||0)),e.type}}),e.type==="sub"&&t(H,{color:"red",value:o[e.subKey]?o[e.subKey].beli??0:0})]}),t("td",{style:e.type==="sub"?Ne:se,children:e.type==="sub"||t(me,{inputName:`${e.nomor}_produksi_volume`})}),c("td",{style:Se,children:[t(U,{inputName:`${e.type==="sub"?"jumlah":""}${e.nomor}_produksi_harga${e.subKey}`,onChange:d=>{a.setFieldsValue({[`${e.nomor}_produksi_harga`]:d}),u(parseFloat(d||0)+parseFloat(a.getFieldValue(`${e.nomor}_beli_harga`)||0)),e.type}}),e.type==="sub"&&t(H,{color:"red",value:o[e.subKey].produksi??0})]}),t("td",{style:e.type==="sub"?Ne:se,children:e.type==="sub"||t(me,{inputName:`${e.nomor}_total_volume`})}),c("td",{style:Se,children:[t(U,{inputName:`${e.nomor}_total_harga`}),t(H,{color:"red",value:e.type==="sub"?o[e.subKey].produksi+o[e.subKey].beli:r})]})]})},{Text:Va,Title:zt}=oe,Jt={borderCollapse:"collapse",width:"100%"},G={borderStyle:"solid",border:"solid 1px black",padding:"5px"},Q={borderStyle:"solid",border:"solid 1px black",textAlign:"center",padding:"5px"},De=({title:e,konten:a,rekapMak:i,calculate:o,form:l})=>(e="BLOK IV.1. KONSUMSI DAN PENGELUARAN BAHAN MAKANAN, BAHAN MINUMAN, DAN ROKOK SEMINGGU TERAKHIR",c("table",{style:Jt,children:[c("thead",{children:[t("tr",{style:{backgroundColor:"#fc0",textAlign:"center"},children:t("th",{style:G,colSpan:10,children:t(w,{direction:"vertical",style:{padding:"25px"},children:t(zt,{level:4,children:e})})})}),c("tr",{children:[t("th",{style:G,rowSpan:2,children:"No Urut"}),t("th",{style:G,rowSpan:2,children:"Kode COICOP"}),t("th",{style:G,rowSpan:2,children:"Rincian"}),t("th",{style:G,rowSpan:2,children:"Satuan standar"}),t("th",{style:G,colSpan:2,children:"Berasal dari pembelian (tunai/bon)"}),t("th",{style:G,colSpan:2,children:"Berasal dari produksi sendiri, pemberian, dsb"}),t("th",{style:G,colSpan:2,children:"Jumlah konsumsi"})]}),c("tr",{children:[t("th",{style:G,children:"Banyaknya (0,00)"}),t("th",{style:G,children:"Nilai (Rp)"}),t("th",{style:G,children:"Banyaknya (0,00)"}),t("th",{style:G,children:"Nilai (Rp)"}),t("th",{style:G,children:"Banyaknya (5) + (7) (0,00)"}),t("th",{style:G,children:"Nilai (6) + (8) (Rp)"})]})]}),c("tbody",{children:[c("tr",{children:[t("td",{width:"55px",style:Q,children:"(1)"}),t("td",{width:"130px",style:Q,children:"(2)"}),t("td",{style:Q,children:"(3)"}),t("td",{width:"80px",style:Q,children:"(4)"}),t("td",{width:"100px",style:Q,children:"(5)"}),t("td",{style:Q,children:"(6)"}),t("td",{width:"100px",style:Q,children:"(7)"}),t("td",{style:Q,children:"(8)"}),t("td",{width:"100px",style:Q,children:"(9)"}),t("td",{style:Q,children:"(10)"})]}),a.map((r,u)=>t(Gt,{data:r,form:l,rekapMak:i,calculate:o},u))]})]})),{Text:Wt,Title:Pa}=oe,de=({form:e,rekapMak:a,calculate:i,from:o,to:l,hal:r})=>{const[u,d]=s.useState([]),[n,k]=s.useState(!0);s.useEffect(()=>{(async(O,E)=>{const{data:h}=await z.get(route("api.mak.komoditas.list",{from:O,to:E})),M=h.map(I=>({nomor:I.id,kode_coicop:I.kode_coicop,rincian:I.nama_komoditas,satuan:I.satuan,type:I.type,subKey:I.id_kelompok,flagBasket:I.flag_basket}));d([...M]),k(!1)})(o,l)},[]);const v="BLOK IV.1. KONSUMSI DAN PENGELUARAN BAHAN MAKANAN & MINUMAN SEMINGGU TERAKHIR";return c(w,{direction:"vertical",style:{width:"100%"},children:[c(w,{style:{width:"100%",justifyContent:"end"},direction:"horizontal",children:[t(Wt,{children:"Jumlah komoditas bahan makanan dan bahan minuman terisi pada halaman ini"}),t(me,{inputName:`hal${r}_jml_komoditas`})]}),t(De,{form:e,konten:n?[]:u,title:v,rekapMak:a,calculate:i}),n&&t(Lt,{active:!0,paragraph:{rows:10}})]})},qt=({form:e,onFinish:a,tabContentStyle:i,subTotalHarga:o,calculate:l,rekapMak:r})=>{ce.useMessage();function u(d){}return s.useEffect(()=>{},[]),c(T,{form:e,name:"Blok4_1_hal2",onFinish:a,autoComplete:"off",layout:"vertical",onValuesChange:ne(l,600),children:[t(T.Item,{name:"id_ruta",hidden:!0,children:t(ee,{placeholder:"id rt"})}),t(pe,{onChange:u,type:"line",style:{backgroundColor:"#fff",padding:"10px"},items:[{label:"Hal 2",key:"1",children:t(de,{from:1,to:34,hal:2,form:e,calculate:l,rekapMak:r})},{label:"Hal 4",key:"2",children:t(de,{from:35,hal:4,to:62,form:e,calculate:l,rekapMak:r})},{label:"Hal 6",key:"3",children:t(de,{from:63,to:94,hal:6,form:e,calculate:l,rekapMak:r})},{label:"Hal 8",key:"4",children:t(de,{from:95,to:127,hal:8,form:e,calculate:l,rekapMak:r})},{label:"Blok 10",key:"5",children:t(de,{from:128,to:158,hal:10,form:e,calculate:l,rekapMak:r})}]})]})},{Text:Yt,Title:La}=oe,Me=({onFinish:e,nomor_art:a,setDaftarArt:i,daftarArt:o,id_ruta:l,id_art:r,calculateKalori:u,konten:d,art:n})=>{const[k]=T.useForm(),[v,K]=s.useState(!0),O=async p=>{try{const _=route("entri.mak.konsumsi_art.store"),{data:x}=await z.patch(_,p,{headers:{"Content-Type":"application/json"}})}catch(_){console.log("error",{error:_})}},E=({subKey:p,jenis:_})=>{const x=`${_}_harga${p}`,j=k.getFieldsValue(),B=Object.entries(j).filter(([b])=>b.endsWith(x)).reduce((b,[,y])=>b+(y||0),0),S=[...o].map(b=>{let y={...b.rekap};return y[p][_]=B,b.id===r?{...b,rekap:y}:b});i(S)},h=ne(()=>{const p="beli_harga12",_="beli_harga13",x="produksi_harga12",j="produksi_harga13",B=k.getFieldsValue(),F=Object.entries(B).filter(([$])=>$.endsWith(p)&&!$.includes("jumlah")).reduce(($,[,L])=>$+(L||0),0),S=Object.entries(B).filter(([$])=>$.endsWith(_)&&!$.includes("jumlah")).reduce(($,[,L])=>$+(L||0),0),b=Object.entries(B).filter(([$])=>$.endsWith(x)&&!$.includes("jumlah")).reduce(($,[,L])=>$+(L||0),0),y=Object.entries(B).filter(([$])=>$.endsWith(j)&&!$.includes("jumlah")).reduce(($,[,L])=>$+(L||0),0);let V=[...o];const P=V.map($=>{let L={...$.rekap};return L[12]={beli:F,produksi:b,total:F+b},L[13]={beli:S,produksi:y,total:S+y},$.id===r?{...$,rekap:L}:$});console.log({newDaftarArt:V}),i(P)},600),M=ne(()=>k.submit(),3e3),I=p=>{h(),M(),u(k.getFieldsValue()).then(_=>{let x=[...o];x[a].kalori=_})};s.useEffect(()=>{(async _=>{K(!0);const{data:x}=await z.get(route("api.mak.konsumsi.art",{id_art:_})),j=[159,192],F=x.map(S=>({[`${j.includes(S.id_komoditas)?"jumlah":""}${S.id_komoditas}_beli_harga${S.id_kelompok}`]:S.harga_beli,[`${j.includes(S.id_komoditas)?"jumlah":""}${S.id_komoditas}_produksi_harga${S.id_kelompok}`]:S.harga_produksi,[`${S.id_komoditas}_total_harga`]:S.harga_total,[`${S.id_komoditas}_item`]:S.item,[`${S.id_komoditas}_satuan`]:S.satuan,[`${S.id_komoditas}_beli_volume`]:S.volume_beli,[`${S.id_komoditas}_produksi_volume`]:S.volume_produksi,[`${S.id_komoditas}_total_volume`]:S.volume_total})).reduce((S,b)=>{for(const y in b)b.hasOwnProperty(y)&&(S[y]=b[y]);return S},{});F[`blok4_31_${a}_id_art`]=_,k.setFieldsValue(F)})(r),K(!0)},[r]),s.useEffect(()=>{k.setFieldsValue({id_ruta:l,id_art:r}),u(k.getFieldsValue()).then(p=>{let _=[...o];_[a].kalori=p})},[k]);const m="BLOK IV.1. KONSUMSI DAN PENGELUARAN BAHAN MAKANAN, BAHAN MINUMAN, DAN ROKOK SEMINGGU TERAKHIR";return t(w,{direction:"vertical",style:{width:"100%"},children:c(T,{form:k,name:"Art",onFinish:O,autoComplete:"off",layout:"vertical",onValuesChange:I,children:[c(w,{style:{width:"100%",justifyContent:"end"},direction:"horizontal",children:[t(Yt,{children:"Jumlah komoditas bahan makanan,bahan minuman, dan rokok yang terisi pada halaman ini"}),t(T.Item,{style:{margin:"auto"},name:"id_ruta",hidden:!0,children:t(ee,{readOnly:!0})}),t(T.Item,{style:{margin:"auto"},name:"id_art",hidden:!0,children:t(ee,{readOnly:!0})})]}),t(De,{form:k,konten:d,title:m,calculate:E,rekapMak:n.rekap})]})})},{Text:Qt,Title:Xt}=oe,Zt={borderCollapse:"collapse",width:"100%",backgroundColor:"#fff"},Oe={borderStyle:"solid",border:"solid 1px black",padding:"5px"},ea={borderStyle:"solid",border:"solid 1px black",textAlign:"center",padding:"5px"},he=({title:e,subtitle:a,columnsCount:i,columns:o,children:l})=>c("table",{style:Zt,children:[t("thead",{style:{backgroundColor:"#fc0",textAlign:"center"},children:t("tr",{children:t("td",{colSpan:i,style:Oe,children:c(w,{direction:"vertical",children:[t(Xt,{level:4,children:e}),t(Qt,{children:a})]})})})}),c("tbody",{children:[o&&c(X,{children:[t("tr",{children:o.map(r=>t("th",{style:Oe,children:r}))}),t("tr",{children:Array.from(Array(i).keys()).map(r=>c("td",{style:ea,children:["(",r+1,")"]}))})]}),l]})]}),ve={borderStyle:"solid",border:"solid 1px black",margin:"auto",textAlign:"center",padding:"5px"},ta=({artForm:e,artFormFinish:a,tabContentStyle:i,daftarArt:o,setDaftarArt:l,calculateKalori:r})=>{const u=b=>{},[d,n]=s.useState("0"),[k,v]=s.useState([]),[K,O]=s.useState([]),[E,h]=s.useState(!1),[M,I]=s.useState(!1),m=s.useRef(1),[p,_]=ce.useMessage(),x=async()=>{I(!0);const b=`Art-${m.current++}`;try{const{data:y}=await z.post(route("entri.mak.art.store"),{nama:b,nomor_art:o.length+1,id_ruta:o[0].id_ruta}),V=[...o,{id:y.id,id_ruta:y.id_ruta,nomor_art:m.current++,nama:b,key:b,rekap:{12:{produksi:0,beli:0,total:0},13:{produksi:0,beli:0,total:0}}}];l([...V]),n(b)}catch(y){console.error("Error in add function:",y)}finally{I(!1)}},j=async b=>{const y=e.getFieldValue(`${b}-id_art`);if(b===0){p.open({content:"anggota ruta pertama tidak boleh dihapus,",type:"warning",key:y,duration:3});return}try{const{data:V}=await z.delete(route("entri.mak.art.delete",{id_art:y})),P=o.filter($=>$.id!==y);l(P),p.open({content:"Berhasil menghapus 1 anggota rumah tangga",type:"success",key:y})}catch(V){console.error("Error in add function:",V),p.open({content:`Terjadi galat ketika menghapus data, tunjukan code ini pada Developer (${V})`,type:"error",key:y,duration:3})}},F=ne((b,y,V)=>{const P=[...o];P[b][y]=V.trim(),l(P)},1e3),S=rt.throttle(j,2e3);return s.useEffect(()=>{(async(V,P)=>{const{data:$}=await z.get(route("api.mak.komoditas.list",{from:V,to:P})),L=$.map(Z=>({nomor:Z.id,kode_coicop:Z.kode_coicop,rincian:Z.nama_komoditas,satuan:Z.satuan,type:Z.type,subKey:Z.id_kelompok,flagBasket:Z.flag_basket}));O([...L])})(159,197),h(!1);const y=o.map((V,P)=>({label:V.nama,key:String(P),children:t(Me,{onFinish:u,nomor_art:V.nomor_art,daftarArt:o,setDaftarArt:l,id_ruta:e.getFieldValue("id_ruta"),art:V,id_art:V.id,calculateKalori:r,konten:K})}));v([...y])},[]),c(w,{direction:"vertical",style:i,children:[_,t(te,{type:"primary",onClick:x,children:"Tambah Art"}),c(T,{name:"artForm",form:e,onFinish:a,children:[t(T.Item,{name:"id_ruta",hidden:!0,children:t(ee,{})}),t(he,{title:"DAFTAR ANGGOTA RUMAH TANGGA",columns:["Nomor","Nama Anggota Rumah Tangga","aksi"],columnsCount:3,children:M?t("tr",{children:t("td",{colSpan:3,children:c(w,{style:{width:"100%",justifyContent:"center",marginTop:"30px"},direction:"vertical",children:[t(w,{style:{width:"100%",justifyContent:"center"},children:t(Fe,{size:"large"})}),t(w,{style:{width:"100%",justifyContent:"center"},children:"Menambahkan anggota rumah tangga..."})]})})}):o.map((b,y)=>c("tr",{children:[t("td",{style:ve,children:y+1}),c("td",{style:ve,children:[t(T.Item,{name:`${y}-id_art`,hidden:!0,children:t(ee,{})}),t(T.Item,{name:`${y}-nama`,style:{margin:"auto"},children:t(ee,{placeholder:"nama anggota rumah tangga",onChange:V=>F(y,"nama",V.target.value)})})]}),t("td",{style:ve,children:t(st,{placement:"topLeft",title:"apakah anda yakin akan menghapus art ini?",description:"hapus anggota rumah tangga",okText:"yakin dong",cancelText:"gajadi",onConfirm:()=>S(y),children:t(te,{disabled:y===0,children:"Hapus"})})})]},y))})]}),t(pe,{style:{backgroundColor:"#fff",padding:"10px"},items:o.map((b,y)=>({label:b.nama,key:String(y),children:t(Me,{onFinish:u,nomor_art:b.nomor_art,daftarArt:o,setDaftarArt:l,id_ruta:b.id_ruta,art:b,id_art:b.id,calculateKalori:r,konten:K})})),type:"line"})]})},aa=({form:e,onFinish:a,tabContentStyle:i,rekapMak:o,setRekapMak:l,daftarArt:r,daftarRincian432:u})=>{const d={borderStyle:"solid",border:"solid 1px black",padding:"5px"},n={borderStyle:"solid",border:"solid 1px black",textAlign:"right",padding:"5px"},k={borderStyle:"solid",border:"solid 1px black",textAlign:"center",padding:"5px"},[v,K]=ce.useMessage(),O=m=>{let p=[...o];p[16].total=m,p[17].total=p[15].total+p[16].total,l(p)},E=({rincian:m,key:p})=>c("tr",{children:[t("td",{style:k,children:m.nomor}),t("td",{style:d,children:m.rincian}),t("td",{style:n,children:m.id<16&&c(X,{children:[t(U,{inputName:`blok4_32_${m.id-1}_beli`},p),t(H,{color:"red",value:o[m.id-1].beli},m.id)]})}),t("td",{style:n,children:m.id<16&&c(X,{children:[t(U,{inputName:`blok4_32_${m.id-1}_produksi`},p),t(H,{color:"red",value:o[m.id-1].produksi},m.id)]})}),t("td",{style:n,children:c(X,{children:[t(U,{inputName:`blok4_32_${m.id-1}_total`,onChange:p===16?O:void 0},p),t(H,{color:"red",value:o[m.id-1].total},m.id)]})})]}),[h,M]=s.useState({12:{beli:0,produksi:0,total:0},13:{beli:0,produksi:0,total:0}}),I=m=>{let p=m.reduce((_,x)=>(Object.values(x.rekap).forEach((j,B)=>{_[B]=_[B]||{beli:0,produksi:0,total:0},_[B].beli+=j.beli,_[B].produksi+=j.produksi,_[B].total+=j.total}),_),[]);return{12:p[0],13:p[1]}};return s.useEffect(()=>{let m=I(r);(async()=>{var x;const{data:_}=await z.get(route("entri.mak.art.fetch",{id_ruta:(x=r[0])==null?void 0:x.id_ruta}));_.forEach((j,B)=>{e.setFieldValue(`blok4_31_${B}_id_art`,j.id)})})(),M(m),l(_=>{let x=[..._];return x[12]=m[12],x[13]=m[13],x[14]=x.slice(0,14).reduce((j,B)=>({beli:j.beli+B.beli,produksi:j.produksi+B.produksi,total:j.total+B.total}),{beli:0,produksi:0,total:0}),[...x]})},[r]),s.useEffect(()=>{},[]),t(w,{direction:"vertical",style:i,children:c(T,{form:e,name:"Blok4_3",onFinish:a,autoComplete:"off",layout:"vertical",children:[c(he,{title:"BLOK IV.3.1. REKAPITULASI PENGELUARAN MAKANAN DAN MINUMAN JADI SERTA ROKOK SELURUH ANGGOTA RUMAH TANGGA (DALAM RUPIAH)",subtitle:"",columns:["No.","Nama ART","Makanan dan Minuman Jadi (Pembelian)","Makanan dan Minuman Jadi (Produksi sendiri, Pemberian, dsb)","Rokok dan Tembaku (Pembelian)","Rokok dan Tembaku (Produksi sendiri, Pemberian, dsb)"],columnsCount:6,children:[r.map((m,p)=>c("tr",{children:[t("td",{style:k,children:p+1}),c("td",{style:d,children:[m.nama,t(T.Item,{name:`blok4_31_${p}_id_art`,label:null,initialValue:m.id,hidden:!0,children:t(ee,{readOnly:!0})},`form-item-${p}`)]}),c("td",{style:n,children:[t(U,{inputName:`blok4_31_${p}_mak_beli`,initialValue:m.mak_beli}),t(H,{color:"red",value:m.rekap[12].beli})]}),c("td",{style:n,children:[t(U,{inputName:`blok4_31_${p}_mak_produksi`,initialValue:m.mak_produksi}),t(H,{color:"red",value:m.rekap[12].produksi})]}),c("td",{style:n,children:[t(U,{inputName:`blok4_31_${p}_rokok_beli`,initialValue:m.rokok_beli}),t(H,{color:"red",value:m.rekap[13].beli})]}),c("td",{style:n,children:[t(U,{inputName:`blok4_31_${p}_rokok_produksi`,initialValue:m.rokok_produksi}),t(H,{color:"red",value:m.rekap[13].produksi})]})]})),r.length>0&&c("tr",{children:[t("td",{style:d}),t("td",{style:d,children:"JUMLAH"}),c("td",{style:n,children:[t(U,{inputName:"blok4_31_jumlah_mak_beli"}),t(H,{color:"red",value:h[12].beli})]}),c("td",{style:n,children:[t(U,{inputName:"blok4_31_jumlah_mak_produksi"}),t(H,{color:"red",value:h[12].produksi})]}),c("td",{style:n,children:[t(U,{inputName:"blok4_31_jumlah_rokok_beli"}),t(H,{color:"red",value:h[13].beli})]}),c("td",{style:n,children:[t(U,{inputName:"blok4_31_jumlah_rokok_produksi"}),t(H,{color:"red",value:h[13].produksi})]})]})]},1),t(Ze,{}),t(he,{title:"BLOK IV.3.2. REKAPITULASI PENGELUARAN MAKANAN, MINUMAN, DAN ROKOK (DALAM RUPIAH)",subtitle:"[Kolom (3) Disalin dari Blok IV.1 Kolom (6), Blok IV.3.1 Kolom (3), atau (5)] dan [Kolom (4) Disalin dari Blok IV.1 Kolom (8), Blok IV.3.1 Kolom (4), atau (6)]",columnsCount:5,columns:["No.","Jenis Pengeluaran","Pembelian Seminggu Terakhir","Produksi Sendiri, Pemberian, dsb., Seminggu Terakhir","Total Seminggu Terakhir [Kolom 3 + Kolom 4]"],children:u.map((m,p)=>E({rincian:m,key:p}))},2),K]})})},{Text:na,Title:ia}=oe,je={borderStyle:"solid",border:"solid 1px black",padding:"5px"},ue={borderStyle:"solid",border:"solid 1px black",textAlign:"center",padding:"5px"},Ve=({type:e,name:a,options:i,customKey:o,children:l,setValue:r})=>({number:t(T.Item,{name:a,label:null,children:t(ke,{min:0})}),binary:t(xe,{name:a,options:[{label:"[1] YA",value:"1"},{label:"[5] TIDAK",value:"5"}],onChange:r&&(d=>r(d))}),rupiah:t(U,{inputName:a,editable:o===26}),multi:t(xe,{name:a,options:i??[],onChange:r&&(d=>r(d))})})[e],oa=({props:e,defaultValue:a})=>{const[i,o]=s.useState(a),[l,r]=s.useState([]),u=c(X,{children:[t("td",{style:ue,children:e.id}),t("td",{style:je,children:e.rincian})]});return s.useEffect(()=>{if(e.children){let d=e.children.filter((n,k)=>{var v;return(v=n.dependentValues)==null?void 0:v.includes(i)}).map(n=>c("tr",{children:[t("td",{style:ue}),t("td",{style:je,children:n.rincian}),t("td",{style:ue,children:t(Ve,{type:n.type,name:`wtf_${n.nomor}`,options:n.options,customKey:n.id},n.nomor)})]},e.id));r(d)}},[i,e.children]),c(X,{children:[c("tr",{style:{backgroundColor:e.id%2===0?" #fffae6":""},children:[u,t("td",{style:ue,children:t(Ve,{type:e.type,name:`wtf_${e.id}`,options:e.options,customKey:e.id,children:e.children,setValue:o},e.id)})]}),l.map(d=>d)]})},la=[{id:2,nomor:2,rincian:"BANYAKNYA ART (Blok III Rincian 301)",type:"number"},{id:3,nomor:3,rincian:"ADA BALITA? (R302>0)",type:"binary",children:[{id:27,nomor:"3c1",dependentValues:["1"],rincian:"Jumlah konsumsi susu (VSEN24.KP Rincian 70 s.d 74)",type:"rupiah"}]},{id:4,nomor:4,rincian:"ADA WANITA USIA SUBUR? (R405=2 dan R407 usia 10-54 tahun)",type:"binary"},{id:5,nomor:5,rincian:"ADA PEMBANTU/SUPIR? (R403=8)",type:"binary",children:[{id:28,nomor:"5c1",dependentValues:["1"],rincian:"Jumlah Gaji/Upah pembantu rumah tangga (VSEN24.KP Rincian 277)",type:"rupiah"}]},{id:6,nomor:6,rincian:"ADA ART YANG BEROBAT JALAN/RAWAT INAP? (R1105=1 ATAU R1201=1)",type:"binary",children:[{id:29,nomor:"6c1",dependentValues:["1"],rincian:"VSEN24.KP Rincian 248 s.d 254 Kolom 5 (Setahun terakhir)",type:"rupiah"}]},{id:7,nomor:7,rincian:"ADA ART YANG MENGOBATI SENDIRI? (R1104=1)",type:"binary",children:[{id:29,nomor:"6c2",dependentValues:["1"],rincian:"VSEN24.KP Rincian 255 s.d 257 Kolom 5 (Setahun terakhir)",type:"rupiah"}]},{id:8,nomor:8,rincian:"ADA ART YANG PERNAH MENGGUNAKAN INTERNET?(R808 =1)",type:"binary",children:[{id:30,nomor:"8c1",dependentValues:["1"],rincian:"VSEN24.KP Rincian 236+238",type:"rupiah"}]},{id:9,nomor:9,rincian:"ADA ART YANG MEMILIKI TABUNGAN (BANK)?(R701=1)",type:"binary"},{id:10,nomor:10,rincian:"ADA ART YANG SEDANG BERSEKOLAH? (R610=2)",type:"binary",children:[{id:31,nomor:"10c1",dependentValues:["1"],rincian:"VSEN24.KP Rincian 265 s.d. 270",type:"rupiah"}]},{id:11,nomor:11,rincian:"ADA ART YANG MEMILIKI/MENGUASAI HP? (R802=1)",type:"binary"},{id:12,nomor:11,rincian:"ADA ART DENGAN STATUS PEKERJAAN BURUH/KARYAWAN/PEGAWAI/PEKERJA BEBAS? (R707=4 atau 5)",type:"binary"},{id:13,nomor:12,rincian:"ADA ART DENGAN STATUS BERUSAHA? (R706=1 atau 2)",type:"binary"},{id:14,nomor:17,rincian:"ADA ART YANG MEROKOK? (R1207 = 1 atau 2)",type:"binary",children:[{id:32,nomor:"14c1",dependentValues:["1"],rincian:"VSEN24.KP Rincian 192 Kolom 10",type:"rupiah"}]},{id:15,nomor:18,rincian:"ADA YANG SEDANG MENGGUNAKAN KB? (Blok XVI Rincian 1601=2)",type:"binary",children:[{id:33,nomor:"15c1",dependentValues:["1"],rincian:"VSEN24.KP Rincian 263 Kolom 5",type:"rupiah"}]},{id:16,nomor:14,rincian:"STATUS RUMAH? (Blok XVIII Rincian 1802)",type:"multi",options:[{label:"[1] Milik sendiri",value:"1"},{label:"[2] Kontrak/sewa",value:"2"},{label:"[3] Bebas sewa",value:"3"},{label:"[4] Dinas",value:"4"},{label:"[5] Lainnya",value:"5"}],children:[{id:34,nomor:"16c1",dependentValues:["1","3"],rincian:"VSEN24.KP Rincian 200",type:"rupiah"},{id:35,nomor:"16c2",dependentValues:["2"],rincian:"VSEN24.KP Rincian 201 + 202",type:"rupiah"},{id:37,nomor:"16c3",dependentValues:["4","5"],rincian:"VSEN24.KP Rincian 203",type:"rupiah"}]},{id:17,nomor:15,rincian:"RUTA MENGGUNAKAN PAM METERAN(LEDING)? (R1810A=3 atau R1814A=3)",type:"binary"},{id:18,nomor:16,rincian:"AIR MINUM? (R1810A)",type:"multi",options:[{label:"[1] Air kemasan bermerk",value:"1"},{label:"[2] Air isi ulang",value:"2"},{label:"[3] Leding/sumur bor/pompa ",value:"3"},{label:"[4] Lainnya",value:"4"}]},{id:19,nomor:17,rincian:"SUMBER AIR CUCI/MANDI, DLL (R1814A)",type:"multi",options:[{label:"[1] Air kemasan bermerk",value:"1"},{label:"[2] Air isi ulang",value:"2"},{label:"[3] Leding/sumur bor/pompa ",value:"3"},{label:"[4] Lainnya",value:"4"}]},{id:20,nomor:17,rincian:"SUMBER UTAMA PENERANGAN? (R1816A)",type:"multi",options:[{label:"[1] Listrik PLN dengan meteran",value:"1"},{label:"[2] Listrik PLN tanpa meteran",value:"2"},{label:"[3] Listrik non PLN",value:"3"},{label:"[4] Bukan listrik",value:"4"}]},{id:21,nomor:23,rincian:"BAHAN BAKAR MEMASAK? (R1817)",type:"multi",options:[{label:"[1] Listrik",value:"1"},{label:"[2] LPG > 3 kg",value:"2"},{label:"[3] LPG 3 kg",value:"3"},{label:"[4] Minyak tanah",value:"4"},{label:"[5] Arang/briket/kayu bakar",value:"5"},{label:"[6] Lainnya",value:"6"},{label:"[7] Tidak memasak di rumah",value:"7"}]},{id:22,nomor:24,rincian:"APAKAH RUTA MENERIMA KREDIT? (R1901 salah satu berkode 1)",type:"binary"},{id:23,nomor:26,rincian:"MEMILIKI KENDARAAN BERMOTOR? (R2001H=1 atau R2001.K=1)",type:"binary",children:[{id:39,nomor:"23c1",dependentValues:["1"],rincian:"VSEN24.KP Rincian 309",type:"rupiah"}]},{id:24,nomor:19,rincian:"MEMILIKI ASURANSI/JAMINAN KESEHATAN? (Blok XI Rincian 1101)",type:"binary",children:[{id:40,nomor:"24c1",dependentValues:["1"],rincian:"VSEN24.KP Rincian 311",type:"rupiah"}]},{id:26,nomor:"",rincian:"GARIS KEMISKINAN MARET 2023",type:"rupiah"}],ra=({form:e,onFinish:a,tabContentStyle:i})=>c(w,{direction:"vertical",style:i,children:[t(w,{style:{width:"100%",justifyContent:"space-between"},direction:"horizontal"}),t(T,{form:e,name:"Worksheet",onFinish:a,autoComplete:"off",layout:"vertical",children:c("table",{style:{borderCollapse:"collapse",width:"100%"},children:[t("thead",{style:{backgroundColor:"#fc0",textAlign:"center"},children:t("tr",{children:t("td",{style:{borderStyle:"solid",border:"solid 1px black",padding:"5px"},colSpan:4,children:c(w,{direction:"vertical",children:[c(ia,{level:4,style:{textTransform:"uppercase"},children:["Isian Worksheet Template"," "]}),t(na,{children:"RINCIAN (Lihat Dokumen VSEN22.K)"})]})})})}),t("tbody",{children:la.map(r=>oa({props:r,defaultValue:e.getFieldValue(`wtf_${r.id}`)}))})]})})]}),sa=({form:e,onFinish:a,tabContentStyle:i,rekapMak:o,daftarArt:l})=>{const r={borderStyle:"solid",border:"solid 1px black",padding:"5px"},u={borderStyle:"solid",border:"solid 1px black",textAlign:"center",padding:"5px"},[d,n]=ce.useMessage(),[k,v]=s.useState([{rincian:"Kalori per Kapita per Hari",id:0,value:0,dataType:"decimal"},{rincian:"Kalori 52 basket komoditas per Kapita per Hari",id:6,value:0,dataType:"decimal"},{rincian:"Jumlah Komoditas Bahan Makanan/Minuman",id:1,value:0,dataType:"integer"},{rincian:"Jumlah Komoditas Makanan/Minuman Jadi dan Rokok",id:2,value:0,dataType:"integer"},{rincian:"Jumlah Komoditas Non Makanan [Disalin dari dokumen KP Blok III Rincian 305 ]",id:3,value:0,dataType:"integer"},{rincian:"Jumlah Semua Komoditas",id:4,value:0,dataType:"integer"},{rincian:"Pengeluaran per kapita",id:5,value:0,dataType:"rupiah"}]),K=({rincian:E,key:h})=>c("tr",{children:[t("td",{style:{...u,width:"30px"},children:h+1}),t("td",{style:{...r,width:"auto"},children:E.rincian}),t("td",{style:{...r,width:"150px",textAlign:"right"},children:E.id===5?t(X,{children:t(U,{inputName:`blokqc_${E.id}`},h)}):t(w,{direction:"vertical",children:t(T.Item,{name:`blokqc_${E.id}`,label:null,style:{marginBottom:"5px",textAlign:"center"},children:t(ke,{className:"custom-input-number",style:{textAlign:"right",width:"100%"},formatter:M=>{const I=Number(M)??0,m=I.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",");return E.dataType==="decimal"?m:String(I)}},h)})})})]},h);return s.useState({totalKalori:0,jumlahKomoditasMakananJadiNRokok:0,jumlahKomoditasBahanMakanan:0,jumlahKomoditas:0,pengeluaranPerKapita:0}),c(w,{direction:"vertical",style:i,children:[c(te,{onClick:async()=>{d.open({content:`menghitung ulang... ruta ${l[0].id_ruta}`,key:"calculate_qc",type:"loading"});const{data:E}=await z.get(route("api.mak.calculate_qc",{id_ruta:l[0].id_ruta}));let h=[...k];h[0].value=E.kalori_total/l.length/7,h[1].value=E.jumlah_komoditas_bahan_makanan,h[2].value=E.jumlah_komoditas_makanan_jadi_rokok,h[3].value=e.getFieldValue("blokqc_3"),h[4].value=h[1].value+h[2].value+h[3].value,h[5].value=E.pengeluaran/l.length,h[6].value=E.kalori_basket/7,v([...h]),e.setFieldsValue({blokqc_0:h[0].value,blokqc_1:h[1].value,blokqc_2:h[2].value,blokqc_4:h[4].value,blokqc_5:h[5].value,blokqc_6:h[6].value})},children:[t(He,{}),"Hitung ulang"]}),c(T,{form:e,name:"Blok4_3",onFinish:a,autoComplete:"off",layout:"vertical",children:[t(he,{title:"Quality Control",columnsCount:3,columns:["No.","Rincian","Isian"],children:k.map((E,h)=>K({rincian:E,key:h}))},2),n]})]})},$e=[{id:1,nomor:1,rincian:"Padi-padian (R.1)",type:"standar"},{id:2,nomor:2,rincian:"Umbi-umbian (R.8)",type:"standar"},{id:3,nomor:3,rincian:"Ikan/udang/cumi/kerang (R.16)",type:"standar"},{id:4,nomor:4,rincian:"Daging (R.55)",type:"standar"},{id:5,nomor:5,rincian:"Telur dan Susu (R.65)",type:"standar"},{id:6,nomor:6,rincian:"Sayur-sayuran (R.75)",type:"standar"},{id:7,nomor:7,rincian:"Kacang-kacangan (R.102)",type:"standar"},{id:8,nomor:8,rincian:"Buah-buahan (R.110)",type:"standar"},{id:9,nomor:9,rincian:"Minyak dan Kelapa (R.126)",type:"standar"},{id:10,nomor:10,rincian:"Bahan Minuman (R.131)",type:"standar"},{id:11,nomor:11,rincian:"Bumbu-bumbuan (R.139)",type:"standar"},{id:12,nomor:12,rincian:"Bahan Makanan Lainnya (R.154)",type:"standar"},{id:13,nomor:13,rincian:"Makanan dan Minuman Jadi (Blok IV.3.1 Baris Jumlah)",type:"standar"},{id:14,nomor:14,rincian:"Rokok dan Tembakau (Blok IV.3.1 Baris Jumlah)",type:"standar"},{id:15,nomor:15,rincian:"SUBJUMLAH [R.1 s.d. R.14]",type:"standar"},{id:16,nomor:16,rincian:"RATA-RATA PENGELUARAN MAKANAN SEBULAN [R.15 x 30/7]",type:"average"},{id:17,nomor:17,rincian:"RATA-RATA PENGELUARAN BUKAN MAKANAN SEBULAN [salin dari Blok 4.3.3 rincian 8 kolom 3]",type:"average"},{id:18,nomor:18,rincian:"RATA-RATA PENGELUARAN MAKANAN SEBULAN [R.16 + R17]",type:"average"}],da=({data:e,konsumsi_ruta:a,art:i,garis_kemiskinan:o,rekap_konsumsi:l,rekap_konsumsi_art:r})=>{const u={backgroundColor:"#fff",paddingLeft:"10px",paddingRight:"10px",paddingBottom:"15px",width:"100%"},[d]=T.useForm(),[n]=T.useForm(),[k]=T.useForm();T.useForm();let[v]=T.useForm();T.useForm();const[K,O]=s.useState([]),[E,h]=s.useState(null),[M,I]=s.useState([]),[m,p]=s.useState($e.map(A=>({beli:0,produksi:0,total:0}))),[_,x]=s.useState(!1),[j,B]=s.useState(!1),[F,S]=s.useState([]),[b,y]=s.useState([]),V=()=>{B(!1)},[P,$]=ce.useMessage(),L=async A=>{try{const R=route("entri.mak.update"),{data:f}=await z.patch(R,A,{headers:{"Content-Type":"application/json"}})}catch{P.open({type:"error",key:"cari",content:"Oops terjadi kesalahan dalam menyimpan kuesioner VSUSENAS-MAK, silahkan hubungi admin"})}},Z=async A=>{try{const R=route("entri.mak.art.update"),f=await z.patch(R,A,{headers:{"Content-Type":"application/json"}})}catch{P.open({type:"error",key:"4_1",content:"Oops terjadi kesalahan dalam menyimpan Kuesioner ART, silahkan hubungi admin"})}},Ue=async A=>{try{const R=route("entri.mak.konsumsi.store"),{data:f}=await z.patch(R,A,{headers:{"Content-Type":"application/json"}});O(f.data)}catch{P.open({type:"error",key:"4_1",content:"Oops terjadi kesalahan dalam mmenyimpan konsumsi, silahkan hubungi admin"})}},Ge=async A=>{try{const R=route("api.entri.inti",A),{data:f}=await z.get(R);O(f.data)}catch{P.open({type:"error",key:"cari",content:"Oops terjadi kesalahan dalam menyimpan blok 4 1 art, silahkan hubungi admin"})}};function Ce(A){}const[ze,Je]=s.useState([]),[We,pa]=s.useState([{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0},{beli:0,produksi:0,total:0}]),Ee=async A=>{const f=Object.entries(A).filter(([J,D])=>J.endsWith("volume")&&typeof D=="number"&&D>0).map(async J=>{let D=J[0].split("_")[0],g=Number(J[1])??0;try{const{data:W}=await z.get(route("api.mak.komoditas.kalori.fetch",{id:D}));return g*W}catch{return console.log("error ketika fetch data kalori"),0}});return(await Promise.all(f)).reduce((J,D)=>J+D,0)},qe=async()=>{const A=n.getFieldsValue();Ee(A).then(f=>{}),[0,1,2,3,4,5,6,7,8,9,10,11,14,15,16,17].forEach(f=>{let C=[...m];const J=`beli_harga${f}`,D=Object.entries(A).filter(([N])=>N.endsWith(J)&&!N.includes("jumlah")).reduce((N,[,q])=>N+(q||0),0);C[f].beli=D;const g=`produksi_harga${f}`,W=Object.entries(A).filter(([N])=>N.endsWith(g)&&!N.includes("jumlah")).reduce((N,[,q])=>N+(q||0),0);C[f].produksi=W,f<=14&&(C[f].total=C[f].beli+C[f].produksi),C[14]=C.slice(0,14).reduce((N,q)=>({beli:N.beli+q.beli,produksi:N.produksi+q.produksi,total:N.total+q.total}),{beli:0,produksi:0,total:0}),C[15].total=Math.round(C[14].total*30/7),C[17].total=C[15].total+C[16].total,p(C)})};s.useEffect(()=>{let A=[...m];M==null||M.forEach((f,C)=>{v.setFieldValue(`${C}-id_art`,f.id),v.setFieldValue(`${C}-nama`,f.nama)});const R=M==null?void 0:M.reduce((f,C)=>(Object.values(C.rekap).forEach((J,D)=>{f[D]=f[D]||{beli:0,produksi:0,total:0},f[D].beli+=J.beli,f[D].produksi+=J.produksi,f[D].total+=J.total}),f),[]);A[12]=R?R[0]:0,A[13]=R?R[1]:0,A[14]=A.slice(0,14).reduce((f,C)=>({beli:C?f.beli+C.beli:0,produksi:C?f.produksi+C.produksi:0,total:C?f.total+C.total:0}),{beli:0,produksi:0,total:0}),A[15].total=Math.round(A[14].total*30/7),A[17].total=A[15].total+A[16].total,p(A)},[M]),s.useRef(!1);const Ye=A=>{A.ctrlKey&&A.key==="s"&&(A.preventDefault(),d.submit())};return s.useEffect(()=>{(()=>{if(i=i.map(W=>({...W,rekap:{12:{produksi:0,beli:0,total:0},13:{produksi:0,beli:0,total:0}}})),i.length<1&&I(W=>[...W,{id:"",id_ruta:e.id,nama:e.r110,nomor_art:0,rekap:{12:{produksi:0,beli:0,total:0},13:{produksi:0,beli:0,total:0}}}]),i.length>0){var g=[...i];r.map(N=>({id_art:N.id_art,id_kelompok:N.id_kelompok,beli:Number(N.beli),produksi:Number(N.produksi)})).forEach(N=>(g=g.map(q=>(q.id===N.id_art&&(q.rekap[N.id_kelompok].produksi=N.produksi,q.rekap[N.id_kelompok].beli=N.beli,q.rekap[N.id_kelompok].total=N.beli+N.produksi),q)),N)),I(g)}})(),document.addEventListener("keydown",Ye),d.setFieldsValue(e);let R=[...m];l.map(g=>({id_kelompok:g.id_kelompok,beli:Number(g.beli),produksi:Number(g.produksi)})).forEach(g=>{R[g.id_kelompok].beli=g.beli,R[g.id_kelompok].produksi=g.produksi,R[g.id_kelompok].total=g.produksi+g.beli}),R[16].total=e.blok4_32_16_total,p(R),d.setFieldValue("wtf_26",o),n.setFieldsValue({id_ruta:e.id,hal10_jml_komoditas:e.hal10_jml_komoditas??void 0,hal8_jml_komoditas:e.hal8_jml_komoditas??void 0,hal6_jml_komoditas:e.hal6_jml_komoditas??void 0,hal4_jml_komoditas:e.hal4_jml_komoditas??void 0,hal2_jml_komoditas:e.hal2_jml_komoditas??void 0});const C=[1,8,16],D=a.map(g=>({[`${C.includes(g.id_komoditas)?"jumlah":""}${g.id_komoditas}_beli_harga${g.id_kelompok}`]:g.harga_beli,[`${C.includes(g.id_komoditas)?"jumlah":""}${g.id_komoditas}_produksi_harga${g.id_kelompok}`]:g.harga_produksi,[`${g.id_komoditas}_total_harga`]:g.harga_total,[`${g.id_komoditas}_item`]:g.item,[`${g.id_komoditas}_satuan`]:g.satuan,[`${g.id_komoditas}_beli_volume`]:g.volume_beli,[`${g.id_komoditas}_produksi_volume`]:g.volume_produksi,[`${g.id_komoditas}_total_volume`]:g.volume_total})).reduce((g,W)=>{for(const N in W)W.hasOwnProperty(N)&&(g[N]=W[N]);return g},{});n.setFieldsValue(D),v.setFieldsValue({id_ruta:e.id}),h(new Date(e.updated_at))},[]),c(X,{children:[$,t(Xe,{title:"Entri Kuesioner Inti"}),c(w,{style:{width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:[c(w,{style:{width:"100%",justifyContent:"space-between"},direction:"horizontal",children:[t(w,{children:c(te,{onClick:()=>Ie.get(route("entri",{kode_kabkot:d.getFieldValue("kode_kabkot"),nks:d.getFieldValue("nks")})),children:[t(tt,{})," Kembali"]})}),c(w,{direction:"horizontal",style:{width:"100%",justifyContent:"end"},children:["Last Saved :",(E==null?void 0:E.toLocaleDateString("en-US",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}))||"Never",c(te,{type:"primary",onClick:async()=>{P.loading({content:"Menyimpan data",type:"loading",key:"simpan",duration:1e4});try{const[A,R,f]=await Promise.all([v.submit(),d.submit(),n.submit()]);h(new Date),Ie.get(route("entri.mak.edit",{id:e.id}),{},{preserveState:!0,preserveScroll:!0}),P.open({content:"Data berhasil tersimpan",type:"success",key:"simpan",duration:2})}catch(A){console.error("Error submitting forms:",A)}},children:[t(at,{})," Simpan"]}),c(te,{type:"primary",style:{backgroundColor:"#e64d00"},onClick:async()=>{B(!0)},children:[t(Ut,{}),"Evaluasi"]})]})]}),t(pe,{onChange:Ce,type:"card",items:[{label:"Blok I, II",key:"1",children:t(nt,{tabContentStyle:u,form:d,onFinish:L,setDaftarArt:I,editable:!1,identitas_wilayah:{desa:e.desa,kode_desa:e.kode_desa,kec:e.kec,kode_kec:e.kode_kec}})},{label:"Worksheet",key:"2",children:t(ra,{tabContentStyle:u,form:d,onFinish:L})},{label:"Blok IV.1",key:"3",children:t(qt,{onFinish:Ue,form:n,tabContentStyle:u,calculate:qe,subTotalHarga:We,rekapMak:m,setRekapMak:p})},{label:"Blok IV.1 ART",key:"4",children:t(ta,{tabContentStyle:u,form:k,artForm:v,onFinish:Ge,artFormFinish:Z,rekapArt:ze,setRekapArt:Je,daftarArt:M,setDaftarArt:I,calculateKalori:Ee})},{label:"Blok IV.3",key:"5",children:t(aa,{tabContentStyle:u,form:d,onFinish:L,daftarArt:M,rekapMak:m,daftarRincian432:$e,setRekapMak:p})},{label:"Blok QC",key:"6",children:t(sa,{tabContentStyle:u,form:d,onFinish:L,daftarArt:M,rekapMak:m,daftarRincian432:$e,setRekapMak:p})}]})]}),c(dt,{cancelText:"Tutup",okText:"",handleCancel:V,confirmLoadingModal:!1,openModal:j,handleOk:V,title:"Daftar Evaluasi",width:"1200px",children:[c(te,{onClick:async()=>{x(!0);const A=d.getFieldValue("id");try{const{data:R}=await z.get(route("api.mak.revalidasi",{id_ruta:A}));let f=[...F];f=[...R.evaluasi_rh],S([...f]),y([...R.evaluasi_isian]),P.open({content:"revalidsai selesai",type:"success",key:"revalidasi"})}catch(R){console.error("Error submitting forms:",R)}finally{x(!1)}},children:[t(He,{})," Revalidasi"]}),_?c(w,{style:{width:"100%",justifyContent:"center"},direction:"vertical",children:[t(w,{style:{width:"100%",justifyContent:"center"},children:t(Fe,{size:"large"})}),t(w,{style:{width:"100%",justifyContent:"center"},children:"Sedang melakukan evaluasi terhadap isian, harap bersabar :)"})]}):t(w,{style:{width:"100%"},direction:"vertical",children:t(pe,{onChange:Ce,type:"card",items:[{label:"Error Isian",key:"1",children:c(X,{children:[c(w,{children:["Jumlah error :"," ",b.length]}),t(we,{bordered:!0,columns:ma,dataSource:b,style:{width:"100%"}})]})},{label:"Range Harga",key:"2",children:c(X,{children:[c(w,{children:["Jumlah warning :"," ",F.length]}),t(we,{bordered:!0,columns:ua,dataSource:F,style:{width:"100%"}})]})}]})})]},"range-harga-modal")]})},{Text:ca}=oe,ua=[{title:"Nomor",dataIndex:"nomor",key:"nomor",width:10,render:(e,a,i)=>i+1},{title:"Komoditas",dataIndex:"komoditas",key:"komoditas",render:(e,a)=>`[${a.id_komoditas}] ${a.nama_komoditas}`},{title:"Harga per Satuan",dataIndex:"harga",key:"harga",width:"20%",render:e=>t(H,{color:"#000",value:Number(e)})},{title:"Rincian",dataIndex:"rincian",key:"rincian",render:(e,a)=>c(ca,{children:[a.rincian,"(",t(H,{value:a.min,color:"red"})," s.d",t(H,{value:a.max,color:"red"}),")"]})}],ma=[{title:"Nomor",dataIndex:"nomor",key:"nomor",width:15,render:(e,a,i)=>i+1},{title:"Variabel",dataIndex:"variable",key:"variable"},{title:"Deskripsi",dataIndex:"rincian",key:"rincian"}];da.layout=e=>t(et,{user:e.props.auth.user,header:t("h2",{className:"",children:"Dashboard"}),selectedKey:"entri",children:e});export{da as default};
