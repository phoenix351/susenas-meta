import{r as m,j as o,F as g,a,b as L,c as I}from"./app-e557c7c6.js";import{A as U}from"./AuthenticatedLayout-fe66bae3.js";import{c as u}from"./ColumnSorter-93532ebd.js";import A from"./ProgressChart-b1f1a596.js";import{T as V}from"./index-8faaf65e.js";import{S as c}from"./index-6bd818a5.js";import{B as S}from"./index-50b80eee.js";import{T as N}from"./Table-b083898c.js";import{T as H}from"./index-fe1ab845.js";import{E as v}from"./ExportOutlined-2de963cc.js";import"./Sider-e878b3e0.js";import"./AntdIcon-00a5507c.js";import"./LeftOutlined-26e8e4f2.js";import"./index-7ee738df.js";import"./useForceUpdate-46c57a70.js";import"./responsiveObserver-f28a2943.js";import"./EllipsisOutlined-9956e50d.js";import"./Overflow-c337ad3f.js";import"./Keyframes-6852444d.js";import"./useFlexGapSupport-458b4d4a.js";import"./KeyCode-6413d982.js";import"./EditOutlined-6cc1ce15.js";import"./index-9fea25df.js";import"./index-c55bd24a.js";import"./CustomTooltip-9d8fefb0.js";import"./index-d7752b6c.js";import"./Skeleton-d6fac526.js";import"./index-5adc1abf.js";import"./ExclamationCircleFilled-78b22992.js";import"./InfoCircleFilled-0c5bce13.js";import"./CloseOutlined-ee10c3cd.js";import"./debounce-e7c5c93c.js";import"./PlusOutlined-9d2e728c.js";import"./Dropdown-c371251e.js";import"./styleChecker-390e3bce.js";import"./pickAttrs-f7d248bb.js";import"./addEventListener-4833daf9.js";import"./index-0194a331.js";import"./TextArea-b56a89be.js";import"./CheckOutlined-3f885691.js";import"./index-b4859f99.js";import"./EyeOutlined-52c12e5f.js";import"./Title-3632d3ff.js";const{Title:j}=H,w=(n,x)=>{const s=n.map(i=>i.title).join(";")+`
`+x.map(i=>n.map(k=>{if(k.render){const l=k.render(i[k.dataIndex],i);return l&&l.props?l.props.children:l}else return i[k.dataIndex]}).join(";")).join(`
`),h=new Blob([s],{type:"text/csv"}),r=document.createElement("a");r.href=URL.createObjectURL(h),r.download="export.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r)},J=()=>{const[n,x]=m.useState([]),[s,h]=m.useState([]),[r,i]=m.useState([]),[k,l]=m.useState([]),[b,C]=m.useState(!1);m.useEffect(()=>{(async()=>{C(!0);try{const e=await I.get(route("api.monitoring.rekap_kabkot"));h(e.data.rekap_kabkot??[]);const _=e.data.rekap_kabkot.map(d=>({name:`${d.kode_kabkot}. ${d.kabkot}`,target:d.jumlah_dok,error:d.dok_error,warning:d.dok_warning,clean:d.dok_clean,tipe:"nks",kode:d.kode_kabkot}));l(_);const p=await I.get(route("api.monitoring.rekap_nks"));x(p.data.rekap_nks??[]);const K=await I.get(route("api.monitoring.rekap_user"));i(K.data.rekap_user??[]),console.log({response_kabkot:e,response_user:K,response_nks:p})}catch(e){console.log("something went wrong: ",{error:e})}finally{C(!1)}})()},[]);const $=u("jumlah_dok"),E=u("jumlah_dokumen"),y=u("dok_clean"),f=u("dok_warning"),D=u("dok_error"),P=u("nks"),B=[{title:"Kabupaten",dataIndex:"kabupaten",key:"kabupaten",filters:s.map(t=>({text:`[${t.kode_prov}${t.kode_kabkot}] ${t.kabkot}`,value:t.kode_kabkot})),onFilter:(t,e)=>e.kode_kabkot===t,render:(t,e)=>`[${e.kode_prov}${e.kode_kabkot}] ${e.kabkot}`},{title:"NKS",dataIndex:"nks",key:"nks",render:(t,e)=>`${e.nks}`,sorter:P},{title:"Target Dokumen",dataIndex:"target_dok",key:"target_dok",render:()=>10},{title:"Jumlah Dokumen Dientri",dataIndex:"jumlah_dok",key:"jumlah_dok",sorter:$},{title:"Dokumen Clean",dataIndex:"dok_clean",key:"dok_clean",sorter:y},{title:"Dokumen Warning",dataIndex:"dok_warning",key:"dok_warning",sorter:f},{title:"Dokumen Error",dataIndex:"dok_error",key:"dok_error",sorter:D},{title:"% clean",dataIndex:"persentase",key:"persentase",sorter:(t,e)=>{const _=(Number(t.dok_clean)/10*100).toFixed(2),p=(Number(e.dok_clean)/10*100).toFixed(2);return parseFloat(_)-parseFloat(p)},render:(t,e)=>`${(Number(e.dok_clean)/10*100).toFixed(2)} %`}],T=[{title:"Kabupaten",dataIndex:"kabupaten",key:"kabupaten",render:(t,e)=>`[${e.kode_prov}${e.kode_kabkot}] ${e.kabkot}`},{title:"Target Dokumen",dataIndex:"target_dok",key:"target_dok",render:(t,e)=>e.target_nks*10},{title:"Jumlah Dokumen Dientri",dataIndex:"jumlah_dok",key:"jumlah_dok",sorter:$},{title:"Dokumen Clean",dataIndex:"dok_clean",key:"dok_clean",sorter:y},{title:"Dokumen Warning",dataIndex:"dok_warning",key:"dok_warning",sorter:f},{title:"Dokumen Error",dataIndex:"dok_error",key:"dok_error",sorter:D},{title:"%clean",dataIndex:"persentase",key:"persentase",sorter:(t,e)=>{const _=(Number(t.dok_clean)/t.target_nks*100).toFixed(2),p=(Number(e.dok_clean)/e.target_nks*100).toFixed(2);return parseFloat(_)-parseFloat(p)},render:(t,e)=>`${(Number(e.dok_clean)/e.target_nks/10*100).toFixed(2)} %`}],F=[{title:"Kabupaten",dataIndex:"kode_kabkot",key:"kabupaten",render:(t,e)=>`[71${e.kode_kabkot}] ${e.kabkot}`,filters:s.map(t=>({text:`[${t.kode_prov}${t.kode_kabkot}] ${t.kabkot}`,value:t.kode_kabkot})),onFilter:(t,e)=>e.kode_kabkot===t},{title:"Nama Lengkap",dataIndex:"nama_lengkap",key:"nama_lengkap"},{title:"Username",dataIndex:"username",key:"username"},{title:"Jumlah Dokumen Dientri",dataIndex:"jumlah_dokumen",key:"jumlah_dokumen",sorter:E},{title:"Dokumen Clean",dataIndex:"dok_clean",key:"dok_clean",sorter:y},{title:"Dokumen Warning",dataIndex:"dok_warning",key:"dok_warning",sorter:f},{title:"Dokumen Error",dataIndex:"dok_error",key:"dok_error",sorter:D}];return o(g,{children:[a(L,{title:"Index"}),a(V,{style:{backgroundColor:"#fff",padding:"10px"},items:[{label:"Progress per Kabupaten/Kota",key:"1",children:o(g,{children:[o(j,{level:2,children:["Progress pendataan menurut Kabupaten/Kota"," "]}),a(c,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:o(S,{type:"primary",onClick:()=>w(T,s),children:[a(v,{}),"Export as CSV"]})}),a(c,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px",marginBottom:"30px"},direction:"vertical",children:a(N,{columns:T,pagination:{pageSize:20,hideOnSinglePage:!0},loading:{spinning:b,tip:"memuat data..."},dataSource:s,scroll:{x:"100%"}})})]})},{label:"Progress per NKS",key:"2",children:o(g,{children:[a(j,{level:2,children:"Progress pendataan menurut NKS "}),a(c,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:o(S,{type:"primary",onClick:()=>w(B,n),children:[a(v,{}),"Export as CSV"]})}),a(c,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:a(A,{data:k},"2-1")})]})},{label:"Progress per PML",key:"3",children:o(g,{children:[a(j,{level:2,children:"Progress pendataan menurut PML "}),a(c,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:o(S,{type:"primary",onClick:()=>w(F,r),children:[a(v,{}),"Export as CSV"]})}),a(c,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:a(N,{columns:F,loading:{spinning:b,tip:"memuat data..."},dataSource:r,scroll:{x:"100%"}})})]})}]})]})};J.layout=n=>a(U,{user:n.props.auth.user,header:a("h2",{className:"",children:"Index"}),selectedKey:"progress",children:n});export{J as default};
