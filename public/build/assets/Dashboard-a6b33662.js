import{r as c,j as d,F as _,a,b as N}from"./app-520bb281.js";import{A as E}from"./AuthenticatedLayout-617e60c1.js";import{T as B}from"./index-d559e8bc.js";import{S as u}from"./index-f7b15539.js";import{B as f}from"./index-fa30e389.js";import{E as D}from"./ExportOutlined-07a35e32.js";import{T as v}from"./Table-0aaddfd7.js";import{T as P}from"./index-4513a508.js";import"./Sider-00caf04b.js";import"./AntdIcon-b0ad16ba.js";import"./index-de0dcdfc.js";import"./KeyCode-9e25981a.js";import"./index-fc112d2c.js";import"./index-d064af02.js";import"./addEventListener-804ce7b7.js";const{Title:I}=P;function p(r){return(k,i)=>{const s=k[r]!==void 0?Number(k[r]):0,n=i[r]!==void 0?Number(i[r]):0;return s-n}}const S=(r,k)=>{const i=r.map(o=>o.title).join(";")+`
`+k.map(o=>r.map(m=>{if(m.render){const l=m.render(o[m.dataIndex],o);return l&&l.props?l.props.children:l}else return o[m.dataIndex]}).join(";")).join(`
`),s=new Blob([i],{type:"text/csv"}),n=document.createElement("a");n.href=URL.createObjectURL(s),n.download="export.csv",document.body.appendChild(n),n.click(),document.body.removeChild(n)},U=({data:r,rekap_kabkot:k,users:i})=>{const[s,n]=c.useState([]),[o,m]=c.useState([]),[l,j]=c.useState([]);c.useEffect(()=>{n(r),m(k),j(i)},[]);const C=p("jumlah_dok"),F=p("jumlah_dokumen"),x=p("dok_clean"),b=p("dok_warning"),h=p("dok_error"),K=p("nks"),$=[{title:"Kabupaten",dataIndex:"kabupaten",key:"kabupaten",filters:o.map(t=>({text:`[${t.kode_prov}${t.kode_kabkot}] ${t.kabkot}`,value:t.kode_kabkot})),onFilter:(t,e)=>e.kode_kabkot===t,render:(t,e)=>`[${e.kode_prov}${e.kode_kabkot}] ${e.kabkot}`},{title:"NKS",dataIndex:"nks",key:"nks",render:(t,e)=>`${e.nks}`,sorter:K},{title:"Target Dokumen",dataIndex:"target_dok",key:"target_dok",render:()=>10},{title:"Jumlah Dokumen Dientri",dataIndex:"jumlah_dok",key:"jumlah_dok",sorter:C},{title:"Dokumen Clean",dataIndex:"dok_clean",key:"dok_clean",sorter:x},{title:"Dokumen Warning",dataIndex:"dok_warning",key:"dok_warning",sorter:b},{title:"Dokumen Error",dataIndex:"dok_error",key:"dok_error",sorter:h},{title:"% clean",dataIndex:"persentase",key:"persentase",sorter:(t,e)=>{const g=(Number(t.dok_clean)/10*100).toFixed(2),y=(Number(e.dok_clean)/10*100).toFixed(2);return parseFloat(g)-parseFloat(y)},render:(t,e)=>`${(Number(e.dok_clean)/10*100).toFixed(2)} %`}],T=[{title:"Kabupaten",dataIndex:"kabupaten",key:"kabupaten",render:(t,e)=>`[${e.kode_prov}${e.kode_kabkot}] ${e.kabkot}`},{title:"Target Dokumen",dataIndex:"target_dok",key:"target_dok",render:(t,e)=>e.target_nks*10},{title:"Jumlah Dokumen Dientri",dataIndex:"jumlah_dok",key:"jumlah_dok",sorter:C},{title:"Dokumen Clean",dataIndex:"dok_clean",key:"dok_clean",sorter:x},{title:"Dokumen Warning",dataIndex:"dok_warning",key:"dok_warning",sorter:b},{title:"Dokumen Error",dataIndex:"dok_error",key:"dok_error",sorter:h},{title:"%clean",dataIndex:"persentase",key:"persentase",sorter:(t,e)=>{const g=(Number(t.dok_clean)/10*100).toFixed(2),y=(Number(e.dok_clean)/10*100).toFixed(2);return parseFloat(g)-parseFloat(y)},render:(t,e)=>`${(Number(e.dok_clean)/e.target_nks/10*100).toFixed(2)} %`}],w=[{title:"Kabupaten",dataIndex:"kode_kabkot",key:"kabupaten",render:(t,e)=>`[71${e.kode_kabkot}] ${e.kabkot}`,filters:o.map(t=>({text:`[${t.kode_prov}${t.kode_kabkot}] ${t.kabkot}`,value:t.kode_kabkot})),onFilter:(t,e)=>e.kode_kabkot===t},{title:"Nama Lengkap",dataIndex:"nama_lengkap",key:"nama_lengkap"},{title:"Username",dataIndex:"username",key:"username"},{title:"Jumlah Dokumen Dientri",dataIndex:"jumlah_dokumen",key:"jumlah_dokumen",sorter:F},{title:"Dokumen Clean",dataIndex:"dok_clean",key:"dok_clean",sorter:x},{title:"Dokumen Warning",dataIndex:"dok_warning",key:"dok_warning",sorter:b},{title:"Dokumen Error",dataIndex:"dok_error",key:"dok_error",sorter:h}];return d(_,{children:[a(N,{title:"Dashboard"}),a(B,{style:{backgroundColor:"#fff",padding:"10px"},items:[{label:"Progress per Kabupaten/Kota",key:"1",children:d(_,{children:[d(I,{level:2,children:["Progress pendataan menurut Kabupaten/Kota"," "]}),a(u,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:d(f,{type:"primary",onClick:()=>S(T,o),children:[a(D,{}),"Export as CSV"]})}),a(u,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px",marginBottom:"30px"},direction:"vertical",children:a(v,{columns:T,dataSource:o,scroll:{x:"100%"}})})]})},{label:"Progress per NKS",key:"2",children:d(_,{children:[a(I,{level:2,children:"Progress pendataan menurut NKS "}),a(u,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:d(f,{type:"primary",onClick:()=>S($,s),children:[a(D,{}),"Export as CSV"]})}),a(u,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:a(v,{columns:$,dataSource:s,scroll:{x:"100%"}})})]})},{label:"Progress per PML",key:"3",children:d(_,{children:[a(I,{level:2,children:"Progress pendataan menurut PML "}),a(u,{style:{marginBottom:"10px",marginTop:"10px",width:"100%",justifyContent:"end"},children:d(f,{type:"primary",onClick:()=>S(w,l),children:[a(D,{}),"Export as CSV"]})}),a(u,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:a(v,{columns:w,dataSource:l,scroll:{x:"100%"}})})]})}]})]})};U.layout=r=>a(E,{user:r.props.auth.user,header:a("h2",{className:"",children:"Dashboard"}),selectedKey:"dashboard",children:r});export{U as default};
