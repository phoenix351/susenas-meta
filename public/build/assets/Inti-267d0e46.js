import{r as s,_ as g,j as d,F as I,a,b as _,g as p,c as k}from"./app-07f63a06.js";import{A as S}from"./AuthenticatedLayout-234c9ce1.js";import{E}from"./EntriIntiSearch-eadc5427.js";import{l as $}from"./lodash-b2efad52.js";import{F as w}from"./index-ab2c0fb0.js";import{m as H}from"./index-a56e40e1.js";import{S as u}from"./index-63628ab1.js";import{B as h}from"./index-2eda4a0e.js";import{A as f}from"./AntdIcon-8b9092f5.js";import{T as P}from"./Table-9845d268.js";import{E as j}from"./EditFilled-6735d931.js";import{P as B}from"./index-e8483784.js";import"./Sider-14134412.js";import"./index-d2dcf194.js";import"./KeyCode-2c288b19.js";import"./index-188e454b.js";import"./index-e06b5d3f.js";import"./addEventListener-a6f927f4.js";import"./ReloadOutlined-b8ee8ad0.js";import"./ActionButton-ad295530.js";var T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"};const V=T;var A=function(n,i){return s.createElement(f,g({},n,{ref:i,icon:V}))};const M=s.forwardRef(A);var O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};const z=O;var N=function(n,i){return s.createElement(f,g({},n,{ref:i,icon:z}))};const R=s.forwardRef(N),K=({data_susenas:r,nks:n,kode_kabkot:i})=>{s.useEffect(()=>{console.log({data_susenas:r}),n&&i&&o.setFieldsValue({nks:n,kode_kabkot:i,semester:"1"}),r.length>0&&c(r)},[]);const[o]=w.useForm(),[y,c]=s.useState([]),[l,x]=H.useMessage(),v=async t=>{console.log({values:t}),l.open({type:"loading",key:"cari",content:"Memuat Data"});try{const e=route("api.entri.mak",t),{data:m}=await k.get(e);c(m.data),l.open({type:"success",key:"cari",content:"Berhasil mengambil data"})}catch{l.open({type:"error",key:"cari",content:"Oops terjadi kesalahan, silahkan hubungi admin"})}},F=async t=>{try{const{data:e}=await k.delete(route("entri.mak.delete",{id_ruta:t}));l.open({content:"Berhasil menghapus 1 anggota rumah tangga",type:"success",key:"hapus-ruta"}),p.get(route("entri",{kode_kabkot:o.getFieldValue("kode_kabkot"),nks:o.getFieldValue("nks")}))}catch(e){l.open({content:`Terjadi galat ketika menghapus data, tunjukan code ini pada Developer (${e})`,type:"error",key:"hapus-ruta",duration:3})}},b=$.throttle(F,2e3),C={clean:"green",error:"red",warning:"rgb(255, 204, 0)",entri:"#fff"},D=[{title:"No",dataIndex:"id",key:"id",render:(t,e,m)=>m+1},{title:"Kecamatan",dataIndex:"kec",key:"kec",render:(t,e)=>`[${e.kode_kec}] ${e.kec}`},{title:"Desa",dataIndex:"desa",key:"desa",render:(t,e)=>`[${e.kode_desa}] ${e.desa}`},{title:"Blok Sensus",dataIndex:"kode_bs4",key:"kode_bs4"},{title:"No Urut Sampel",dataIndex:"r109",key:"r109"},{title:"Nama KRT",dataIndex:"r110",key:"r110"},{title:"Alamat",dataIndex:"r111",key:"r111"},{title:"Nama PML",dataIndex:"nama_lengkap",key:"nama_lengkap"},{title:"Status",dataIndex:"status_dok",key:"status_dok",render:t=>a(u,{style:{backgroundColor:C[t],fontWeight:600,color:"#fff",padding:"5px 10px",borderRadius:"5px"},children:t})},{title:"Entri",dataIndex:"entri",key:"entri",render:(t,e)=>d(h,{type:"primary",onClick:()=>p.get(`${route("entri.mak.edit",{id:e.id})}`),children:[a(j,{})," entri"]})},{title:"Delete",dataIndex:"entri",key:"entri",render:(t,e)=>a(B,{placement:"topLeft",title:"apakah anda yakin akan menghapus ruta ini?",description:"hapus anggota rumah tangga",okText:"yakin dong",cancelText:"nyanda",onConfirm:()=>b(e.id),children:d(h,{type:"default",children:[a(M,{})," hapus"]})})}];return d(I,{children:[x,a(_,{title:"Entri Kuesioner Inti"}),d(u,{style:{backgroundColor:"#fff",width:"100%",minHeight:"300px",padding:"10px 15px"},direction:"vertical",children:[a(E,{setDataSource:c,form:o,onFinish:v}),a(u,{style:{width:"100%",justifyContent:"end"},children:d(h,{type:"primary",disabled:!o.getFieldValue("nks"),onClick:()=>p.visit(route("entri.mak.create",o.getFieldsValue())),children:[a(R,{})," Tambah Ruta"]})}),a(P,{dataSource:y,columns:D}),";"]})]})};K.layout=r=>a(S,{user:r.props.auth.user,header:a("h2",{className:"",children:"Dashboard"}),selectedKey:"entri",children:r});export{K as default};
